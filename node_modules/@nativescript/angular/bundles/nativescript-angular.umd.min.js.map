{"version":3,"sources":["../../trace.ts","../../dom-adapter.ts","../polyfills/console.ts","../../node_modules/tslib/tslib.es6.js","../../platform-providers.ts","../../platform-common.ts","../../app-host-view.ts","../../platform.ts","../file-system/ns-file-system.ts","../../resource-loader.ts","../../lang-facade.ts","../../frame.service.ts","../router/ns-location-utils.ts","../router/ns-location-strategy.ts","../common/detached-loader.ts","../common/utils.ts","../directives/dialogs.ts","../../element-registry.ts","../directives/templated-items-comp.ts","../directives/list-view-comp.ts","../directives/tab-view.ts","../directives/action-bar.ts","../directives/platform-filters.ts","../directives/index.ts","../../common.ts","../../view-util.ts","../../renderer.ts","../../renderer-emulated.ts","../../renderer-factory.ts","../../nativescript.module.ts","../animations/utils.ts","../animations/animation-player.ts","../animations/animation-driver.ts","../animations/animations.module.ts","../http-client/http-utils.ts","../http-client/ns-http-backend.ts","../http-client/http-client.module.ts","../esm2015/forms/value-accessors/base-value-accessor.ts","../esm2015/forms/value-accessors/text-value-accessor.ts","../esm2015/forms/value-accessors/checked-value-accessor.ts","../esm2015/forms/value-accessors/date-value-accessor.ts","../esm2015/forms/value-accessors/time-value-accessor.ts","../esm2015/forms/value-accessors/number-value-accessor.ts","../esm2015/forms/value-accessors/selectedIndex-value-accessor.ts","../forms/forms.module.ts","../router/page-router-outlet-utils.ts","../router/ns-route-reuse-strategy.ts","../router/router-extensions.ts","../router/ns-router-link.ts","../esm2015/router/private-imports/router-url-tree.ts","../router/ns-router-link-active.ts","../router/page-router-outlet.ts","../router/ns-platform-location.ts","../router/ns-empty-outlet.component.ts","../router/ns-module-factory-loader.ts","../router/router.module.ts"],"names":["NativeScriptDebug","animationsTraceCategory","rendererTraceCategory","viewUtilCategory","routerTraceCategory","routeReuseStrategyTraceCategory","listViewTraceCategory","bootstrapCategory","enabled","Trace","isEnabled","isLogEnabled","animationsLog","message","write","rendererLog","msg","rendererError","messageType","error","viewUtilLog","routerLog","routerError","routeReuseStrategyLog","styleError","categories","Style","listViewLog","listViewError","bootstrapLog","bootstrapLogError","NativeScriptDomAdapter","this","resourceLoaderType","makeCurrent","ɵsetRootDomAdapter","prototype","hasProperty","_element","_name","log","arg","console","logError","logGroup","logGroupEnd","Object","defineProperty","Error","_value","setProperty","_el","getProperty","invoke","_methodName","_args","contains","_nodeA","_nodeB","parse","_templateHtml","query","_selector","querySelector","querySelectorAll","on","_evt","_listener","onAndCancel","dispatchEvent","createMouseEvent","_eventType","createEvent","preventDefault","isPrevented","getInnerHTML","getTemplateContent","getOuterHTML","nodeName","_node","nodeValue","type","content","firstChild","nextSibling","parentElement","childNodes","childNodesAsList","clearNodes","appendChild","removeChild","replaceChild","_newNode","_oldNode","remove","insertBefore","insertAllBefore","_nodes","insertAfter","setInnerHTML","getText","setText","getValue","setValue","getChecked","setChecked","createComment","_text","createTemplate","_html","createElement","_tagName","_doc","createElementNS","_ns","createTextNode","createScriptTag","_attrName","_attrValue","createStyleElement","_css","createShadowRoot","getShadowRoot","getHost","getDistributedNodes","clone","getElementsByClassName","getElementsByTagName","classList","addClass","_className","removeClass","hasClass","setStyle","_styleName","_styleValue","removeStyle","getStyle","hasStyle","tagName","attributeMap","hasAttribute","_attribute","hasAttributeNS","getAttribute","getAttributeNS","setAttribute","setAttributeNS","removeAttribute","removeAttributeNS","templateAwareRoot","createHtmlDocument","defaultDoc","getDefaultDocument","getBoundingClientRect","getTitle","setTitle","_newTitle","elementMatches","_n","isTemplateElement","isTextNode","isCommentNode","isElementNode","hasShadowRoot","isShadowRoot","importIntoDoc","adoptNode","getHref","getEventKey","_event","resolveAndSetHref","_baseUrl","_href","supportsDOMEvents","supportsNativeShadowDOM","getGlobalEventTarget","_target","getHistory","getLocation","getBaseHref","resetBaseElement","getUserAgent","setData","getComputedStyle","getData","setGlobalVar","supportsWebAnimation","performanceNow","getAnimationPrefix","getTransitionEnd","supportsAnimation","supportsCookies","getCookie","setCookie","group","groupEnd","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","__values","o","s","Symbol","iterator","m","next","value","done","__read","n","e","ar","push","__spread","concat","_rootPageRef","APP_ROOT_VIEW","InjectionToken","DeviceToken","PAGE_FACTORY","defaultPageFactory","_opts","Page","defaultPageFactoryProvider","provide","useValue","setRootPage","page","WeakRef","getRootPage","get","getDefaultPage","rootPage","frame","Frame","topmost","currentPage","defaultPageProvider","useFactory","getDefaultFrame","defaultFrameProvider","getDefaultDevice","Device","lastBootstrappedModule","defaultDeviceProvider","AppHostView","backgroundColor","_this","_super","_ngAppRoot","_content","parentNode","undefined","ngAppRoot","ProxyViewContainer","grid","GridLayout","addChild","ContentView","AppHostAsyncView","onBeforeLivesync","EventEmitter","onAfterLivesync","NativeScriptSanitizer","sanitize","_context","Sanitizer","NativeScriptDocument","body","isOverride","tag","COMMON_PROVIDERS","useClass","deps","DOCUMENT","NativeScriptPlatformRef","platform","appOptions","bootstrapModuleFactory","moduleFactory","_bootstrapper","bootstrapFactory","hmrOptions","moduleTypeFactory","bootstrapApp","bootstrapModule","moduleType","compilerOptions","bootstrapType","global","__onLiveSyncCore","rootView","Application","getRootView","_closeAllModalViewsInternal","livesyncCallback","_livesync","cssFile","setCssFileName","bootstrapNativeScriptApp","onDestroy","callback","injector","destroy","destroyed","rootContent","launchCallback","profile","args","tempAppHostView","tempAppHostAsyncView","async","launchView","Color","style","zIndex","startAnimation","setTimeout","then","moduleRef","profilingUptime","cleanup","err","errorMessage","stack","createErrorUI","Zone","drainMicroTaskQueue","root","exitCallback","androidActivity","android","isFinishing","lastModuleRef","launchEvent","exitEvent","run","resetRootView","errorTextBox","TextView","text","color","createFrameAndPage","isLivesync","pageFactory","isBootstrap","navigate","PlatformRef","_platformNativeScript","createPlatformFactory","platformCore","NSFileSystem","currentApp","knownFolders","fileFromPath","path","File","fromPath","fileExists","exists","Injectable","sourceExtensionsMap",".scss",".sass",".less","FileSystemResourceLoader","fs","url","resolvedPath","resolve","readTextSync","normalizedSourceUrl","resolveRelativeUrls","normalizedCompiledFileUrl","replace","ext","indexOf","join","ResourceLoader","isPresent","obj","isBlank","FrameService","getFrame","providedIn","Outlet","outletKey","pathByOutlets","modalNavigationDepth","frames","states","shouldDetach","outletKeys","isPageNavigationBack","showingModal","containsFrame","peekState","containsTopState","stateUrl","lastState","segmentGroup","toString","getFrameToBack","isNSEmptyOutlet","index","currentFrame","canGoBack","defaultNavOptions","clearHistory","animated","NSLocationStrategy","frameService","outlets","popStateCallbacks","_modalNavigationDepth","currentUrlTree","state","currentOutlet","tree","changedOutlet","getSegmentGroupByOutlet","isRootSegmentGroup","updateSegmentGroup","urlSerializer","DefaultUrlSerializer","queryParams","serialize","prepareExternalUrl","internal","pushState","title","pushStateInternal","urlTreeRoot","keys","children","queue","currentTree","forEach","outletName","currentSegmentGroup","outlet","outletPath","getSegmentGroupFullPath","getOutletKey","findOutlet","parentOutletName","parentOutletPath","parent","parentOutletKey","parentOutlet","containsLastState","upsertModalOutlet","updateStates","createOutlet","shift","rootOutlet","replaceState","forward","back","pop","count","isPageNavigation","callPopState","topmostFrame","getOutletByFrame","frameToBack","goBack","onPopState","fn","change","_b","_c","result","outletLog","map","v","reverse","_beginBackPageNavigation","_finishBackPageNavigation","_beginModalNavigation","_closeModalNavigation","isShowingModal","topmostOutlet","findOutletByModal","_beginPageNavigation","navOptions","_currentNavigationOptions","_setNavigationOptions","options","transition","JSON","stringify","_getOutlets","updateOutletFrame","isEmptyOutletFrame","clearOutlet","filter","isEqualToCurrent","fullPath","getRouteFullPath","currentRoute","urls","isArray","getPathByOutlets","urlSegmentGroup","pathToOutlet","lastPath","activatedRouteSnapshot","find","pathByOutlets_1","modalNavigation","equalModalDepth","isNewPage","equalStateUrls","locationState","assign","updateParentsStates","newSegmentGroup","newOutlet","pathList","split","currentPath","rootNode","oldSegmentGroup","segmentedGroup","currentModalOutlet","ngOnDestroy","LocationStrategy","DetachedLoader","resolver","changeDetector","containerRef","appRef","disposeFunctions","loadInLocation","componentType","componentRef","resolveComponentFactory","attachView","hostView","detachView","Promise","detectChanges","markForCheck","loadComponent","loadWithFactory","factory","throwIfAlreadyLoaded","parentModule","moduleName","once","wasCalled","apply","Component","selector","template","ComponentFactoryResolver","ChangeDetectorRef","ViewContainerRef","ApplicationRef","context","closeCallback","ModalDialogService","location","zone","showModal","viewContainerRef","parentView","element","nativeElement","_ngDialogRoot","reject","_showDialog","doneCallback","componentView","detachedLoaderRef","_i","closeModal","instance","modalParams","ModalDialogParams","childInjector","Injector","providers","detachedFactory","createComponent","compRef","detachedProxy","getChildrenCount","getChildAt","NgZone","InvisibleNode","nodeType","getClassName","id","View","CommentNode","meta","skipAddToDom","TextNode","name","isDetachedElement","isView","view","isInvisibleNode","elementMap","Map","camelCaseSplit","defaultViewMeta","registerElement","elementName","entry","set","toLowerCase","getViewClass","getViewMeta","isKnownView","has","getSingleViewRecursive","nodes","nestLevel","actualNodes","node","rootLayout","parentLayout","LayoutBase","frameMeta","insertChild","child","AbsoluteLayout","ActivityIndicator","BottomNavigation","Button","DatePicker","DockLayout","HtmlView","Image","Label","ListPicker","ListView","Placeholder","Progress","Repeater","ScrollView","SearchBar","SegmentedBar","SegmentedBarItem","Slider","StackLayout","FlexboxLayout","Switch","TabView","TabStrip","TabStripItem","TabContentItem","Tabs","TextField","TimePicker","WebView","WrapLayout","FormattedString","Span","NG_VIEW","ItemContext","$implicit","item","even","odd","TemplatedItemsComponent","_elementRef","_iterableDiffers","setupItemView","templatedItemsView","onItemLoading","_items","needDiffer","ObservableArray","_differ","isListLikeIterable","_index","items","ngAfterContentInit","setItemTemplates","off","_templateMap","clear","itemTemplate","itemTemplateQuery","templates_1","itemTemplates","registerTemplate","keyedTemplate","createView","getItemTemplateViewFactory","viewRef","object","currentItem","getItem","loader","createEmbeddedView","getItemViewRoot","setupViewRef","detectChangesOnChild","data","resultView","ngDoCheck","diff","refresh","rootLocator","rootNodes","Directive","ElementRef","IterableDiffers","ViewChild","read","static","Output","ContentChild","TemplateRef","Input","TEMPLATED_ITEMS_COMPONENT","TemplateKeyDirective","templateRef","comp","Inject","Host","ListViewComponent","changeDetection","ChangeDetectionStrategy","OnPush","useExisting","forwardRef","TabViewDirective","tabView","_selectedIndex","viewInitialized","selectedIndex","ngAfterViewInit","TabViewItemDirective","owner","viewContainer","_config","config","iconSource","textTransform","applyConfig","ensureItem","TabViewItem","ngOnInit","realViews","newItems","isActionItem","ActionItem","isNavigationButton","NavigationButton","actionBarMeta","navigationButton","addActionItem","titleView","actionItems","removeItem","bar","insertActionItemBefore","appendActionItem","actionItemsCollection","getItems","indexToInsert","splice","setItems","addItem","ActionBar","actionBarHidden","actionBar","update","ActionBarScope","onNavButtonInit","navBtn","onNavButtonDestroy","nav","onActionInit","onActionDestroy","ActionItemDirective","ownerScope","Optional","NavigationButtonDirective","show","isAndroid","isIOS","NS_DIRECTIVES","ActionBarComponent","AndroidFilterComponent","IosFilterComponent","NgModule","declarations","imports","CommonModule","exports","schemas","NO_ERRORS_SCHEMA","XML_ATTRIBUTES","freeze","whiteSpaceSplitter","isLayout","isContentView","propertyMaps","ViewUtil","device","isIos","os","platformNames","ios","previous","extendedParent","ensureNgViewExtensions","extendedChild","lastChild","addToQueue","nextVisual","findNextVisual","addToVisualTree","previousSibling","appendToQueue","insertToLayout","_addChildFromBuilder","removeLayoutChild","getChildIndex","removeFromQueue","removeFromVisualTree","findPreviousElement","previousVisual","getPreviousVisualElement","elementIndex","_removeView","createText","originalName","setNgViewExtensions","cssType","ngView","attributeName","namespace","runsIn","properties","propMap","getProperties","prop","setPropertyInternal","propertyName","removeParentReferencesFromItems","setClasses","items_1","items_1_1","propName","cssClasses","ngCssClasses","className","syncClasses","delete","classesValue","classes","classValue","from","styleName","unsetValue","NativeScriptRenderer","viewUtil","newChild","refChild","_a","oldChild","selectRootElement","getViewById","slice","_namespace","createViewRoot","hostElement","projectNodes","_flags","setBindingDebugInfo","renderElement","propertyValue","setElementDebugInfo","_info","invokeElementMethod","_renderElement","methodName","_renderNode","listen","eventName","zonedCallback","loadedEvent","isLoaded","notifyData","Renderer2","COMPONENT_REGEX","ATTR_SANITIZER","replaceNgAttribute","input","componentId","addScopedStyleToCss","addCss","EmulatedRenderer","component","contentAttr","hostAttr","addStyles","styles","applyToHost","addStyleToCss","NativeScriptRendererFactory","componentRenderers","setRootNgView","defaultRenderer","rootNgView","createRenderer","renderer","encapsulation","ViewEncapsulation","None","errorHandlerFactory","ErrorHandler","SystemJsNgModuleLoader","ɵINJECTOR_SCOPE","RendererFactory2","ViewportScroller","NullViewportScroller","entryComponents","ApplicationModule","NativeScriptCommonModule","NativeScriptModule","SkipSelf","DASH_CASE_REGEXP","createKeyframeAnimationInfo","duration","delay","easing","isForwards","curve","getCurve","keyframes","parseAnimationKeyframe","animationTimingFunctionConverter","getKeyframeDuration","getDeclarations","offset","unparsedDeclarations","property","parseKeyframeDeclarations","NativeScriptAnimationPlayer","parentPlayer","_startSubscriptions","_doneSubscriptions","_finished","_started","initKeyframeAnimation","init","hasStarted","onStart","onDone","play","animation","playAnimation","onTargetLoaded","bind","onFinish","catch","_e","pause","finish","reset","isPlaying","cancel","restart","setPosition","_p","getPosition","info","KeyframeAnimation","keyframeAnimationFromInfo","createKeyframeAnimation","Selector","rawSelector","match","nsSelectorMatch","classSelectorsMatch","selectors","trim","nsSelectors","CSSHelper","createSelector","classSelectors","startsWith","substring","some","cls","NativeScriptAnimationDriver","validateStyleProperty","validProperties","matchesElement","makeSelector","containsElement","elm1","elm2","params","originalView","visitDescendants","viewMatches","found","multi","queryDescendants","matches","computeStyle","camelCaseProp","toUpperCase","animate","cb","cbParams","eachDescendant","eachChild","CssAnimationProperty","_getPropertyNames","InjectableAnimationEngine","doc","driver","normalizer","AnimationEngine","AnimationDriver","AnimationStyleNormalizer","processLocalFileRequest","nsFileSystem","successResponse","errorResponse","getAbsolutePath","Observable","observer","readText","json","complete","errorResult","AnimationBuilder","BrowserAnimationBuilder","WebAnimationsStyleNormalizer","engine","AnimationRendererFactory","NativeScriptAnimationsModule","NsHttpBackEnd","xhrFactory","handle","req","handleLocalFileRequest","createSuccessResponse","createErrorResponse","HttpXhrBackend","status","HttpResponse","statusText","HttpErrorResponse","XhrFactory","HttpBackend","HttpClientModule","BaseValueAccessor","pendingChangeNotification","onChange","_","onTouched","registerOnChange","clearTimeout","registerOnTouched","setDisabledState","isDisabled","writeValue","normalizeValue","TEXT_VALUE_ACCESSOR","NG_VALUE_ACCESSOR","TextValueAccessor","elementRef","normalized","host","(blur)","(textChange)","CHECKED_VALUE_ACCESSOR","CheckedValueAccessor","checked","(checkedChange)","DATE_VALUE_ACCESSOR","DateValueAccessor","date","(dateChange)","TIME_VALUE_ACCESSOR","TimeValueAccessor","time","(timeChange)","NUMBER_VALUE_ACCESSOR","NumberValueAccessor","(valueChange)","SELECTED_INDEX_VALUE_ACCESSOR","SelectedIndexValueAccessor","(selectedIndexChange)","findTopActivatedRouteNodeForOutlet","activatedRoute","outletActivatedRoute","routeConfig","FormsModule","pageRouterActivatedSymbol","loaderRefSymbol","destroyComponentRef","loaderRef","getSnapshotKey","snapshot","pathFromRoot","DetachedStateCache","cache","cacheItem","peek","clearModalCache","removedItemsCount","isModal","modalCacheCleared","NSRouteReuseStrategy","cacheByOutlet","route","isPageActivated","isBack","shouldAttach","store","topItem","retrieve","cachedItem","shouldReuseRoute","future","curr","shouldReuse","clearCache","RouterExtensions","router","locationStrategy","commands","extras","navigateByUrl","backNavigationOptions","backOutlets","findOutletsToBack","outletsToBack","outletToBack","backToPreviousPage","canGoBackToPreviousPage","rootRoute","routerState","relativeRoute","relativeTo","relativeRouteOutlet","findOutletByRoute","routesToMatch","this_1","currentRouteSnapshop","Router","NSRouterLink","ngZone","navigator","el","pageTransition","pageTransitionDuration","getExtras","fragment","queryParamsHandling","preserveFragment","attrBoolValue","getTransition","skipLocationChange","replaceUrl","convertClearHistory","urlTree","createUrlTree","isNaN","containsTree","container","containee","exact","equalSegmentGroups","containsSegmentGroup","equalPath","segments","numberOfChildren","containsSegmentGroupHelper","containeePaths","current","hasChildren","PRIMARY_OUTLET","a","ActivatedRoute","NSRouterLinkActive","active","nsRouterLinkActiveOptions","subscription","events","subscribe","NavigationEnd","links","changes","ngOnChanges","unsubscribe","hasActiveLinks","parseUrl","isActiveLinks_1","reduceList","q","reduce","res","link","isLinkActive","isActive","exportAs","ContentChildren","startRoute","BehaviorSubject","DestructibleInjector","destructableProviders","refs","Set","token","notFoundValue","flags","ref","add","Function","routeToString","PageRouterOutlet","parentContexts","actionBarVisibility","isEmptyOutlet","componentFactoryResolver","routeReuseStrategy","elRef","activated","_activatedRoute","activateEvents","deactivateEvents","setActionBarVisibility","onChildOutletCreated","detachedLoaderFactory","onChildOutletDestroyed","isActivated","detach","emit","deactivate","attach","reattach","markActivatedRoute","activateWith","getOutlet","activateOnGoForward","loadedResolver","getComponentFactory","isNavigation","destructables","PageRoute","ChildrenOutletContexts","getOrCreateContext","loadComponentInPage","navigationContext","navigatedFromCallback","wrap","isBackNavigation","navigatedFromEvent","navigatedToEvent","childRoute","topActivatedRoute","Attribute","NativescriptPlatformLocation","getState","getBaseHrefFromDOM","onHashChange","_fn","_newPath","PlatformLocation","pageRouterOutlet","NSModuleFactoryLoader","compiler","provideLocationStrategy","Compiler","SystemJsNgModuleLoaderConfig","NativeScriptRouterModule","forRoot","routes","ngModule","RouterModule","RouteReuseStrategy","forChild","NSEmptyOutletComponent","extraProviders","bootInExistingPage"],"mappings":"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","sourcesContent":["import { Trace } from '@nativescript/core';\n\nexport namespace NativeScriptDebug {\n\texport const animationsTraceCategory = 'ns-animations';\n\texport const rendererTraceCategory = 'ns-renderer';\n\texport const viewUtilCategory = 'ns-view-util';\n\texport const routerTraceCategory = 'ns-router';\n\texport const routeReuseStrategyTraceCategory = 'ns-route-reuse-strategy';\n\texport const listViewTraceCategory = 'ns-list-view';\n\texport const bootstrapCategory = 'bootstrap';\n\t// TODO: migrate all usage to this - avoids extraneous method executions\n\texport const enabled = Trace.isEnabled();\n\n\texport function isLogEnabled() {\n\t\treturn Trace.isEnabled();\n\t}\n\n\texport function animationsLog(message: string): void {\n\t\tTrace.write(message, animationsTraceCategory);\n\t}\n\n\texport function rendererLog(msg): void {\n\t\tTrace.write(msg, rendererTraceCategory);\n\t}\n\n\texport function rendererError(message: string): void {\n\t\tTrace.write(message, rendererTraceCategory, Trace.messageType.error);\n\t}\n\n\texport function viewUtilLog(msg): void {\n\t\tTrace.write(msg, viewUtilCategory);\n\t}\n\n\texport function routerLog(message: string): void {\n\t\tTrace.write(message, routerTraceCategory);\n\t}\n\n\texport function routerError(message: string): void {\n\t\tTrace.write(message, routerTraceCategory, Trace.messageType.error);\n\t}\n\n\texport function routeReuseStrategyLog(message: string): void {\n\t\tTrace.write(message, routeReuseStrategyTraceCategory);\n\t}\n\n\texport function styleError(message: string): void {\n\t\tTrace.write(message, Trace.categories.Style, Trace.messageType.error);\n\t}\n\n\texport function listViewLog(message: string): void {\n\t\tTrace.write(message, listViewTraceCategory);\n\t}\n\n\texport function listViewError(message: string): void {\n\t\tTrace.write(message, listViewTraceCategory, Trace.messageType.error);\n\t}\n\n\texport function bootstrapLog(message: string): void {\n\t\tTrace.write(message, bootstrapCategory);\n\t}\n\n\texport function bootstrapLogError(message: string): void {\n\t\tTrace.write(message, bootstrapCategory, Trace.messageType.error);\n\t}\n}\n","/* tslint:disable */\nimport { Type } from '@angular/core';\nimport { ɵDomAdapter, ɵsetRootDomAdapter } from '@angular/common';\nimport { NativeScriptDebug } from './trace';\n\nexport class NativeScriptDomAdapter implements ɵDomAdapter {\n\tstatic makeCurrent() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('Setting root DOM adapter...');\n\t\t}\n\n\t\tɵsetRootDomAdapter(new NativeScriptDomAdapter());\n\t}\n\n\thasProperty(_element: any, _name: string) {\n\t\t// TODO: actually check if the property exists.\n\t\treturn true;\n\t}\n\n\tlog(arg: any): void {\n\t\tconsole.log(arg);\n\t}\n\n\tlogError(arg: any): void {\n\t\tconsole.log(arg);\n\t}\n\n\tlogGroup(arg: any): void {\n\t\tconsole.log(arg);\n\t}\n\n\tlogGroupEnd(): void {}\n\n\tget attrToPropMap(): { [key: string]: string } {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tset attrToPropMap(_value: { [key: string]: string }) {\n\t\tthrow new Error('Not implemented!');\n\t}\n\n\tpublic resourceLoaderType: Type<any> = null;\n\tsetProperty(_el: Element, _name: string, _value: any): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetProperty(_el: Element, _name: string): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tinvoke(_el: Element, _methodName: string, _args: any[]): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\n\tcontains(_nodeA: any, _nodeB: any): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tparse(_templateHtml: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tquery(_selector: string): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tquerySelector(_el: any /** TODO #9100 */, _selector: string): HTMLElement {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tquerySelectorAll(_el: any /** TODO #9100 */, _selector: string): any[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\ton(_el: any /** TODO #9100 */, _evt: any /** TODO #9100 */, _listener: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tonAndCancel(_el: any /** TODO #9100 */, _evt: any /** TODO #9100 */, _listener: any /** TODO #9100 */): Function {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tdispatchEvent(_el: any /** TODO #9100 */, _evt: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateMouseEvent(_eventType: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateEvent(_eventType: string): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tpreventDefault(_evt: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisPrevented(_evt: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetInnerHTML(_el: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\n\tgetTemplateContent(_el: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetOuterHTML(_el: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tnodeName(_node: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tnodeValue(_node: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\ttype(_node: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcontent(_node: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tfirstChild(_el: any /** TODO #9100 */): Node {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tnextSibling(_el: any /** TODO #9100 */): Node {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tparentElement(_el: any /** TODO #9100 */): Node {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tchildNodes(_el: any /** TODO #9100 */): Node[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tchildNodesAsList(_el: any /** TODO #9100 */): Node[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tclearNodes(_el: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tappendChild(_el: any /** TODO #9100 */, _node: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremoveChild(_el: any /** TODO #9100 */, _node: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\treplaceChild(_el: any /** TODO #9100 */, _newNode: any /** TODO #9100 */, _oldNode: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremove(_el: any /** TODO #9100 */): Node {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tinsertBefore(_el: any /** TODO #9100 */, _node: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tinsertAllBefore(_el: any /** TODO #9100 */, _nodes: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tinsertAfter(_el: any /** TODO #9100 */, _node: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetInnerHTML(_el: any /** TODO #9100 */, _value: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetText(_el: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetText(_el: any /** TODO #9100 */, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetValue(_el: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetValue(_el: any /** TODO #9100 */, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetChecked(_el: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetChecked(_el: any /** TODO #9100 */, _value: boolean): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateComment(_text: string): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateTemplate(_html: any /** TODO #9100 */): HTMLElement {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateElement(_tagName: any /** TODO #9100 */, _doc?: any /** TODO #9100 */): HTMLElement {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateElementNS(_ns: string, _tagName: string, _doc?: any /** TODO #9100 */): Element {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateTextNode(_text: string, _doc?: any /** TODO #9100 */): Text {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateScriptTag(_attrName: string, _attrValue: string, _doc?: any /** TODO #9100 */): HTMLElement {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateStyleElement(_css: string, _doc?: any /** TODO #9100 */): HTMLStyleElement {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateShadowRoot(_el: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetShadowRoot(_el: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetHost(_el: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetDistributedNodes(_el: any /** TODO #9100 */): Node[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tclone /*<T extends Node>*/(_node: Node /*T*/): Node /*T*/ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetElementsByClassName(_element: any /** TODO #9100 */, _name: string): HTMLElement[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetElementsByTagName(_element: any /** TODO #9100 */, _name: string): HTMLElement[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tclassList(_element: any /** TODO #9100 */): any[] {\n\t\tthrow new Error('Not implemented!');\n\t}\n\taddClass(_element: any /** TODO #9100 */, _className: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremoveClass(_element: any /** TODO #9100 */, _className: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\thasClass(_element: any /** TODO #9100 */, _className: string): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetStyle(_element: any /** TODO #9100 */, _styleName: string, _styleValue: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremoveStyle(_element: any /** TODO #9100 */, _styleName: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetStyle(_element: any /** TODO #9100 */, _styleName: string): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\thasStyle(_element: any /** TODO #9100 */, _styleName: string, _styleValue?: string): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\ttagName(_element: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tattributeMap(_element: any /** TODO #9100 */): Map<string, string> {\n\t\tthrow new Error('Not implemented!');\n\t}\n\thasAttribute(_element: any /** TODO #9100 */, _attribute: string): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\thasAttributeNS(_element: any /** TODO #9100 */, _ns: string, _attribute: string): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetAttribute(_element: any /** TODO #9100 */, _attribute: string): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetAttributeNS(_element: any /** TODO #9100 */, _ns: string, _attribute: string): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetAttribute(_element: any /** TODO #9100 */, _name: string, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetAttributeNS(_element: any /** TODO #9100 */, _ns: string, _name: string, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremoveAttribute(_element: any /** TODO #9100 */, _attribute: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tremoveAttributeNS(_element: any /** TODO #9100 */, _ns: string, _attribute: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\ttemplateAwareRoot(_el: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tcreateHtmlDocument(): HTMLDocument {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tdefaultDoc(): HTMLDocument {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetDefaultDocument(): Document {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetBoundingClientRect(_el: any /** TODO #9100 */): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetTitle(): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetTitle(_doc: Document, _newTitle: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\telementMatches(_n: any /** TODO #9100 */, _selector: string): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisTemplateElement(_el: any): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisTextNode(_node: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisCommentNode(_node: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisElementNode(_node: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\thasShadowRoot(_node: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tisShadowRoot(_node: any /** TODO #9100 */): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\timportIntoDoc /*<T extends Node>*/(_node: Node /*T*/): Node /*T*/ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tadoptNode /*<T extends Node>*/(_node: Node /*T*/): Node /*T*/ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetHref(_element: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetEventKey(_event: any /** TODO #9100 */): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tresolveAndSetHref(_element: any /** TODO #9100 */, _baseUrl: string, _href: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsupportsDOMEvents(): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsupportsNativeShadowDOM(): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetGlobalEventTarget(_doc: Document, _target: string): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetHistory(): History {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetLocation(): Location {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetBaseHref(): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tresetBaseElement(): void {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetUserAgent(): string {\n\t\treturn 'Fake user agent';\n\t}\n\tsetData(_element: any /** TODO #9100 */, _name: string, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetComputedStyle(_element: any /** TODO #9100 */): any {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetData(_element: any /** TODO #9100 */, _name: string): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetGlobalVar(_name: string, _value: any): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsupportsWebAnimation(): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tperformanceNow(): number {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetAnimationPrefix(): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tgetTransitionEnd(): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsupportsAnimation(): boolean {\n\t\tthrow new Error('Not implemented!');\n\t}\n\n\tsupportsCookies(): boolean {\n\t\treturn false;\n\t}\n\tgetCookie(_name: string): string {\n\t\tthrow new Error('Not implemented!');\n\t}\n\tsetCookie(_name: string, _value: string): any /** TODO #9100 */ {\n\t\tthrow new Error('Not implemented!');\n\t}\n}\n\nNativeScriptDomAdapter.makeCurrent();\n","if (!console.group) {\n\tconsole.group = () => {};\n}\n\nif (!console.groupEnd) {\n\tconsole.groupEnd = () => {};\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { InjectionToken, Injectable, OnDestroy } from '@angular/core';\n\nimport { Frame, View, Page, IDevice, Device } from '@nativescript/core';\n\nexport const APP_ROOT_VIEW = new InjectionToken<View>('NativeScriptAppRootView');\nexport const DeviceToken = new InjectionToken<IDevice>('NativeScriptPlatformDeviceToken');\n\nexport type PageFactory = (options: PageFactoryOptions) => Page;\nexport interface PageFactoryOptions {\n\tisBootstrap?: boolean;\n\tisLivesync?: boolean;\n\tisModal?: boolean;\n\tisNavigation?: boolean;\n\tcomponentType?: any;\n}\nexport const PAGE_FACTORY = new InjectionToken<PageFactory>('NativeScriptPageFactory');\nexport const defaultPageFactory: PageFactory = function (_opts: PageFactoryOptions) {\n\treturn new Page();\n};\nexport const defaultPageFactoryProvider = { provide: PAGE_FACTORY, useValue: defaultPageFactory };\n\nlet _rootPageRef: WeakRef<Page>;\n\nexport function setRootPage(page: Page): void {\n\t_rootPageRef = new WeakRef(page);\n}\n\nexport function getRootPage(): Page {\n\treturn _rootPageRef && _rootPageRef.get();\n}\n\n// Use an exported function to make the AoT compiler happy.\nexport function getDefaultPage(): Page {\n\tconst rootPage = getRootPage();\n\tif (rootPage instanceof Page) {\n\t\treturn rootPage;\n\t}\n\t// if (rootPage) {\n\t// \treturn rootPage;\n\t// }\n\n\tconst frame = Frame.topmost();\n\tif (frame && frame.currentPage) {\n\t\treturn frame.currentPage;\n\t}\n\n\treturn null;\n}\n\nexport const defaultPageProvider = { provide: Page, useFactory: getDefaultPage };\n\n// Use an exported function to make the AoT compiler happy.\nexport function getDefaultFrame(): Frame {\n\treturn Frame.topmost();\n}\n\nexport const defaultFrameProvider = { provide: Frame, useFactory: getDefaultFrame };\n\n// Use an exported function to make the AoT compiler happy.\nexport function getDefaultDevice(): IDevice {\n\treturn Device;\n}\n\nexport const defaultDeviceProvider = { provide: DeviceToken, useFactory: getDefaultDevice };\n","import { Application, TextView, Color, View, Frame, GridLayout, LaunchEventData, ApplicationEventData, profile, profilingUptime, Page, LayoutBase } from '@nativescript/core';\n// import './dom-adapter';\n// import 'nativescript-intl';\n\nimport { Type, Injector, CompilerOptions, PlatformRef, NgModuleFactory, NgModuleRef, EventEmitter, Sanitizer, InjectionToken, StaticProvider } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\nimport { NativeScriptDebug } from './trace';\nimport { defaultPageFactoryProvider, setRootPage, PageFactory, PAGE_FACTORY, getRootPage } from './platform-providers';\nimport { AppHostView, AppHostAsyncView } from './app-host-view';\n\nexport const onBeforeLivesync = new EventEmitter<NgModuleRef<any>>();\nexport const onAfterLivesync = new EventEmitter<{\n\tmoduleRef?: NgModuleRef<any>;\n\terror?: Error;\n}>();\nlet lastBootstrappedModule: WeakRef<NgModuleRef<any>>;\ntype BootstrapperAction = () => Promise<NgModuleRef<any>>;\n\n// Work around a TS bug requiring an import of OpaqueToken without using it\n// if ((<any>global).___TS_UNUSED) {\n//     (() => {\n//         return InjectionToken;\n//     })();\n// }\n\n// tslint:disable:max-line-length\n/**\n * Options to be passed when HMR is enabled\n */\nexport interface HmrOptions {\n\t/**\n\t * A factory function that returns either Module type or NgModuleFactory type.\n\t * This needs to be a factory function as the types will change when modules are replaced.\n\t */\n\tmoduleTypeFactory?: () => Type<any> | NgModuleFactory<any>;\n\n\t/**\n\t * A livesync callback that will be called instead of the original livesync.\n\t * It gives the HMR a hook to apply the module replacement.\n\t * @param bootstrapPlatform - A bootstrap callback to be called after HMR is done. It will bootstrap a new angular app within the exisiting platform, using the moduleTypeFactory to get the Module or NgModuleFactory to be used.\n\t */\n\tlivesyncCallback: (bootstrapPlatform: () => void) => void;\n}\n// tslint:enable:max-line-length\n\nexport interface AppLaunchView extends LayoutBase {\n\t// called when the animation is to begin\n\tstartAnimation?: () => void;\n\t// called when bootstrap is complete and cleanup can begin\n\t// should resolve when animation is completely finished\n\tcleanup?: () => Promise<any>;\n}\n\nexport interface AppOptions {\n\tbootInExistingPage?: boolean;\n\tcssFile?: string;\n\tstartPageActionBarHidden?: boolean;\n\thmrOptions?: HmrOptions;\n\t/**\n\t * Background color of the root view\n\t */\n\tbackgroundColor?: string;\n\t/**\n\t * Use animated launch view (async by default)\n\t */\n\tlaunchView?: AppLaunchView;\n\t/**\n\t * When using Async APP_INITIALIZER, set this to `true`.\n\t * (Not needed when using launchView)\n\t */\n\tasync?: boolean;\n}\n\nexport type PlatformFactory = (extraProviders?: StaticProvider[]) => PlatformRef;\n\nexport class NativeScriptSanitizer extends Sanitizer {\n\tsanitize(_context: any, value: string): string {\n\t\treturn value;\n\t}\n}\n\nexport class NativeScriptDocument {\n\t// Required by the AnimationDriver\n\tpublic body: any = {\n\t\tisOverride: true,\n\t};\n\n\tcreateElement(tag: string) {\n\t\tthrow new Error('NativeScriptDocument is not DOM Document. There is no createElement() method.');\n\t}\n}\n\nexport const COMMON_PROVIDERS = [defaultPageFactoryProvider, { provide: Sanitizer, useClass: NativeScriptSanitizer, deps: [] }, { provide: DOCUMENT, useClass: NativeScriptDocument, deps: [] }];\n\nexport class NativeScriptPlatformRef extends PlatformRef {\n\tprivate _bootstrapper: BootstrapperAction;\n\n\tconstructor(private platform: PlatformRef, private appOptions: AppOptions = {}) {\n\t\tsuper();\n\t}\n\n\t@profile\n\tbootstrapModuleFactory<M>(moduleFactory: NgModuleFactory<M>): Promise<NgModuleRef<M>> {\n\t\tthis._bootstrapper = () => {\n\t\t\tlet bootstrapFactory = moduleFactory;\n\t\t\tif (this.appOptions.hmrOptions) {\n\t\t\t\tbootstrapFactory = <NgModuleFactory<M>>this.appOptions.hmrOptions.moduleTypeFactory();\n\t\t\t}\n\n\t\t\treturn this.platform.bootstrapModuleFactory(bootstrapFactory);\n\t\t};\n\n\t\tthis.bootstrapApp();\n\n\t\treturn null; // Make the compiler happy\n\t}\n\n\t@profile\n\tbootstrapModule<M>(moduleType: Type<M>, compilerOptions: CompilerOptions | CompilerOptions[] = []): Promise<NgModuleRef<M>> {\n\t\tthis._bootstrapper = () => {\n\t\t\tlet bootstrapType = moduleType;\n\t\t\tif (this.appOptions.hmrOptions) {\n\t\t\t\tbootstrapType = <Type<M>>this.appOptions.hmrOptions.moduleTypeFactory();\n\t\t\t}\n\n\t\t\treturn this.platform.bootstrapModule(bootstrapType, compilerOptions);\n\t\t};\n\t\tthis.bootstrapApp();\n\n\t\treturn null; // Make the compiler happy\n\t}\n\n\t@profile\n\tprivate bootstrapApp() {\n\t\t(<any>global).__onLiveSyncCore = () => {\n\t\t\tif (this.appOptions.hmrOptions) {\n\t\t\t\tconst rootView = Application.getRootView();\n\t\t\t\tif (rootView) {\n\t\t\t\t\trootView._closeAllModalViewsInternal();\n\t\t\t\t}\n\n\t\t\t\tthis.appOptions.hmrOptions.livesyncCallback(() => this._livesync());\n\t\t\t} else {\n\t\t\t\tthis._livesync();\n\t\t\t}\n\t\t};\n\n\t\tif (this.appOptions && typeof this.appOptions.cssFile === 'string') {\n\t\t\tApplication.setCssFileName(this.appOptions.cssFile);\n\t\t}\n\n\t\tthis.bootstrapNativeScriptApp();\n\t}\n\n\tonDestroy(callback: () => void): void {\n\t\tthis.platform.onDestroy(callback);\n\t}\n\n\tget injector(): Injector {\n\t\treturn this.platform.injector;\n\t}\n\n\tdestroy(): void {\n\t\tthis.platform.destroy();\n\t}\n\n\tget destroyed(): boolean {\n\t\treturn this.platform.destroyed;\n\t}\n\n\t@profile\n\tprivate bootstrapNativeScriptApp() {\n\t\tlet rootContent: View;\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.bootstrapLog('NativeScriptPlatform bootstrap started.');\n\t\t}\n\t\tconst launchCallback = profile('@nativescript/angular/platform-common.launchCallback', (args: LaunchEventData) => {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.bootstrapLog('Application launch event fired');\n\t\t\t}\n\n\t\t\t// Create a temp page for root of the renderer\n\t\t\tlet tempAppHostView: AppHostView;\n\t\t\tlet tempAppHostAsyncView: AppHostAsyncView;\n\t\t\tif (this.appOptions && (this.appOptions.async || this.appOptions.launchView)) {\n\t\t\t\ttempAppHostAsyncView = new AppHostAsyncView(new Color(this.appOptions && this.appOptions.backgroundColor ? this.appOptions.backgroundColor : '#fff'));\n\t\t\t\tif (this.appOptions.launchView) {\n\t\t\t\t\tthis.appOptions.launchView.style.zIndex = 1000;\n\t\t\t\t\ttempAppHostAsyncView.addChild(this.appOptions.launchView);\n\t\t\t\t}\n\t\t\t\trootContent = tempAppHostAsyncView.ngAppRoot;\n\t\t\t\tsetRootPage(<any>tempAppHostAsyncView);\n\t\t\t} else {\n\t\t\t\ttempAppHostView = new AppHostView(new Color(this.appOptions && this.appOptions.backgroundColor ? this.appOptions.backgroundColor : '#fff'));\n\t\t\t\tsetRootPage(<any>tempAppHostView);\n\t\t\t}\n\n\t\t\tlet bootstrapPromiseCompleted = false;\n\t\t\tconst bootstrap = () => {\n\t\t\t\tthis._bootstrapper().then(\n\t\t\t\t\t(moduleRef) => {\n\t\t\t\t\t\tbootstrapPromiseCompleted = true;\n\t\t\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\t\t\tNativeScriptDebug.bootstrapLog(`Angular bootstrap bootstrap done. uptime: ${profilingUptime()}`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.appOptions.launchView && this.appOptions.launchView.cleanup) {\n\t\t\t\t\t\t\tthis.appOptions.launchView.cleanup().then(() => {\n\t\t\t\t\t\t\t\t// cleanup any custom launch views\n\t\t\t\t\t\t\t\ttempAppHostAsyncView.removeChild(this.appOptions.launchView);\n\t\t\t\t\t\t\t\tthis.appOptions.launchView = null;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (tempAppHostView) {\n\t\t\t\t\t\t\trootContent = tempAppHostView.content;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlastBootstrappedModule = new WeakRef(moduleRef);\n\t\t\t\t\t},\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tbootstrapPromiseCompleted = true;\n\t\t\t\t\t\tconst errorMessage = err.message + '\\n\\n' + err.stack;\n\t\t\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\t\t\tNativeScriptDebug.bootstrapLogError('ERROR BOOTSTRAPPING ANGULAR');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\t\t\tNativeScriptDebug.bootstrapLogError(errorMessage);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trootContent = this.createErrorUI(errorMessage);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.bootstrapLog('bootstrapAction called, draining micro tasks queue. Root: ' + rootContent);\n\t\t\t\t}\n\t\t\t\t(<any>global).Zone.drainMicroTaskQueue();\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.bootstrapLog('bootstrapAction called, draining micro tasks queue finished! Root: ' + rootContent);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.appOptions && this.appOptions.launchView && this.appOptions.launchView.startAnimation) {\n\t\t\t\t// start animations on next tick (after initial boot)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// ensure launch animation is executed after launchView added to view stack\n\t\t\t\t\tthis.appOptions.launchView.startAnimation();\n\t\t\t\t});\n\t\t\t}\n\t\t\tbootstrap();\n\t\t\t// if (!bootstrapPromiseCompleted) {\n\t\t\t// \tconst errorMessage = \"Bootstrap promise didn't resolve\";\n\t\t\t// \tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t// \t\tNativeScriptDebug.bootstrapLogError(errorMessage);\n\t\t\t// \t}\n\t\t\t// \trootContent = this.createErrorUI(errorMessage);\n\t\t\t// }\n\t\t\targs.root = rootContent;\n\t\t});\n\t\tconst exitCallback = profile('@nativescript/angular/platform-common.exitCallback', (args: ApplicationEventData) => {\n\t\t\tconst androidActivity = args.android;\n\t\t\tif (androidActivity && !androidActivity.isFinishing()) {\n\t\t\t\t// Exit event was triggered as a part of a restart of the app.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lastModuleRef = lastBootstrappedModule ? lastBootstrappedModule.get() : null;\n\t\t\tif (lastModuleRef) {\n\t\t\t\t// Make sure the module is only destroyed once\n\t\t\t\tlastBootstrappedModule = null;\n\n\t\t\t\tlastModuleRef.destroy();\n\t\t\t}\n\n\t\t\trootContent = null;\n\t\t});\n\n\t\tApplication.on(Application.launchEvent, launchCallback);\n\t\tApplication.on(Application.exitEvent, exitCallback);\n\n\t\tApplication.run();\n\t}\n\n\t@profile\n\tpublic _livesync() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.bootstrapLog('Angular livesync started.');\n\t\t}\n\n\t\tconst lastModuleRef = lastBootstrappedModule ? lastBootstrappedModule.get() : null;\n\t\tonBeforeLivesync.next(lastModuleRef);\n\t\tif (lastModuleRef) {\n\t\t\tlastModuleRef.destroy();\n\t\t}\n\n\t\tthis._bootstrapper().then(\n\t\t\t(moduleRef) => {\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.bootstrapLog('Angular livesync done.');\n\t\t\t\t}\n\t\t\t\tonAfterLivesync.next({ moduleRef });\n\n\t\t\t\tlastBootstrappedModule = new WeakRef(moduleRef);\n\t\t\t\tApplication.resetRootView({\n\t\t\t\t\tcreate: () => (getRootPage() instanceof AppHostView ? ((<any>getRootPage()) as AppHostView).ngAppRoot : getRootPage()),\n\t\t\t\t});\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.bootstrapLogError('ERROR LIVESYNC BOOTSTRAPPING ANGULAR');\n\t\t\t\t}\n\t\t\t\tconst errorMessage = error.message + '\\n\\n' + error.stack;\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.bootstrapLogError(errorMessage);\n\t\t\t\t}\n\n\t\t\t\tApplication.resetRootView({\n\t\t\t\t\tcreate: () => this.createErrorUI(errorMessage),\n\t\t\t\t});\n\t\t\t\tonAfterLivesync.next({ error });\n\t\t\t}\n\t\t);\n\t}\n\n\tprivate createErrorUI(message: string): View {\n\t\tconst errorTextBox = new TextView();\n\t\terrorTextBox.text = message;\n\t\terrorTextBox.color = new Color('red');\n\t\treturn errorTextBox;\n\t}\n\n\tprivate createFrameAndPage(isLivesync: boolean) {\n\t\tconst frame = new Frame();\n\t\tconst pageFactory: PageFactory = this.platform.injector.get(PAGE_FACTORY);\n\t\tconst page = pageFactory({ isBootstrap: true, isLivesync });\n\n\t\tframe.navigate({\n\t\t\tcreate: () => {\n\t\t\t\treturn page;\n\t\t\t},\n\t\t});\n\t\treturn { page, frame };\n\t}\n}\n","import { ContentView, View, ProxyViewContainer, GridLayout, Color } from '@nativescript/core';\n\nexport class AppHostView extends ContentView {\n\tprivate _ngAppRoot: View;\n\tprivate _content: View;\n\n\tconstructor(backgroundColor: Color) {\n\t\tsuper();\n\t\tthis.backgroundColor = backgroundColor;\n\t}\n\n\tget ngAppRoot(): View {\n\t\treturn this._ngAppRoot;\n\t}\n\n\tset ngAppRoot(value: View) {\n\t\tthis._ngAppRoot = value;\n\t}\n\n  // @ts-ignore\n\tget content(): View {\n\t\treturn this._content;\n\t}\n\n\tset content(value: View) {\n\t\tif (this._content) {\n\t\t\tthis._content.parentNode = undefined;\n\t\t}\n\n\t\tthis._content = value;\n\n\t\tif (value) {\n\t\t\tthis._content.parentNode = <any>this;\n\t\t}\n\n\t\tthis.ngAppRoot = value;\n\n\t\tif (this._content instanceof ProxyViewContainer) {\n\t\t\tconst grid = new GridLayout();\n\t\t\tgrid.backgroundColor = this.backgroundColor;\n\t\t\tgrid.addChild(this._content);\n\t\t\tthis.ngAppRoot = grid;\n\t\t}\n\t}\n}\n\nexport class AppHostAsyncView extends GridLayout {\n\tconstructor(backgroundColor: Color) {\n\t\tsuper();\n\t\tthis.backgroundColor = backgroundColor;\n\t}\n\n\tget ngAppRoot(): View {\n\t\treturn this;\n\t}\n\n\tset ngAppRoot(value: View) {\n\t\t// ignored\n\t}\n}\n","import { PlatformRef, platformCore, createPlatformFactory } from '@angular/core';\n\nimport { NativeScriptPlatformRef, AppOptions, PlatformFactory, COMMON_PROVIDERS } from './platform-common';\n\n// \"Static\" platform\nconst _platformNativeScript: PlatformFactory = createPlatformFactory(platformCore, 'nativeScript', [...COMMON_PROVIDERS]);\n\nexport function platformNativeScriptDynamic(options?: AppOptions, extraProviders?: any[]): PlatformRef {\n\t// Return raw platform to advanced users only if explicitly requested\n\tif (options && options.bootInExistingPage === true) {\n\t\treturn _platformNativeScript(extraProviders);\n\t} else {\n\t\treturn new NativeScriptPlatformRef(_platformNativeScript(extraProviders), options);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { knownFolders, Folder, File } from '@nativescript/core';\n\n// Allows greater flexibility with `file-system` and Angular\n// Also provides a way for `file-system` to be mocked for testing\n\n@Injectable()\nexport class NSFileSystem {\n\tpublic currentApp(): Folder {\n\t\treturn knownFolders.currentApp();\n\t}\n\n\tpublic fileFromPath(path: string): File {\n\t\treturn File.fromPath(path);\n\t}\n\n\tpublic fileExists(path: string): boolean {\n\t\treturn File.exists(path);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { ResourceLoader } from '@angular/compiler';\nimport { path } from '@nativescript/core';\n\nimport { NSFileSystem } from './file-system/ns-file-system';\n\nconst sourceExtensionsMap = {\n\t'.scss': '.css',\n\t'.sass': '.css',\n\t'.less': '.css',\n};\n\n@Injectable()\nexport class FileSystemResourceLoader extends ResourceLoader {\n\tconstructor(private fs: NSFileSystem) {\n\t\tsuper();\n\t}\n\n\tget(url: string): string {\n\t\tconst resolvedPath = this.resolve(url);\n\n\t\tconst templateFile = this.fs.fileFromPath(resolvedPath);\n\n\t\treturn templateFile.readTextSync();\n\t}\n\n\tresolve(url: string): string {\n\t\tconst normalizedSourceUrl = this.resolveRelativeUrls(url);\n\t\tconst normalizedCompiledFileUrl = normalizedSourceUrl.replace(/\\.\\w+$/, (ext) => sourceExtensionsMap[ext] || ext);\n\t\tif (normalizedCompiledFileUrl !== normalizedSourceUrl && this.fs.fileExists(normalizedCompiledFileUrl)) {\n\t\t\treturn normalizedCompiledFileUrl;\n\t\t}\n\t\tif (this.fs.fileExists(normalizedSourceUrl)) {\n\t\t\treturn normalizedSourceUrl;\n\t\t}\n\n\t\tif (normalizedCompiledFileUrl === normalizedSourceUrl) {\n\t\t\tthrow new Error(`Could not resolve ${url}. Looked for: ${normalizedSourceUrl}.`);\n\t\t} else {\n\t\t\tthrow new Error(`Could not resolve ${url}.` + `Looked for: ${normalizedCompiledFileUrl}, ${normalizedSourceUrl}.`);\n\t\t}\n\t}\n\n\tprivate resolveRelativeUrls(url: string): string {\n\t\t// Angular assembles absolute URLs and prefixes them with //\n\t\tif (url.indexOf('/') !== 0) {\n\t\t\t// Resolve relative URLs based on the app root.\n\t\t\treturn path.join(this.fs.currentApp().path, url);\n\t\t} else {\n\t\t\treturn url;\n\t\t}\n\t}\n}\n","export function isPresent(obj: any): boolean {\n\treturn obj !== undefined && obj !== null;\n}\n\nexport function isBlank(obj: any): boolean {\n\treturn obj === undefined || obj === null;\n}\n","import { Injectable } from '@angular/core';\nimport { Frame } from '@nativescript/core';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class FrameService {\n\t// TODO: Add any methods that are needed to handle frame/page navigation\n\tgetFrame(): Frame {\n\t\tlet topmostFrame = Frame.topmost();\n\t\treturn topmostFrame;\n\t}\n}\n","import { Frame, NavigationTransition } from '@nativescript/core';\nimport { DefaultUrlSerializer, UrlSegmentGroup, UrlTree, ActivatedRouteSnapshot, Params } from '@angular/router';\n\nexport interface LocationState {\n\tqueryParams: Params;\n\tsegmentGroup: UrlSegmentGroup;\n\tisRootSegmentGroup: boolean;\n\tisPageNavigation: boolean;\n\tframe?: Frame;\n}\n\nexport interface NavigationOptions {\n\tclearHistory?: boolean;\n\tanimated?: boolean;\n\ttransition?: NavigationTransition;\n}\n\nexport class Outlet {\n\tshowingModal: boolean;\n\tmodalNavigationDepth: number;\n\tparent: Outlet;\n\tisPageNavigationBack: boolean;\n\n\t// More than one key available when using NSEmptyOutletComponent component\n\t// in module that lazy loads children (loadChildren) and has outlet name.\n\toutletKeys: Array<string>;\n\n\t// More than one frame available when using NSEmptyOutletComponent component\n\t// in module that lazy loads children (loadChildren) and has outlet name.\n\tframes: Array<Frame> = [];\n\t// The url path to the Outlet.\n\t// E.G: the path to Outlet3 that is nested Outlet1(home)->Outlet2(nested1)->Outlet3(nested2)\n\t// will be 'home/nested1'\n\tpath: string;\n\tpathByOutlets: string;\n\tstates: Array<LocationState> = [];\n\tisNSEmptyOutlet: boolean;\n\n\t// Used in reuse-strategy by its children to determine if they should be detached too.\n\tshouldDetach: boolean = true;\n\tconstructor(outletKey: string, path: string, pathByOutlets: string, modalNavigationDepth?: number) {\n\t\tthis.outletKeys = [outletKey];\n\t\tthis.isPageNavigationBack = false;\n\t\tthis.showingModal = false;\n\t\tthis.modalNavigationDepth = modalNavigationDepth || 0;\n\t\tthis.pathByOutlets = pathByOutlets;\n\t\tthis.path = path;\n\t}\n\n\tcontainsFrame(frame: Frame): boolean {\n\t\treturn this.frames.indexOf(frame) > -1;\n\t}\n\n\tpeekState(): LocationState {\n\t\tif (this.states.length > 0) {\n\t\t\treturn this.states[this.states.length - 1];\n\t\t}\n\t\treturn null;\n\t}\n\n\tcontainsTopState(stateUrl: string): boolean {\n\t\tconst lastState = this.peekState();\n\t\treturn lastState && lastState.segmentGroup.toString() === stateUrl;\n\t}\n\n\t// Search for frame that can go back.\n\t// Nested 'primary' outlets could result in Outlet with multiple navigatable frames.\n\tgetFrameToBack(): Frame {\n\t\tlet frame = this.frames[this.frames.length - 1];\n\n\t\tif (!this.isNSEmptyOutlet) {\n\t\t\tfor (let index = this.frames.length - 1; index >= 0; index--) {\n\t\t\t\tconst currentFrame = this.frames[index];\n\t\t\t\tif (currentFrame.canGoBack()) {\n\t\t\t\t\tframe = currentFrame;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn frame;\n\t}\n}\n\nexport const defaultNavOptions: NavigationOptions = {\n\tclearHistory: false,\n\tanimated: true,\n};\n","import { Injectable } from '@angular/core';\nimport { LocationStrategy } from '@angular/common';\nimport { DefaultUrlSerializer, UrlSegmentGroup, UrlTree, ActivatedRouteSnapshot, Params } from '@angular/router';\nimport { Frame } from '@nativescript/core';\nimport { NativeScriptDebug } from '../trace';\nimport { isPresent } from '../lang-facade';\nimport { FrameService } from '../frame.service';\nimport { Outlet, NavigationOptions, LocationState, defaultNavOptions } from './ns-location-utils';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class NSLocationStrategy extends LocationStrategy {\n\tprivate outlets: Array<Outlet> = [];\n\tprivate currentOutlet: Outlet;\n\n\tprivate popStateCallbacks = new Array<(_: any) => any>();\n\tprivate _currentNavigationOptions: NavigationOptions;\n\tprivate currentUrlTree: UrlTree;\n\n\tpublic _modalNavigationDepth = 0;\n\n\tconstructor(private frameService: FrameService) {\n\t\tsuper();\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.constructor()');\n\t\t}\n\t}\n\n\tpath(): string {\n\t\tif (!this.currentUrlTree) {\n\t\t\treturn '/';\n\t\t}\n\n\t\tconst state = this.currentOutlet && this.currentOutlet.peekState();\n\t\tif (!state) {\n\t\t\treturn '/';\n\t\t}\n\n\t\tlet tree = this.currentUrlTree;\n\t\tlet changedOutlet = this.getSegmentGroupByOutlet(this.currentOutlet);\n\n\t\t// Handle case where the user declares a component at path \"/\".\n\t\t// The url serializer doesn't parse this url as having a primary outlet.\n\t\tif (state.isRootSegmentGroup) {\n\t\t\ttree.root = state.segmentGroup;\n\t\t} else if (changedOutlet) {\n\t\t\tthis.updateSegmentGroup(tree.root, changedOutlet, state.segmentGroup);\n\t\t}\n\n\t\tconst urlSerializer = new DefaultUrlSerializer();\n\t\ttree.queryParams = state.queryParams;\n\t\tconst url = urlSerializer.serialize(tree);\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.path(): ' + url);\n\t\t}\n\t\treturn url;\n\t}\n\n\tprepareExternalUrl(internal: string): string {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.prepareExternalUrl() internal: ' + internal);\n\t\t}\n\t\treturn internal;\n\t}\n\n\tpushState(state: any, title: string, url: string, queryParams: string): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.pushState state: ' + `${state}, title: ${title}, url: ${url}, queryParams: ${queryParams}`);\n\t\t}\n\t\tthis.pushStateInternal(state, title, url, queryParams);\n\t}\n\n\tpushStateInternal(state: any, title: string, url: string, queryParams: string): void {\n\t\tconst urlSerializer = new DefaultUrlSerializer();\n\t\tthis.currentUrlTree = urlSerializer.parse(url);\n\t\tconst urlTreeRoot = this.currentUrlTree.root;\n\n\t\t// Handle case where the user declares a component at path \"/\".\n\t\t// The url serializer doesn't parse this url as having a primary outlet.\n\t\tif (!Object.keys(urlTreeRoot.children).length) {\n\t\t\tconst segmentGroup = this.currentUrlTree && this.currentUrlTree.root;\n\t\t\tconst outletKey = this.getOutletKey(this.getSegmentGroupFullPath(segmentGroup), 'primary');\n\t\t\tconst outlet = this.findOutlet(outletKey);\n\n\t\t\tif (outlet && this.updateStates(outlet, segmentGroup, this.currentUrlTree.queryParams)) {\n\t\t\t\tthis.currentOutlet = outlet; // If states updated\n\t\t\t} else if (!outlet) {\n\t\t\t\t// tslint:disable-next-line:max-line-length\n\t\t\t\tconst rootOutlet = this.createOutlet('primary', null, segmentGroup, null, null, this.currentUrlTree.queryParams);\n\t\t\t\tthis.currentOutlet = rootOutlet;\n\t\t\t}\n\n\t\t\tthis.currentOutlet.peekState().isRootSegmentGroup = true;\n\t\t\treturn;\n\t\t}\n\n\t\tconst queue = [];\n\t\tlet currentTree = <any>urlTreeRoot;\n\n\t\twhile (currentTree) {\n\t\t\tObject.keys(currentTree.children).forEach((outletName) => {\n\t\t\t\tconst currentSegmentGroup = currentTree.children[outletName];\n\t\t\t\tcurrentSegmentGroup.outlet = outletName;\n\t\t\t\tcurrentSegmentGroup.root = urlTreeRoot;\n\n\t\t\t\tconst outletPath = this.getSegmentGroupFullPath(currentTree);\n\t\t\t\tlet outletKey = this.getOutletKey(outletPath, outletName);\n\t\t\t\tlet outlet = this.findOutlet(outletKey);\n\n\t\t\t\tconst parentOutletName = currentTree.outlet || '';\n\t\t\t\tconst parentOutletPath = this.getSegmentGroupFullPath(currentTree.parent);\n\t\t\t\tconst parentOutletKey = this.getOutletKey(parentOutletPath, parentOutletName);\n\t\t\t\tconst parentOutlet = this.findOutlet(parentOutletKey);\n\n\t\t\t\tconst containsLastState = outlet && outlet.containsTopState(currentSegmentGroup.toString());\n\t\t\t\tif (!outlet) {\n\t\t\t\t\t// tslint:disable-next-line:max-line-length\n\t\t\t\t\toutlet = this.createOutlet(outletKey, outletPath, currentSegmentGroup, parentOutlet, this._modalNavigationDepth, this.currentUrlTree.queryParams);\n\t\t\t\t\tthis.currentOutlet = outlet;\n\t\t\t\t} else if (this._modalNavigationDepth > 0 && outlet.showingModal && !containsLastState) {\n\t\t\t\t\t// Navigation inside modal view.\n\t\t\t\t\tthis.upsertModalOutlet(outlet, currentSegmentGroup, this.currentUrlTree.queryParams);\n\t\t\t\t} else {\n\t\t\t\t\toutlet.parent = parentOutlet;\n\n\t\t\t\t\tif (this.updateStates(outlet, currentSegmentGroup, this.currentUrlTree.queryParams)) {\n\t\t\t\t\t\tthis.currentOutlet = outlet; // If states updated\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tqueue.push(currentSegmentGroup);\n\t\t\t});\n\n\t\t\tcurrentTree = queue.shift();\n\t\t}\n\t}\n\n\treplaceState(state: any, title: string, url: string, queryParams: string): void {\n\t\tconst states = this.currentOutlet && this.currentOutlet.states;\n\n\t\tif (states && states.length > 0) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.replaceState changing existing state: ' + `${state}, title: ${title}, url: ${url}, queryParams: ${queryParams}`);\n\t\t\t}\n\t\t} else {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.replaceState pushing new state: ' + `${state}, title: ${title}, url: ${url}, queryParams: ${queryParams}`);\n\t\t\t}\n\t\t\tthis.pushStateInternal(state, title, url, queryParams);\n\t\t}\n\t}\n\n\tforward(): void {\n\t\tthrow new Error('NSLocationStrategy.forward() - not implemented');\n\t}\n\n\tback(outlet?: Outlet, frame?: Frame): void {\n\t\tthis.currentOutlet = outlet || this.currentOutlet;\n\n\t\tif (this.currentOutlet.isPageNavigationBack) {\n\t\t\tconst states = this.currentOutlet.states;\n\t\t\t// We are navigating to the previous page\n\t\t\t// clear the stack until we get to a page navigation state\n\t\t\tlet state = states.pop();\n\t\t\tlet count = 1;\n\n\t\t\tif (frame) {\n\t\t\t\twhile (state.frame && state.frame !== frame) {\n\t\t\t\t\tstate = states.pop();\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (!state.isPageNavigation) {\n\t\t\t\tstate = states.pop();\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog(`NSLocationStrategy.back() while navigating back. States popped: ${count}`);\n\t\t\t}\n\t\t\tthis.callPopState(state, true);\n\t\t} else {\n\t\t\tlet state = this.currentOutlet.peekState();\n\t\t\tif (state && state.isPageNavigation) {\n\t\t\t\t// This was a page navigation - so navigate through frame.\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.back() while not navigating back but top' + ' state is page - will call frame.goBack()');\n\t\t\t\t}\n\n\t\t\t\tif (!outlet) {\n\t\t\t\t\tconst topmostFrame = this.frameService.getFrame();\n\t\t\t\t\tthis.currentOutlet = this.getOutletByFrame(topmostFrame) || this.currentOutlet;\n\t\t\t\t}\n\n\t\t\t\tconst frameToBack: Frame = this.currentOutlet.getFrameToBack();\n\t\t\t\tif (frameToBack) {\n\t\t\t\t\tframeToBack.goBack();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Nested navigation - just pop the state\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.back() while not navigating back but top' + ' state is not page - just pop');\n\t\t\t\t}\n\n\t\t\t\tthis.callPopState(this.currentOutlet.states.pop(), true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcanGoBack(outlet?: Outlet) {\n\t\toutlet = outlet || this.currentOutlet;\n\t\treturn outlet.states.length > 1;\n\t}\n\n\tonPopState(fn: (_: any) => any): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.onPopState');\n\t\t}\n\t\tthis.popStateCallbacks.push(fn);\n\t}\n\n\tgetBaseHref(): string {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.getBaseHref()');\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate callPopState(state: LocationState, pop: boolean = true, outlet?: Outlet) {\n\t\toutlet = outlet || this.currentOutlet;\n\t\tconst urlSerializer = new DefaultUrlSerializer();\n\t\tlet changedOutlet = this.getSegmentGroupByOutlet(outlet);\n\n\t\tif (state && changedOutlet) {\n\t\t\tthis.updateSegmentGroup(this.currentUrlTree.root, changedOutlet, state.segmentGroup);\n\t\t} else if (changedOutlet) {\n\t\t\t// when closing modal view there are scenarios (e.g. root viewContainerRef) when we need\n\t\t\t// to clean up the named page router outlet to make sure we will open the modal properly again if needed.\n\t\t\tthis.updateSegmentGroup(this.currentUrlTree.root, changedOutlet, null);\n\t\t}\n\n\t\tconst url = urlSerializer.serialize(this.currentUrlTree);\n\t\tconst change = { url: url, pop: pop };\n\t\tfor (let fn of this.popStateCallbacks) {\n\t\t\tfn(change);\n\t\t}\n\t}\n\n\tpublic toString() {\n\t\tlet result = [];\n\n\t\tthis.outlets.forEach((outlet) => {\n\t\t\tconst outletStates = outlet.states;\n\t\t\tconst outletLog = outletStates\n\t\t\t\t// tslint:disable-next-line:max-line-length\n\t\t\t\t.map((v, i) => `${outlet.outletKeys}.${i}.[${v.isPageNavigation ? 'PAGE' : 'INTERNAL'}].[${outlet.modalNavigationDepth ? 'MODAL' : 'BASE'}] \"${v.segmentGroup.toString()}\"`)\n\t\t\t\t.reverse();\n\n\t\t\tresult = result.concat(outletLog);\n\t\t});\n\n\t\treturn result.join('\\n');\n\t}\n\n\t// Methods for syncing with page navigation in PageRouterOutlet\n\tpublic _beginBackPageNavigation(frame: Frame) {\n\t\tconst outlet: Outlet = this.getOutletByFrame(frame);\n\n\t\tif (!outlet || outlet.isPageNavigationBack) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerError('Attempted to call startGoBack while going back.');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.startGoBack()');\n\t\t}\n\t\toutlet.isPageNavigationBack = true;\n\n\t\tthis.currentOutlet = outlet;\n\t}\n\n\tpublic _finishBackPageNavigation(frame: Frame) {\n\t\tconst outlet: Outlet = this.getOutletByFrame(frame);\n\n\t\tif (!outlet || !outlet.isPageNavigationBack) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerError('Attempted to call endGoBack while not going back.');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.finishBackPageNavigation()');\n\t\t}\n\t\toutlet.isPageNavigationBack = false;\n\t}\n\n\tpublic _beginModalNavigation(frame: Frame): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy._beginModalNavigation()');\n\t\t}\n\n\t\tthis.currentOutlet = this.getOutletByFrame(frame) || this.currentOutlet;\n\n\t\t// It is possible to have frame, but not corresponding Outlet, if\n\t\t// showing modal dialog on app.component.ts ngOnInit() e.g. In that case\n\t\t// the modal is treated as none modal navigation.\n\t\tif (this.currentOutlet) {\n\t\t\tthis.currentOutlet.showingModal = true;\n\t\t\tthis._modalNavigationDepth++;\n\t\t}\n\t}\n\n\tpublic _closeModalNavigation() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.closeModalNavigation()');\n\t\t}\n\n\t\tconst isShowingModal = this._modalNavigationDepth > 0;\n\n\t\tif (isShowingModal) {\n\t\t\tthis._modalNavigationDepth--;\n\t\t}\n\n\t\t// currentOutlet should be the one that corresponds to the topmost frame\n\t\tconst topmostOutlet = this.getOutletByFrame(this.frameService.getFrame());\n\t\tconst outlet = this.findOutletByModal(this._modalNavigationDepth, isShowingModal) || topmostOutlet;\n\n\t\tif (outlet) {\n\t\t\tthis.currentOutlet = outlet;\n\t\t\tthis.currentOutlet.showingModal = false;\n\t\t\tthis.callPopState(this.currentOutlet.peekState(), false);\n\t\t}\n\t}\n\n\tpublic _beginPageNavigation(frame: Frame): NavigationOptions {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy._beginPageNavigation()');\n\t\t}\n\n\t\tthis.currentOutlet = this.getOutletByFrame(frame) || this.currentOutlet;\n\t\tconst lastState = this.currentOutlet.peekState();\n\n\t\tif (lastState) {\n\t\t\tlastState.isPageNavigation = true;\n\t\t}\n\n\t\tconst navOptions = this._currentNavigationOptions || defaultNavOptions;\n\t\tif (navOptions.clearHistory) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy._beginPageNavigation clearing states history');\n\t\t\t}\n\t\t\tthis.currentOutlet.states = [lastState];\n\t\t}\n\n\t\tthis._currentNavigationOptions = undefined;\n\t\treturn navOptions;\n\t}\n\n\tpublic _setNavigationOptions(options: NavigationOptions) {\n\t\tthis._currentNavigationOptions = {\n\t\t\tclearHistory: isPresent(options.clearHistory) ? options.clearHistory : false,\n\t\t\tanimated: isPresent(options.animated) ? options.animated : true,\n\t\t\ttransition: options.transition,\n\t\t};\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy._setNavigationOptions(' + `${JSON.stringify(this._currentNavigationOptions)})`);\n\t\t}\n\t}\n\n\tpublic _getOutlets(): Array<Outlet> {\n\t\treturn this.outlets;\n\t}\n\n\tupdateOutletFrame(outlet: Outlet, frame: Frame, isEmptyOutletFrame: boolean) {\n\t\tconst lastState = outlet.peekState();\n\n\t\tif (lastState && !lastState.frame && !isEmptyOutletFrame) {\n\t\t\tlastState.frame = frame;\n\t\t}\n\n\t\tif (!outlet.containsFrame(frame)) {\n\t\t\toutlet.frames.push(frame);\n\t\t}\n\t\tthis.currentOutlet = outlet;\n\t}\n\n\tclearOutlet(frame: Frame) {\n\t\tthis.outlets = this.outlets.filter((currentOutlet) => {\n\t\t\tlet isEqualToCurrent;\n\n\t\t\tif (this.currentOutlet) {\n\t\t\t\tisEqualToCurrent = currentOutlet.pathByOutlets === this.currentOutlet.pathByOutlets;\n\t\t\t}\n\n\t\t\t// Remove outlet from the url tree.\n\t\t\tif (currentOutlet.containsFrame(frame) && !isEqualToCurrent) {\n\t\t\t\tthis.callPopState(null, true, currentOutlet);\n\t\t\t}\n\n\t\t\t// Skip frames filtering since currentOutlet is <router-outlet> when no frames available.\n\t\t\tif (currentOutlet.frames.length && !currentOutlet.isNSEmptyOutlet) {\n\t\t\t\tcurrentOutlet.frames = currentOutlet.frames.filter((currentFrame) => currentFrame !== frame);\n\t\t\t\treturn currentOutlet.frames.length;\n\t\t\t}\n\n\t\t\treturn !currentOutlet.containsFrame(frame);\n\t\t});\n\t}\n\n\tgetSegmentGroupFullPath(segmentGroup: UrlSegmentGroup): string {\n\t\tlet fullPath = '';\n\n\t\twhile (segmentGroup) {\n\t\t\tconst url = segmentGroup.toString();\n\n\t\t\tif (fullPath) {\n\t\t\t\tfullPath = (url ? url + '/' : '') + fullPath;\n\t\t\t} else {\n\t\t\t\tfullPath = url;\n\t\t\t}\n\n\t\t\tsegmentGroup = segmentGroup.parent;\n\t\t}\n\n\t\treturn fullPath;\n\t}\n\n\tgetRouteFullPath(currentRoute: any): string {\n\t\tconst outletName = currentRoute.outlet;\n\t\tlet fullPath;\n\n\t\tcurrentRoute = currentRoute.parent;\n\t\twhile (currentRoute) {\n\t\t\tconst urls = currentRoute.url.value || currentRoute.url;\n\t\t\tlet url = urls;\n\n\t\t\tif (Array.isArray(urls)) {\n\t\t\t\turl = url.join('/');\n\t\t\t}\n\n\t\t\tfullPath = fullPath ? (url ? url + '/' : url) + fullPath : url;\n\t\t\tcurrentRoute = currentRoute.parent;\n\t\t}\n\n\t\treturn fullPath ? fullPath + '-' + outletName : outletName;\n\t}\n\n\tgetPathByOutlets(urlSegmentGroup: any): string {\n\t\tif (!urlSegmentGroup) {\n\t\t\treturn '';\n\t\t}\n\n\t\tlet pathToOutlet;\n\t\tlet lastPath = urlSegmentGroup.outlet || 'primary';\n\t\tlet parent = urlSegmentGroup.parent;\n\n\t\twhile (parent && urlSegmentGroup.root !== parent) {\n\t\t\tif (parent && parent.outlet !== lastPath) {\n\t\t\t\tif (lastPath === 'primary') {\n\t\t\t\t\tlastPath = parent.outlet;\n\t\t\t\t} else {\n\t\t\t\t\tlastPath = parent.outlet;\n\t\t\t\t\tpathToOutlet = lastPath + '-' + (pathToOutlet || urlSegmentGroup.outlet);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn pathToOutlet || lastPath;\n\t}\n\n\tfindOutlet(outletKey: string, activatedRouteSnapshot?: ActivatedRouteSnapshot): Outlet {\n\t\tlet outlet: Outlet = this.outlets.find((currentOutlet) => {\n\t\t\tlet equalModalDepth = currentOutlet.modalNavigationDepth === this._modalNavigationDepth;\n\t\t\treturn equalModalDepth && currentOutlet.outletKeys.indexOf(outletKey) > -1;\n\t\t});\n\n\t\t// No Outlet with the given outletKey could happen when using nested unnamed p-r-o\n\t\t// primary -> primary -> prymary\n\t\tif (!outlet && activatedRouteSnapshot) {\n\t\t\tconst pathByOutlets = this.getPathByOutlets(activatedRouteSnapshot);\n\t\t\toutlet = this.outlets.find((currentOutlet) => {\n\t\t\t\tlet equalModalDepth = currentOutlet.modalNavigationDepth === this._modalNavigationDepth;\n\t\t\t\treturn equalModalDepth && currentOutlet.pathByOutlets === pathByOutlets;\n\t\t\t});\n\t\t}\n\n\t\treturn outlet;\n\t}\n\n\tprivate findOutletByModal(modalNavigation: number, isShowingModal?: boolean): Outlet {\n\t\treturn this.outlets.find((outlet) => {\n\t\t\tlet equalModalDepth = outlet.modalNavigationDepth === modalNavigation;\n\t\t\treturn isShowingModal ? equalModalDepth && outlet.showingModal : equalModalDepth;\n\t\t});\n\t}\n\n\tprivate getOutletByFrame(frame: Frame): Outlet {\n\t\tlet outlet;\n\n\t\tfor (let index = 0; index < this.outlets.length; index++) {\n\t\t\tconst currentOutlet = this.outlets[index];\n\n\t\t\tif (currentOutlet.containsFrame(frame)) {\n\t\t\t\toutlet = currentOutlet;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn outlet;\n\t}\n\n\tprivate updateStates(outlet: Outlet, currentSegmentGroup: UrlSegmentGroup, queryParams: Params): boolean {\n\t\tconst isNewPage = outlet.states.length === 0;\n\t\tconst lastState = outlet.states[outlet.states.length - 1];\n\t\tconst equalStateUrls = outlet.containsTopState(currentSegmentGroup.toString());\n\n\t\tconst locationState: LocationState = {\n\t\t\tsegmentGroup: currentSegmentGroup,\n\t\t\tisRootSegmentGroup: false,\n\t\t\tisPageNavigation: isNewPage,\n\t\t\tqueryParams: { ...queryParams },\n\t\t};\n\n\t\tif (!lastState || !equalStateUrls) {\n\t\t\toutlet.states.push(locationState);\n\n\t\t\t// Update last state segmentGroup of parent Outlet.\n\t\t\tif (this._modalNavigationDepth === 0 && !outlet.showingModal) {\n\t\t\t\tthis.updateParentsStates(outlet, currentSegmentGroup.parent);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate updateParentsStates(outlet: Outlet, newSegmentGroup: UrlSegmentGroup) {\n\t\tlet parentOutlet = outlet.parent;\n\n\t\t// Update parents lastState segmentGroups\n\t\twhile (parentOutlet && newSegmentGroup) {\n\t\t\tconst state = parentOutlet.peekState();\n\n\t\t\tif (state) {\n\t\t\t\tstate.segmentGroup = newSegmentGroup;\n\t\t\t\tnewSegmentGroup = newSegmentGroup.parent;\n\t\t\t\tparentOutlet = parentOutlet.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t// tslint:disable-next-line:max-line-length\n\tprivate createOutlet(outletKey: string, path: string, segmentGroup: any, parent: Outlet, modalNavigation?: number, queryParams: Params = {}): Outlet {\n\t\tconst pathByOutlets = this.getPathByOutlets(segmentGroup);\n\t\tconst newOutlet = new Outlet(outletKey, path, pathByOutlets, modalNavigation);\n\n\t\tconst locationState: LocationState = {\n\t\t\tsegmentGroup: segmentGroup,\n\t\t\tisRootSegmentGroup: false,\n\t\t\tisPageNavigation: true, // It is a new OutletNode.\n\t\t\tqueryParams: { ...queryParams },\n\t\t};\n\n\t\tnewOutlet.states = [locationState];\n\t\tnewOutlet.parent = parent;\n\t\tthis.outlets.push(newOutlet);\n\n\t\t// Update last state segmentGroup of parent Outlet.\n\t\tif (this._modalNavigationDepth === 0 && !newOutlet.showingModal) {\n\t\t\tthis.updateParentsStates(newOutlet, segmentGroup.parent);\n\t\t}\n\n\t\treturn newOutlet;\n\t}\n\n\tprivate getSegmentGroupByOutlet(outlet: Outlet): UrlSegmentGroup {\n\t\tconst pathList = outlet.pathByOutlets.split('-');\n\t\tlet segmentGroup = this.currentUrlTree.root;\n\t\tlet pathToOutlet;\n\n\t\tfor (let index = 0; index < pathList.length; index++) {\n\t\t\tconst currentPath = pathList[index];\n\t\t\tconst childrenCount = Object.keys(segmentGroup.children).length;\n\n\t\t\tif (childrenCount && segmentGroup.children[currentPath]) {\n\t\t\t\tconst url = segmentGroup.toString();\n\t\t\t\tpathToOutlet = pathToOutlet ? pathToOutlet + '/' + url : url;\n\t\t\t\tsegmentGroup = segmentGroup.children[currentPath];\n\t\t\t} else {\n\t\t\t\t// If no child outlet found with the given name - forget about all previously found outlets.\n\t\t\t\t// example: seaching for 'primary-second-primary' shouldn't return 'primary-second'\n\t\t\t\t// if no 'primary' child available on 'second'.\n\t\t\t\tsegmentGroup = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Paths should also match since there could be another Outlet\n\t\t// with the same pathByOutlets but different url path.\n\t\tif (segmentGroup && outlet.path && pathToOutlet && outlet.path !== pathToOutlet) {\n\t\t\tsegmentGroup = null;\n\t\t}\n\n\t\treturn segmentGroup;\n\t}\n\n\t// Traversal and replacement of segmentGroup.\n\tprivate updateSegmentGroup(rootNode: any, oldSegmentGroup: UrlSegmentGroup, newSegmentGroup: UrlSegmentGroup) {\n\t\tconst queue = [];\n\t\tlet currentTree = rootNode;\n\n\t\twhile (currentTree) {\n\t\t\tObject.keys(currentTree.children).forEach((outletName) => {\n\t\t\t\tif (currentTree.children[outletName] === oldSegmentGroup) {\n\t\t\t\t\tif (newSegmentGroup) {\n\t\t\t\t\t\tcurrentTree.children[outletName] = newSegmentGroup;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete currentTree.children[outletName];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tqueue.push(currentTree.children[outletName]);\n\t\t\t});\n\n\t\t\tcurrentTree = queue.shift();\n\t\t}\n\t}\n\n\tprivate upsertModalOutlet(parentOutlet: Outlet, segmentedGroup: UrlSegmentGroup, queryParams: Params) {\n\t\tlet currentModalOutlet = this.findOutletByModal(this._modalNavigationDepth);\n\n\t\t// We want to treat every p-r-o as a standalone Outlet.\n\t\tif (!currentModalOutlet) {\n\t\t\tif (this._modalNavigationDepth > 1) {\n\t\t\t\t// The parent of the current Outlet should be the previous opened modal (if any).\n\t\t\t\tparentOutlet = this.findOutletByModal(this._modalNavigationDepth - 1);\n\t\t\t}\n\n\t\t\t// No currentModalOutlet available when opening 'primary' p-r-o.\n\t\t\tconst outletName = 'primary';\n\t\t\tconst outletPath = parentOutlet.peekState().segmentGroup.toString();\n\t\t\tconst outletKey = this.getOutletKey(outletPath, outletName);\n\t\t\t// tslint:disable-next-line:max-line-length\n\t\t\tcurrentModalOutlet = this.createOutlet(outletKey, outletPath, segmentedGroup, parentOutlet, this._modalNavigationDepth, queryParams);\n\t\t\tthis.currentOutlet = currentModalOutlet;\n\t\t} else if (this.updateStates(currentModalOutlet, segmentedGroup, queryParams)) {\n\t\t\tthis.currentOutlet = currentModalOutlet; // If states updated\n\t\t}\n\t}\n\n\tprivate getOutletKey(path: string, outletName: string): string {\n\t\treturn path ? path + '-' + outletName : outletName;\n\t}\n\n\tngOnDestroy() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NSLocationStrategy.ngOnDestroy()');\n\t\t}\n\n\t\tthis.outlets = [];\n\t\tthis.currentOutlet = null;\n\t}\n}\n","import { ComponentRef, ComponentFactory, ViewContainerRef, Component, Type, ComponentFactoryResolver, ChangeDetectorRef, ApplicationRef, OnDestroy } from '@angular/core';\nimport { Trace } from '@nativescript/core';\n\n/**\n * Wrapper component used for loading components when navigating\n * It uses DetachedContainer as selector so that it is containerRef is not attached to\n * the visual tree.\n */\n@Component({\n\tselector: 'DetachedContainer',\n\ttemplate: `<Placeholder #loader></Placeholder>`,\n})\nexport class DetachedLoader implements OnDestroy {\n\tprivate disposeFunctions: Array<() => void> = [];\n\t// tslint:disable-line:component-class-suffix\n\tconstructor(private resolver: ComponentFactoryResolver, private changeDetector: ChangeDetectorRef, private containerRef: ViewContainerRef, private appRef: ApplicationRef) {}\n\n\tprivate loadInLocation(componentType: Type<any>): Promise<ComponentRef<any>> {\n\t\tconst factory = this.resolver.resolveComponentFactory(componentType);\n\t\tconst componentRef = factory.create(this.containerRef.injector);\n\t\tthis.appRef.attachView(componentRef.hostView);\n\n\t\tthis.disposeFunctions.push(() => {\n\t\t\tthis.appRef.detachView(componentRef.hostView);\n\t\t\tcomponentRef.destroy();\n\t\t});\n\n\t\t// Component is created, built may not be checked if we are loading\n\t\t// inside component with OnPush CD strategy. Mark us for check to be sure CD will reach us.\n\t\t// We are inside a promise here so no need for setTimeout - CD should trigger\n\t\t// after the promise.\n\t\tTrace.write('DetachedLoader.loadInLocation component loaded -> markForCheck', 'detached-loader');\n\n\t\treturn Promise.resolve(componentRef);\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.disposeFunctions.forEach((fn) => fn());\n\t}\n\n\tpublic detectChanges() {\n\t\tthis.changeDetector.markForCheck();\n\t}\n\n\t// TODO: change this API -- async promises not needed here anymore.\n\tpublic loadComponent(componentType: Type<any>): Promise<ComponentRef<any>> {\n\t\tTrace.write('DetachedLoader.loadComponent', 'detached-loader');\n\t\treturn this.loadInLocation(componentType);\n\t}\n\n\tpublic loadWithFactory<T>(factory: ComponentFactory<T>): ComponentRef<T> {\n\t\tconst componentRef = factory.create(this.containerRef.injector);\n\t\tthis.appRef.attachView(componentRef.hostView);\n\n\t\tthis.disposeFunctions.push(() => {\n\t\t\tthis.appRef.detachView(componentRef.hostView);\n\t\t\tcomponentRef.destroy();\n\t\t});\n\t\treturn componentRef;\n\t}\n}\n","/**\n * Utility method to ensure a NgModule is only imported once in a codebase, otherwise will throw to help prevent accidental double importing\n * @param parentModule Parent module name\n * @param moduleName The module name\n */\nexport function throwIfAlreadyLoaded(parentModule: any, moduleName: string) {\n\tif (parentModule) {\n\t\tthrow new Error(`${moduleName} has already been loaded. Import ${moduleName} in the AppModule only.`);\n\t}\n}\n\n/**\n * Utility method which will only fire the callback once ever\n * @param fn callback to call only once\n */\nexport function once(fn: Function) {\n\tlet wasCalled = false;\n\n\treturn function wrapper() {\n\t\tif (wasCalled) {\n\t\t\treturn;\n\t\t}\n\n\t\twasCalled = true;\n\t\tfn.apply(null, arguments);\n\t};\n}\n","import { ComponentFactoryResolver, ComponentRef, Injectable, Injector, NgModuleRef, NgZone, Type, ViewContainerRef } from '@angular/core';\nimport { Frame, View, ViewBase, ProxyViewContainer, ShowModalOptions } from '@nativescript/core';\n\nimport { NSLocationStrategy } from '../router/ns-location-strategy';\nimport { AppHostView, AppHostAsyncView } from '../app-host-view';\nimport { DetachedLoader } from '../common/detached-loader';\nimport { PageFactory, PAGE_FACTORY } from '../platform-providers';\nimport { once } from '../common/utils';\n\nexport type BaseShowModalOptions = Pick<ShowModalOptions, Exclude<keyof ShowModalOptions, 'closeCallback' | 'context'>>;\n\nexport interface ModalDialogOptions extends BaseShowModalOptions {\n\tcontext?: any;\n\tviewContainerRef?: ViewContainerRef;\n\tmoduleRef?: NgModuleRef<any>;\n\ttarget?: View;\n}\n\nexport interface ShowDialogOptions extends BaseShowModalOptions {\n\tcontainerRef: ViewContainerRef;\n\tcontext: any;\n\tdoneCallback;\n\tpageFactory: PageFactory;\n\tparentView: ViewBase;\n\tresolver: ComponentFactoryResolver;\n\ttype: Type<any>;\n}\n\nexport class ModalDialogParams {\n\tconstructor(public context: any = {}, public closeCallback: (...args) => any) {}\n}\n\n@Injectable()\nexport class ModalDialogService {\n\tconstructor(private location: NSLocationStrategy, private zone: NgZone) {}\n\n\tpublic showModal(type: Type<any>, options: ModalDialogOptions): Promise<any> {\n\t\tif (!options.viewContainerRef) {\n\t\t\tthrow new Error('No viewContainerRef: ' + 'Make sure you pass viewContainerRef in ModalDialogOptions.');\n\t\t}\n\n\t\tlet parentView = options.viewContainerRef.element.nativeElement;\n\t\tif (options.target) {\n\t\t\tparentView = options.target;\n\t\t}\n\n\t\tif ((parentView instanceof AppHostView || parentView instanceof AppHostAsyncView) && parentView.ngAppRoot) {\n\t\t\tparentView = parentView.ngAppRoot;\n\t\t}\n\n\t\t// _ngDialogRoot is the first child of the previously detached proxy.\n\t\t// It should have 'viewController' (iOS) or '_dialogFragment' (Android) available for\n\t\t// presenting future modal views.\n\t\tif (parentView._ngDialogRoot) {\n\t\t\tparentView = parentView._ngDialogRoot;\n\t\t}\n\n\t\tconst pageFactory: PageFactory = options.viewContainerRef.injector.get(PAGE_FACTORY);\n\n\t\t// resolve from particular module (moduleRef)\n\t\t// or from same module as parentView (viewContainerRef)\n\t\tconst componentContainer = options.moduleRef || options.viewContainerRef;\n\t\tconst resolver = componentContainer.injector.get(ComponentFactoryResolver);\n\n\t\tlet frame = parentView;\n\t\tif (!(parentView instanceof Frame)) {\n\t\t\tframe = (parentView.page && parentView.page.frame) || Frame.topmost();\n\t\t}\n\n\t\tthis.location._beginModalNavigation(frame);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\ttry {\n\t\t\t\t\tthis._showDialog({\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tcontainerRef: options.viewContainerRef,\n\t\t\t\t\t\tcontext: options.context,\n\t\t\t\t\t\tdoneCallback: resolve,\n\t\t\t\t\t\tpageFactory,\n\t\t\t\t\t\tparentView,\n\t\t\t\t\t\tresolver,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t});\n\t}\n\n\tprivate _showDialog(options: ShowDialogOptions): void {\n\t\tlet componentView: View;\n\t\tlet detachedLoaderRef: ComponentRef<DetachedLoader>;\n\n\t\tconst closeCallback = once((...args) => {\n\t\t\toptions.doneCallback.apply(undefined, args);\n\t\t\tif (componentView) {\n\t\t\t\tcomponentView.closeModal();\n\t\t\t\tthis.location._closeModalNavigation();\n\t\t\t\tthis.zone.run(() => {\n\t\t\t\t\tdetachedLoaderRef.instance.detectChanges();\n\t\t\t\t\tdetachedLoaderRef.destroy();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst modalParams = new ModalDialogParams(options.context, closeCallback);\n\n\t\tconst childInjector = Injector.create({\n\t\t\tproviders: [{ provide: ModalDialogParams, useValue: modalParams }],\n\t\t\tparent: options.containerRef.injector,\n\t\t});\n\t\tconst detachedFactory = options.resolver.resolveComponentFactory(DetachedLoader);\n\t\tdetachedLoaderRef = options.containerRef.createComponent(detachedFactory, 0, childInjector, null);\n\t\tthis.zone.run(() => {\n\t\t\tdetachedLoaderRef.instance.loadComponent(options.type).then((compRef) => {\n\t\t\t\tconst detachedProxy = <ProxyViewContainer>compRef.location.nativeElement;\n\n\t\t\t\tif (detachedProxy.getChildrenCount() > 1) {\n\t\t\t\t\tthrow new Error('Modal content has more than one root view.');\n\t\t\t\t}\n\t\t\t\tcomponentView = detachedProxy.getChildAt(0);\n\n\t\t\t\tif (componentView.parent) {\n\t\t\t\t\t(<any>componentView.parent)._ngDialogRoot = componentView;\n\t\t\t\t\t(<any>componentView.parent).removeChild(componentView);\n\t\t\t\t}\n\n\t\t\t\toptions.parentView.showModal(componentView, { ...options, closeCallback });\n\t\t\t});\n\t\t});\n\t}\n}\n","import { View, LayoutBase, Page, Frame, AbsoluteLayout, ActivityIndicator, BottomNavigation, Button, ContentView, DatePicker, DockLayout, GridLayout, HtmlView, Image, Label, ListPicker, ListView, Placeholder, Progress, ProxyViewContainer, Repeater, ScrollView, SearchBar, SegmentedBar, SegmentedBarItem, Slider, StackLayout, FlexboxLayout, Switch, TabView, TabStrip, TabStripItem, TabContentItem, Tabs, TextField, TextView, TimePicker, WebView, WrapLayout, FormattedString, Span } from '@nativescript/core';\n\nexport interface ViewClass {\n\tnew (): View;\n}\nexport interface ViewExtensions {\n\tmeta: ViewClassMeta;\n\tnodeType: number;\n\tnodeName: string;\n\tparentNode: NgView;\n\tnextSibling: NgView;\n\tpreviousSibling: NgView;\n\tfirstChild: NgView;\n\tlastChild: NgView;\n\tngCssClasses: Map<string, boolean>;\n}\n\nexport type NgView = View & ViewExtensions;\n\nexport abstract class InvisibleNode extends View implements NgView {\n\tmeta: { skipAddToDom: boolean };\n\tnodeType: number;\n\tnodeName: string;\n\tparentNode: NgView;\n\tnextSibling: NgView;\n\tpreviousSibling: NgView;\n\tfirstChild: NgView;\n\tlastChild: NgView;\n\tngCssClasses: Map<string, boolean>;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.nodeType = 1;\n\t\tthis.nodeName = getClassName(this);\n\t}\n\n\ttoString() {\n\t\treturn `${this.nodeName}(${this.id})`;\n\t}\n}\n\nexport class CommentNode extends InvisibleNode {\n\tprotected static id = 0;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.meta = {\n\t\t\tskipAddToDom: true,\n\t\t};\n\t\tthis.id = CommentNode.id.toString();\n\t\tCommentNode.id += 1;\n\t}\n}\n\nexport class TextNode extends InvisibleNode {\n\tprotected static id = 0;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.meta = {\n\t\t\tskipAddToDom: true,\n\t\t};\n\t\tthis.id = TextNode.id.toString();\n\t\tTextNode.id += 1;\n\t}\n}\n\nconst getClassName = (instance) => instance.constructor.name;\n\nexport interface ViewClassMeta {\n\tskipAddToDom?: boolean;\n\tinsertChild?: (parent: any, child: any, next?: any) => void;\n\tremoveChild?: (parent: any, child: any) => void;\n}\n\nexport function isDetachedElement(element): boolean {\n\treturn element && element.meta && element.meta.skipAddToDom;\n}\n\nexport function isView(view: any): view is NgView {\n\treturn view instanceof View;\n}\n\nexport function isInvisibleNode(view: any): view is InvisibleNode {\n\treturn view instanceof InvisibleNode;\n}\n\nexport type ViewResolver = () => any;\n\nconst elementMap = new Map<string, { resolver: ViewResolver; meta?: ViewClassMeta }>();\nconst camelCaseSplit = /([a-z0-9])([A-Z])/g;\nconst defaultViewMeta: ViewClassMeta = { skipAddToDom: false };\n\nexport function registerElement(elementName: string, resolver: ViewResolver, meta?: ViewClassMeta): void {\n\tconst entry = { resolver, meta };\n\telementMap.set(elementName, entry);\n\telementMap.set(elementName.toLowerCase(), entry);\n\telementMap.set(elementName.replace(camelCaseSplit, '$1-$2').toLowerCase(), entry);\n}\n\nexport function getViewClass(elementName: string): any {\n\tconst entry = elementMap.get(elementName) || elementMap.get(elementName.toLowerCase());\n\tif (!entry) {\n\t\tthrow new TypeError(`No known component for element ${elementName}.`);\n\t}\n\n\ttry {\n\t\treturn entry.resolver();\n\t} catch (e) {\n\t\tthrow new TypeError(`Could not load view for: ${elementName}.${e}`);\n\t}\n}\n\nexport function getViewMeta(nodeName: string): ViewClassMeta {\n\tconst entry = elementMap.get(nodeName) || elementMap.get(nodeName.toLowerCase());\n\treturn (entry && entry.meta) || defaultViewMeta;\n}\n\nexport function isKnownView(elementName: string): boolean {\n\treturn elementMap.has(elementName) || elementMap.has(elementName.toLowerCase());\n}\n\nexport function getSingleViewRecursive(nodes: Array<any>, nestLevel: number): View {\n\tconst actualNodes = nodes.filter((node) => !(node instanceof InvisibleNode));\n\n\tif (actualNodes.length === 0) {\n\t\tthrow new Error(`No suitable views found in list template! ` + `Nesting level: ${nestLevel}`);\n\t} else if (actualNodes.length > 1) {\n\t\tthrow new Error(`More than one view found in list template!` + `Nesting level: ${nestLevel}`);\n\t}\n\n\tconst rootLayout = actualNodes[0];\n\tif (!rootLayout) {\n\t\treturn getSingleViewRecursive(rootLayout.children, nestLevel + 1);\n\t}\n\n\tconst parentLayout = rootLayout.parent;\n\tif (parentLayout instanceof LayoutBase) {\n\t\tlet node = rootLayout.parentNode;\n\t\tparentLayout.removeChild(rootLayout);\n\t\trootLayout.parentNode = node;\n\t}\n\n\treturn rootLayout;\n}\n\nconst frameMeta: ViewClassMeta = {\n\tinsertChild: (parent: Frame, child: NgView, next: any) => {\n\t\t// Page cannot be added to Frame with _addChildFromBuilder (thwos \"use defaultPage\" error)\n\t\tif (isInvisibleNode(child)) {\n\t\t\treturn;\n\t\t} else if (child instanceof Page) {\n\t\t\tparent.navigate({ create: () => child });\n\t\t} else {\n\t\t\tthrow new Error('Only a Page can be a child of Frame');\n\t\t}\n\t},\n};\n\n// Register default NativeScript components\n// Note: ActionBar related components are registerd together with action-bar directives.\nregisterElement('AbsoluteLayout', () => AbsoluteLayout);\nregisterElement('ActivityIndicator', () => ActivityIndicator);\nregisterElement('BottomNavigation', () => BottomNavigation);\nregisterElement('Button', () => Button);\nregisterElement('ContentView', () => ContentView);\nregisterElement('DatePicker', () => DatePicker);\nregisterElement('DockLayout', () => DockLayout);\nregisterElement('Frame', () => <any>Frame, frameMeta);\nregisterElement('GridLayout', () => GridLayout);\nregisterElement('HtmlView', () => HtmlView);\nregisterElement('Image', () => Image);\n// Parse5 changes <Image> tags to <img>. WTF!\nregisterElement('img', () => Image);\nregisterElement('Label', () => Label);\nregisterElement('ListPicker', () => ListPicker);\nregisterElement('ListView', () => ListView);\nregisterElement('Page', () => Page);\nregisterElement('Placeholder', () => Placeholder);\nregisterElement('Progress', () => Progress);\nregisterElement('ProxyViewContainer', () => ProxyViewContainer);\nregisterElement('Repeater', () => Repeater);\nregisterElement('ScrollView', () => ScrollView);\nregisterElement('SearchBar', () => SearchBar);\nregisterElement('SegmentedBar', () => SegmentedBar);\nregisterElement('SegmentedBarItem', () => <any>SegmentedBarItem);\nregisterElement('Slider', () => Slider);\nregisterElement('StackLayout', () => StackLayout);\nregisterElement('FlexboxLayout', () => FlexboxLayout);\nregisterElement('Switch', () => Switch);\nregisterElement('TabView', () => TabView);\nregisterElement('TabStrip', () => TabStrip);\nregisterElement('TabStripItem', () => TabStripItem);\nregisterElement('TabContentItem', () => TabContentItem);\nregisterElement('Tabs', () => Tabs);\nregisterElement('TextField', () => TextField);\nregisterElement('TextView', () => TextView);\nregisterElement('TimePicker', () => TimePicker);\nregisterElement('WebView', () => WebView);\nregisterElement('WrapLayout', () => WrapLayout);\nregisterElement('FormattedString', () => <any>FormattedString);\nregisterElement('Span', () => <any>Span);\n\nregisterElement('DetachedContainer', () => ProxyViewContainer, {\n\tskipAddToDom: true,\n});\n\nregisterElement('page-router-outlet', () => <any>Frame);\n","import { AfterContentInit, ContentChild, Directive, DoCheck, ElementRef, EmbeddedViewRef, EventEmitter, Host, Inject, InjectionToken, Input, IterableDiffer, IterableDiffers, OnDestroy, Output, TemplateRef, ViewChild, ViewContainerRef, ɵisListLikeIterable as isListLikeIterable, Injectable, NgZone } from '@angular/core';\nimport { ObservableArray, View, KeyedTemplate, LayoutBase, ItemEventData, TemplatedItemsView, profile } from '@nativescript/core';\n\nimport { getSingleViewRecursive } from '../element-registry';\nimport { NativeScriptDebug } from '../trace';\n\nconst NG_VIEW = '_ngViewRef';\n\nexport class ItemContext {\n\tconstructor(public $implicit?: any, public item?: any, public index?: number, public even?: boolean, public odd?: boolean) {}\n}\n\nexport interface SetupItemViewArgs {\n\tview: EmbeddedViewRef<any>;\n\tdata: any;\n\tindex: number;\n\tcontext: ItemContext;\n}\n\n@Directive()\nexport abstract class TemplatedItemsComponent implements DoCheck, OnDestroy, AfterContentInit {\n\tpublic abstract get nativeElement(): TemplatedItemsView;\n\n\tprotected templatedItemsView: TemplatedItemsView;\n\tprotected _items: any;\n\tprotected _differ: IterableDiffer<KeyedTemplate>;\n\tprotected _templateMap: Map<string, KeyedTemplate>;\n\n\t@ViewChild('loader', { read: ViewContainerRef, static: false }) loader: ViewContainerRef;\n\n\t@Output() public setupItemView = new EventEmitter<SetupItemViewArgs>();\n\n\t@ContentChild(TemplateRef, { read: TemplateRef, static: false }) itemTemplateQuery: TemplateRef<ItemContext>;\n\n\titemTemplate: TemplateRef<ItemContext>;\n\n\t@Input()\n\tget items() {\n\t\treturn this._items;\n\t}\n\n\tset items(value: any) {\n\t\tthis._items = value;\n\t\tlet needDiffer = true;\n\t\tif (value instanceof ObservableArray) {\n\t\t\tneedDiffer = false;\n\t\t}\n\t\tif (needDiffer && !this._differ && isListLikeIterable(value)) {\n\t\t\tthis._differ = this._iterableDiffers.find(this._items).create((_index, item) => {\n\t\t\t\treturn item;\n\t\t\t});\n\t\t}\n\n\t\tthis.templatedItemsView.items = this._items;\n\t}\n\n\tconstructor(_elementRef: ElementRef, private _iterableDiffers: IterableDiffers, private zone: NgZone) {\n\t\tthis.templatedItemsView = _elementRef.nativeElement;\n\n\t\tthis.templatedItemsView.on('itemLoading', this.onItemLoading, this);\n\t}\n\n\tngAfterContentInit() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.listViewLog('TemplatedItemsView.ngAfterContentInit()');\n\t\t}\n\n\t\tthis.setItemTemplates();\n\t}\n\n\tngOnDestroy() {\n\t\tthis.templatedItemsView.off('itemLoading', this.onItemLoading, this);\n\t\tthis.templatedItemsView = null;\n\n\t\tif (this._templateMap) {\n\t\t\tthis._templateMap.clear();\n\t\t}\n\t}\n\n\tprivate setItemTemplates() {\n\t\t// The itemTemplateQuery may be changed after list items are added that contain <template> inside,\n\t\t// so cache and use only the original template to avoid errors.\n\t\tthis.itemTemplate = this.itemTemplateQuery;\n\n\t\tif (this._templateMap) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.listViewLog('Setting templates');\n\t\t\t}\n\n\t\t\tconst templates: KeyedTemplate[] = [];\n\t\t\tthis._templateMap.forEach((value) => {\n\t\t\t\ttemplates.push(value);\n\t\t\t});\n\t\t\tthis.templatedItemsView.itemTemplates = templates;\n\t\t}\n\t}\n\n\tpublic registerTemplate(key: string, template: TemplateRef<ItemContext>) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.listViewLog(`registerTemplate for key: ${key}`);\n\t\t}\n\n\t\tif (!this._templateMap) {\n\t\t\tthis._templateMap = new Map<string, KeyedTemplate>();\n\t\t}\n\n\t\tconst keyedTemplate = {\n\t\t\tkey,\n\t\t\tcreateView: this.getItemTemplateViewFactory(template),\n\t\t};\n\n\t\tthis._templateMap.set(key, keyedTemplate);\n\t}\n\n\t@profile\n\tpublic onItemLoading(args: ItemEventData) {\n\t\tif (!args.view && !this.itemTemplate) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = args.index;\n\t\tconst items = (<any>args.object).items;\n\t\tconst currentItem = typeof items.getItem === 'function' ? items.getItem(index) : items[index];\n\t\tlet viewRef: EmbeddedViewRef<ItemContext>;\n\n\t\tif (args.view) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.listViewLog(`onItemLoading: ${index} - Reusing existing view`);\n\t\t\t}\n\n\t\t\tviewRef = args.view[NG_VIEW];\n\n\t\t\t// Getting angular view from original element (in cases when ProxyViewContainer\n\t\t\t// is used NativeScript internally wraps it in a StackLayout)\n\t\t\tif (!viewRef && args.view instanceof LayoutBase && args.view.getChildrenCount() > 0) {\n\t\t\t\tviewRef = args.view.getChildAt(0)[NG_VIEW];\n\t\t\t}\n\n\t\t\tif (!viewRef && NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.listViewError(`ViewReference not found for item ${index}. View recycling is not working`);\n\t\t\t}\n\n\t\t\t// No ng-template is setup, continue with 'defaultTemplate'\n\t\t\tif (!viewRef) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!viewRef) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.listViewLog(`onItemLoading: ${index} - Creating view from template`);\n\t\t\t}\n\n\t\t\tviewRef = this.loader.createEmbeddedView(this.itemTemplate, new ItemContext(), 0);\n\t\t\targs.view = getItemViewRoot(viewRef);\n\t\t\targs.view[NG_VIEW] = viewRef;\n\t\t}\n\n\t\tthis.setupViewRef(viewRef, currentItem, index);\n\n\t\tthis.detectChangesOnChild(viewRef, index);\n\t}\n\n\tpublic setupViewRef(viewRef: EmbeddedViewRef<ItemContext>, data: any, index: number): void {\n\t\tconst context = viewRef.context;\n\t\tcontext.$implicit = data;\n\t\tcontext.item = data;\n\t\tcontext.index = index;\n\t\tcontext.even = index % 2 === 0;\n\t\tcontext.odd = !context.even;\n\n\t\tthis.setupItemView.next({ view: viewRef, data: data, index: index, context: context });\n\t}\n\n\tprotected getItemTemplateViewFactory(template: TemplateRef<ItemContext>): () => View {\n\t\treturn () => {\n\t\t\tconst viewRef = this.loader.createEmbeddedView(template, new ItemContext(), 0);\n\t\t\tconst resultView = getItemViewRoot(viewRef);\n\t\t\tresultView[NG_VIEW] = viewRef;\n\n\t\t\treturn resultView;\n\t\t};\n\t}\n\n\t@profile\n\tprivate detectChangesOnChild(viewRef: EmbeddedViewRef<ItemContext>, index: number) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.listViewLog(`Manually detect changes in child: ${index}`);\n\t\t}\n\n\t\tthis.zone.run(() => {\n\t\t\tviewRef.markForCheck();\n\t\t\tviewRef.detectChanges();\n\t\t});\n\t}\n\n\tngDoCheck() {\n\t\tif (this._differ) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.listViewLog('ngDoCheck() - execute differ');\n\t\t\t}\n\n\t\t\tconst changes = this._differ.diff(this._items);\n\t\t\tif (changes) {\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.listViewLog('ngDoCheck() - refresh');\n\t\t\t\t}\n\n\t\t\t\tthis.templatedItemsView.refresh();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport interface ComponentView {\n\trootNodes: Array<any>;\n\tdestroy(): void;\n}\n\nexport type RootLocator = (nodes: Array<any>, nestLevel: number) => View;\n\nexport function getItemViewRoot(viewRef: ComponentView, rootLocator: RootLocator = getSingleViewRecursive): View {\n\tconst rootView = rootLocator(viewRef.rootNodes, 0);\n\treturn rootView;\n}\n\nexport const TEMPLATED_ITEMS_COMPONENT = new InjectionToken<TemplatedItemsComponent>('TemplatedItemsComponent');\n\n@Directive({ selector: '[nsTemplateKey]' })\nexport class TemplateKeyDirective {\n\tconstructor(private templateRef: TemplateRef<any>, @Inject(TEMPLATED_ITEMS_COMPONENT) @Host() private comp: TemplatedItemsComponent) {}\n\n\t@Input()\n\tset nsTemplateKey(value: any) {\n\t\tif (this.comp && this.templateRef) {\n\t\t\tthis.comp.registerTemplate(value, this.templateRef);\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, IterableDiffers, forwardRef, NgZone } from '@angular/core';\nimport { ListView } from '@nativescript/core';\nimport { TEMPLATED_ITEMS_COMPONENT, TemplatedItemsComponent } from './templated-items-comp';\n\n@Component({\n\tselector: 'ListView',\n\ttemplate: ` <DetachedContainer>\n\t\t<Placeholder #loader></Placeholder>\n\t</DetachedContainer>`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tproviders: [{ provide: TEMPLATED_ITEMS_COMPONENT, useExisting: forwardRef(() => ListViewComponent) }],\n})\nexport class ListViewComponent extends TemplatedItemsComponent {\n\tpublic get nativeElement(): ListView {\n\t\treturn this.templatedItemsView;\n\t}\n\n\tprotected templatedItemsView: ListView;\n\n\tconstructor(_elementRef: ElementRef, _iterableDiffers: IterableDiffers, zone: NgZone) {\n\t\tsuper(_elementRef, _iterableDiffers, zone);\n\t}\n}\n","import { AfterViewInit, Directive, ElementRef, Input, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { TabView, TabViewItem } from '@nativescript/core';\n\nimport { InvisibleNode } from '../element-registry';\nimport { NativeScriptDebug } from '../trace';\nimport { isBlank } from '../lang-facade';\n\ntype TextTransform = 'initial' | 'none' | 'capitalize' | 'uppercase' | 'lowercase';\nexport interface TabViewItemDef {\n\ttitle?: string;\n\ticonSource?: string;\n\ttextTransform?: TextTransform;\n}\n\n@Directive({\n\tselector: 'TabView', // tslint:disable-line:directive-selector\n})\nexport class TabViewDirective implements AfterViewInit {\n\tpublic tabView: TabView;\n\tprivate _selectedIndex: number;\n\tprivate viewInitialized: boolean;\n\n\t@Input()\n\tget selectedIndex(): number {\n\t\treturn this._selectedIndex;\n\t}\n\n\tset selectedIndex(value) {\n\t\tthis._selectedIndex = value;\n\t\tif (this.viewInitialized) {\n\t\t\tthis.tabView.selectedIndex = this._selectedIndex;\n\t\t}\n\t}\n\n\tconstructor(element: ElementRef) {\n\t\tthis.tabView = element.nativeElement;\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.viewInitialized = true;\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('this._selectedIndex: ' + this._selectedIndex);\n\t\t}\n\t\tif (!isBlank(this._selectedIndex)) {\n\t\t\tthis.tabView.selectedIndex = this._selectedIndex;\n\t\t}\n\t}\n}\n\n@Directive({\n\tselector: '[tabItem]', // tslint:disable-line:directive-selector\n})\nexport class TabViewItemDirective implements OnInit {\n\tprivate item: TabViewItem;\n\tprivate _config: TabViewItemDef;\n\n\tconstructor(private owner: TabViewDirective, private templateRef: TemplateRef<any>, private viewContainer: ViewContainerRef) {}\n\n\t@Input('tabItem')\n\tset config(config: TabViewItemDef) {\n\t\tif (!this._config || this._config.iconSource !== config.iconSource || this._config.title !== config.title || this._config.textTransform !== config.textTransform) {\n\t\t\tthis._config = config;\n\t\t\tthis.applyConfig();\n\t\t}\n\t}\n\n\tget config(): TabViewItemDef {\n\t\t// tslint:disable-line:no-input-rename\n\t\treturn this._config || {};\n\t}\n\n\t@Input()\n\tset title(title: string) {\n\t\tthis.config = Object.assign(this.config, { title });\n\t}\n\n\tget title() {\n\t\treturn this.config.title;\n\t}\n\n\t@Input()\n\tset iconSource(iconSource: string) {\n\t\tthis.config = Object.assign(this.config, { iconSource });\n\t}\n\n\tget iconSource() {\n\t\treturn this.config.iconSource;\n\t}\n\n\t@Input()\n\tset textTransform(textTransform: TextTransform) {\n\t\tthis.config = Object.assign(this.config, { textTransform });\n\t}\n\n\tget textTransform() {\n\t\treturn this.config.textTransform;\n\t}\n\n\tprivate ensureItem() {\n\t\tif (!this.item) {\n\t\t\tthis.item = new TabViewItem();\n\t\t}\n\t}\n\n\tprivate applyConfig() {\n\t\tthis.ensureItem();\n\n\t\tif (this.config.title) {\n\t\t\tthis.item.title = this.config.title;\n\t\t}\n\n\t\tif (this.config.iconSource) {\n\t\t\tthis.item.iconSource = this.config.iconSource;\n\t\t}\n\n\t\t//  TabViewItem textTransform has a default value for Android that kick in\n\t\t// only if no value (even a null value) is set.\n\t\tif (this.config.textTransform) {\n\t\t\tthis.item.textTransform = this.config.textTransform;\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\tthis.applyConfig();\n\n\t\tconst viewRef = this.viewContainer.createEmbeddedView(this.templateRef);\n\t\t// Filter out text nodes and comments\n\t\tconst realViews = viewRef.rootNodes.filter((node) => !(node instanceof InvisibleNode));\n\n\t\tif (realViews.length > 0) {\n\t\t\tthis.item.view = realViews[0];\n\n\t\t\tconst newItems = (this.owner.tabView.items || []).concat([this.item]);\n\t\t\tthis.owner.tabView.items = newItems;\n\t\t}\n\t}\n}\n","import { Directive, Component, ElementRef, Optional, OnDestroy } from '@angular/core';\nimport { ActionBar, ActionItem, ActionItems, NavigationButton, Page } from '@nativescript/core';\n\nimport { isBlank } from '../lang-facade';\nimport { NgView, ViewClassMeta, ViewExtensions, isInvisibleNode, isView, registerElement } from '../element-registry';\n\nexport function isActionItem(view: any): view is ActionItem {\n\treturn view instanceof ActionItem;\n}\n\nexport function isNavigationButton(view: any): view is NavigationButton {\n\treturn view instanceof NavigationButton;\n}\n\ntype NgActionBar = ActionBar & ViewExtensions;\n\nconst actionBarMeta: ViewClassMeta = {\n\tskipAddToDom: true,\n\tinsertChild: (parent: NgActionBar, child: NgView, next: any) => {\n\t\tif (isInvisibleNode(child)) {\n\t\t\treturn;\n\t\t} else if (isNavigationButton(child)) {\n\t\t\tparent.navigationButton = child;\n\t\t\tchild.parentNode = parent;\n\t\t} else if (isActionItem(child)) {\n\t\t\taddActionItem(parent, child, next);\n\t\t\tchild.parentNode = parent;\n\t\t} else if (isView(child)) {\n\t\t\tparent.titleView = child;\n\t\t}\n\t},\n\tremoveChild: (parent: NgActionBar, child: NgView) => {\n\t\tif (isInvisibleNode(child)) {\n\t\t\treturn;\n\t\t} else if (isNavigationButton(child)) {\n\t\t\tif (parent.navigationButton === child) {\n\t\t\t\tparent.navigationButton = null;\n\t\t\t}\n\n\t\t\tchild.parentNode = null;\n\t\t} else if (isActionItem(child)) {\n\t\t\tparent.actionItems.removeItem(child);\n\t\t\tchild.parentNode = null;\n\t\t} else if (isView(child) && parent.titleView && parent.titleView === child) {\n\t\t\tparent.titleView = null;\n\t\t}\n\t},\n};\n\nconst addActionItem = (bar: NgActionBar, item: ActionItem, next: ActionItem) => {\n\tif (next) {\n\t\tinsertActionItemBefore(bar, item, next);\n\t} else {\n\t\tappendActionItem(bar, item);\n\t}\n};\n\nconst insertActionItemBefore = (bar: NgActionBar, item: ActionItem, next: ActionItem) => {\n\tconst actionItems: ActionItems = bar.actionItems;\n\tconst actionItemsCollection: ActionItem[] = actionItems.getItems();\n\n\tconst indexToInsert = actionItemsCollection.indexOf(next);\n\tactionItemsCollection.splice(indexToInsert, 0, item);\n\n\t(<any>actionItems).setItems(actionItemsCollection);\n};\n\nconst appendActionItem = (bar: NgActionBar, item: ActionItem) => {\n\tbar.actionItems.addItem(item);\n};\n\nregisterElement('ActionBar', () => ActionBar, actionBarMeta);\nregisterElement('ActionItem', () => <any>ActionItem);\nregisterElement('NavigationButton', () => <any>NavigationButton);\n\n@Component({\n\tselector: 'ActionBar',\n\ttemplate: '<ng-content></ng-content>',\n})\nexport class ActionBarComponent {\n\tconstructor(public element: ElementRef, private page: Page) {\n\t\tif (!this.page) {\n\t\t\tthrow new Error('Inside ActionBarComponent but no Page found in DI.');\n\t\t}\n\n\t\tif (isBlank(this.page.actionBarHidden)) {\n\t\t\tthis.page.actionBarHidden = false;\n\t\t}\n\t\tthis.page.actionBar = this.element.nativeElement;\n\t\tthis.page.actionBar.update();\n\t}\n}\n\n@Component({\n\tselector: 'ActionBarExtension',\n\ttemplate: '',\n})\nexport class ActionBarScope {\n\t// tslint:disable-line:component-class-suffix\n\tconstructor(private page: Page) {\n\t\tif (!this.page) {\n\t\t\tthrow new Error('Inside ActionBarScope but no Page found in DI.');\n\t\t}\n\t}\n\n\tpublic onNavButtonInit(navBtn: NavigationButtonDirective) {\n\t\tthis.page.actionBar.navigationButton = navBtn.element.nativeElement;\n\t}\n\n\tpublic onNavButtonDestroy(navBtn: NavigationButtonDirective) {\n\t\tconst nav = <NavigationButton>navBtn.element.nativeElement;\n\t\tif (nav && this.page.actionBar.navigationButton === nav) {\n\t\t\tthis.page.actionBar.navigationButton = null;\n\t\t}\n\t}\n\n\tpublic onActionInit(item: ActionItemDirective) {\n\t\tthis.page.actionBar.actionItems.addItem(item.element.nativeElement);\n\t}\n\n\tpublic onActionDestroy(item: ActionItemDirective) {\n\t\tif (item.element.nativeElement.actionBar) {\n\t\t\tthis.page.actionBar.actionItems.removeItem(item.element.nativeElement);\n\t\t}\n\t}\n}\n\n@Directive({\n\tselector: 'ActionItem', // tslint:disable-line:directive-selector\n})\nexport class ActionItemDirective implements OnDestroy {\n\tconstructor(public element: ElementRef, @Optional() private ownerScope: ActionBarScope) {\n\t\tif (this.ownerScope) {\n\t\t\tthis.ownerScope.onActionInit(this);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.ownerScope) {\n\t\t\tthis.ownerScope.onActionDestroy(this);\n\t\t}\n\t}\n}\n\n@Directive({\n\tselector: 'NavigationButton', // tslint:disable-line:directive-selector\n})\nexport class NavigationButtonDirective implements OnDestroy {\n\tconstructor(public element: ElementRef, @Optional() private ownerScope: ActionBarScope) {\n\t\tif (this.ownerScope) {\n\t\t\tthis.ownerScope.onNavButtonInit(this);\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.ownerScope) {\n\t\t\tthis.ownerScope.onNavButtonDestroy(this);\n\t\t}\n\t}\n}\n","import { Component, Inject } from '@angular/core';\nimport { isIOS, isAndroid } from '@nativescript/core';\n\n@Component({\n\tselector: 'android',\n\ttemplate: `<ng-content *ngIf=\"show\"></ng-content>`,\n})\nexport class AndroidFilterComponent {\n\tpublic show: boolean;\n\tconstructor() {\n\t\tthis.show = isAndroid;\n\t}\n}\n\n@Component({\n\tselector: 'ios',\n\ttemplate: `<ng-content *ngIf=\"show\"></ng-content>`,\n})\nexport class IosFilterComponent {\n\tpublic show: boolean;\n\tconstructor() {\n\t\tthis.show = isIOS;\n\t}\n}\n","import { ListViewComponent } from './list-view-comp';\nimport { TemplateKeyDirective, TemplatedItemsComponent, TEMPLATED_ITEMS_COMPONENT } from './templated-items-comp';\nimport { TabViewDirective, TabViewItemDirective } from './tab-view';\nimport { ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective } from './action-bar';\nimport { AndroidFilterComponent, IosFilterComponent } from './platform-filters';\nexport { ModalDialogOptions, ModalDialogParams, ModalDialogService } from './dialogs';\n\nexport const NS_DIRECTIVES = [ListViewComponent, TemplateKeyDirective, TabViewDirective, TabViewItemDirective, ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective, AndroidFilterComponent, IosFilterComponent];\n\nexport { ListViewComponent, TemplateKeyDirective, TemplatedItemsComponent, TabViewDirective, TabViewItemDirective, ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective, AndroidFilterComponent, IosFilterComponent, TEMPLATED_ITEMS_COMPONENT };\n","import { CommonModule } from '@angular/common';\nimport { NO_ERRORS_SCHEMA, NgModule } from '@angular/core';\n\nimport { ModalDialogService } from './directives/dialogs';\nimport { defaultDeviceProvider, defaultFrameProvider, defaultPageProvider } from './platform-providers';\nimport { ListViewComponent } from './directives/list-view-comp';\nimport { TemplateKeyDirective } from './directives/templated-items-comp';\nimport { TabViewDirective, TabViewItemDirective } from './directives/tab-view';\nimport { ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective } from './directives/action-bar';\nimport { AndroidFilterComponent, IosFilterComponent } from './directives/platform-filters';\n\n@NgModule({\n\tdeclarations: [ListViewComponent, TemplateKeyDirective, TabViewDirective, TabViewItemDirective, ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective, AndroidFilterComponent, IosFilterComponent],\n\tproviders: [ModalDialogService, defaultDeviceProvider, defaultFrameProvider, defaultPageProvider],\n\timports: [CommonModule],\n\texports: [CommonModule, ListViewComponent, TemplateKeyDirective, TabViewDirective, TabViewItemDirective, ActionBarComponent, ActionBarScope, ActionItemDirective, NavigationButtonDirective, AndroidFilterComponent, IosFilterComponent],\n\tschemas: [NO_ERRORS_SCHEMA],\n})\nexport class NativeScriptCommonModule {}\n\nexport * from './directives';\n","import { View, unsetValue, Placeholder, ContentView, LayoutBase, platformNames, Device } from '@nativescript/core';\nimport { CommentNode, InvisibleNode, NgView, TextNode, ViewExtensions, getViewClass, getViewMeta, isDetachedElement, isInvisibleNode, isKnownView, isView } from './element-registry';\n\nimport { NativeScriptDebug } from './trace';\n\nconst ELEMENT_NODE_TYPE = 1;\nconst XML_ATTRIBUTES = Object.freeze(['style', 'rows', 'columns', 'fontAttributes']);\nconst whiteSpaceSplitter = /\\s+/;\n\n// export type ViewExtensions = ViewExtensions;\n// export type NgView = NgView;\nexport type NgLayoutBase = LayoutBase & ViewExtensions;\nexport type NgContentView = ContentView & ViewExtensions;\nexport type NgPlaceholder = Placeholder & ViewExtensions;\nexport type BeforeAttachAction = (view: View) => void;\n\nexport function isLayout(view: any): view is NgLayoutBase {\n\treturn view instanceof LayoutBase;\n}\n\nexport function isContentView(view: any): view is NgContentView {\n\treturn view instanceof ContentView;\n}\n\nconst propertyMaps: Map<Function, Map<string, string>> = new Map<Function, Map<string, string>>();\n\nexport class ViewUtil {\n\tprivate isIos: boolean;\n\tprivate isAndroid: boolean;\n\n\tconstructor(device: typeof Device) {\n\t\tthis.isIos = device.os === platformNames.ios;\n\t\tthis.isAndroid = device.os === platformNames.android;\n\t}\n\n\tpublic insertChild(parent: View, child: View, previous?: NgView, next?: NgView) {\n\t\tif (!parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst extendedParent = this.ensureNgViewExtensions(parent);\n\t\tconst extendedChild = this.ensureNgViewExtensions(child);\n\n\t\t// the element should be between previous and next\n\t\t// if there's next but no previous, it's the first element\n\t\t// if there's previous but no next, it's the last element\n\t\t// elements that have no previous/next elements must be appended\n\t\tif (!previous && !next) {\n\t\t\tprevious = extendedParent.lastChild;\n\t\t}\n\t\tthis.addToQueue(extendedParent, extendedChild, previous, next);\n\n\t\tif (isInvisibleNode(child)) {\n\t\t\textendedChild.parentNode = extendedParent;\n\t\t}\n\n\t\tif (!isDetachedElement(child)) {\n\t\t\tconst nextVisual = this.findNextVisual(next);\n\t\t\tthis.addToVisualTree(extendedParent, extendedChild, nextVisual);\n\t\t}\n\t}\n\n\tprivate addToQueue(parent: NgView, child: NgView, previous: NgView, next: NgView): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.addToQueue parent: ${parent}, view: ${child}, ` + `previous: ${previous}, next: ${next}`);\n\t\t}\n\n\t\tif (previous) {\n\t\t\tprevious.nextSibling = child;\n\t\t\tchild.previousSibling = previous;\n\t\t} else {\n\t\t\tparent.firstChild = child;\n\t\t}\n\n\t\tif (next) {\n\t\t\tchild.nextSibling = next;\n\t\t\tnext.previousSibling = child;\n\t\t} else {\n\t\t\tthis.appendToQueue(parent, child);\n\t\t}\n\t}\n\n\tprivate appendToQueue(parent: NgView, view: NgView) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.appendToQueue parent: ${parent} view: ${view}`);\n\t\t}\n\n\t\tif (parent.lastChild) {\n\t\t\tparent.lastChild.nextSibling = view;\n\t\t\tview.previousSibling = parent.lastChild;\n\t\t}\n\n\t\tparent.lastChild = view;\n\t}\n\n\tprivate addToVisualTree(parent: NgView, child: NgView, next: NgView): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.addToVisualTree parent: ${parent}, view: ${child}, next: ${next}`);\n\t\t}\n\n\t\tif (parent.meta && parent.meta.insertChild) {\n\t\t\tparent.meta.insertChild(parent, child, next);\n\t\t} else if (isLayout(parent)) {\n\t\t\tthis.insertToLayout(parent, child, next);\n\t\t} else if (isContentView(parent)) {\n\t\t\tparent.content = child;\n\t\t} else if (parent && (<any>parent)._addChildFromBuilder) {\n\t\t\t(<any>parent)._addChildFromBuilder(child.nodeName, child);\n\t\t}\n\t}\n\n\tprivate insertToLayout(parent: NgLayoutBase, child: NgView, next: NgView): void {\n\t\tif (child.parent === parent) {\n\t\t\tthis.removeLayoutChild(parent, child);\n\t\t}\n\n\t\tconst nextVisual = this.findNextVisual(next);\n\t\tif (nextVisual) {\n\t\t\tconst index = parent.getChildIndex(nextVisual);\n\t\t\tparent.insertChild(child, index);\n\t\t} else {\n\t\t\tparent.addChild(child);\n\t\t}\n\t}\n\n\tprivate findNextVisual(view: NgView): NgView {\n\t\tlet next = view;\n\t\twhile (next && isDetachedElement(next)) {\n\t\t\tnext = next.nextSibling;\n\t\t}\n\n\t\treturn next;\n\t}\n\n\tpublic removeChild(parent: View, child: View) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.removeChild parent: ${parent} child: ${child}`);\n\t\t}\n\n\t\tif (!parent) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst extendedParent = this.ensureNgViewExtensions(parent);\n\t\tconst extendedChild = this.ensureNgViewExtensions(child);\n\n\t\tthis.removeFromQueue(extendedParent, extendedChild);\n\t\tif (!isDetachedElement(extendedChild)) {\n\t\t\tthis.removeFromVisualTree(extendedParent, extendedChild);\n\t\t}\n\t}\n\n\tprivate removeFromQueue(parent: NgView, child: NgView) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.removeFromQueue parent: ${parent} child: ${child}`);\n\t\t}\n\n\t\tif (parent.firstChild === child && parent.lastChild === child) {\n\t\t\tparent.firstChild = null;\n\t\t\tparent.lastChild = null;\n\t\t\tchild.nextSibling = null;\n\t\t\tchild.previousSibling = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif (parent.firstChild === child) {\n\t\t\tparent.firstChild = child.nextSibling;\n\t\t}\n\n\t\tconst previous = child.previousSibling;\n\t\tif (parent.lastChild === child) {\n\t\t\tparent.lastChild = previous;\n\t\t}\n\n\t\tif (previous) {\n\t\t\tprevious.nextSibling = child.nextSibling;\n\t\t\tif (child.nextSibling) {\n\t\t\t\tchild.nextSibling.previousSibling = previous;\n\t\t\t}\n\t\t}\n\n\t\tchild.nextSibling = null;\n\t\tchild.previousSibling = null;\n\t}\n\n\t// NOTE: This one is O(n) - use carefully\n\tprivate findPreviousElement(parent: NgView, child: NgView): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.findPreviousElement parent: ${parent} child: ${child}`);\n\t\t}\n\n\t\tlet previousVisual;\n\t\tif (isLayout(parent)) {\n\t\t\tpreviousVisual = this.getPreviousVisualElement(parent, child);\n\t\t}\n\n\t\tlet previous = previousVisual || parent.firstChild;\n\n\t\t// since detached elements are not added to the visual tree,\n\t\t// we need to find the actual previous sibling of the view,\n\t\t// which may as well be an invisible node\n\t\twhile (previous && previous !== child && previous.nextSibling !== child) {\n\t\t\tprevious = previous.nextSibling;\n\t\t}\n\n\t\treturn previous;\n\t}\n\n\tprivate getPreviousVisualElement(parent: NgLayoutBase, child: NgView): NgView {\n\t\tconst elementIndex = parent.getChildIndex(child);\n\n\t\tif (elementIndex > 0) {\n\t\t\treturn parent.getChildAt(elementIndex - 1) as NgView;\n\t\t}\n\t}\n\n\t// NOTE: This one is O(n) - use carefully\n\tpublic getChildIndex(parent: any, child: NgView) {\n\t\tif (isLayout(parent)) {\n\t\t\treturn parent.getChildIndex(child);\n\t\t} else if (isContentView(parent)) {\n\t\t\treturn child === parent.content ? 0 : -1;\n\t\t}\n\t}\n\n\tprivate removeFromVisualTree(parent: NgView, child: NgView) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.removeFromVisualTree parent: ${parent} child: ${child}`);\n\t\t}\n\n\t\tif (parent.meta && parent.meta.removeChild) {\n\t\t\tparent.meta.removeChild(parent, child);\n\t\t} else if (isLayout(parent)) {\n\t\t\tthis.removeLayoutChild(parent, child);\n\t\t} else if (isContentView(parent) && parent.content === child) {\n\t\t\tparent.content = null;\n\t\t} else if (isView(parent)) {\n\t\t\tparent._removeView(child);\n\t\t}\n\t}\n\n\tprivate removeLayoutChild(parent: NgLayoutBase, child: NgView): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`ViewUtil.removeLayoutChild parent: ${parent} child: ${child}`);\n\t\t}\n\n\t\tconst index = parent.getChildIndex(child);\n\n\t\tif (index !== -1) {\n\t\t\tparent.removeChild(child);\n\t\t}\n\t}\n\n\tpublic createComment(): InvisibleNode {\n\t\treturn new CommentNode();\n\t}\n\n\tpublic createText(): InvisibleNode {\n\t\treturn new TextNode();\n\t}\n\n\tpublic createView(name: string): NgView {\n\t\tconst originalName = name;\n\t\tif (!isKnownView(name)) {\n\t\t\tname = 'ProxyViewContainer';\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`Creating view: ${originalName} ${name}`);\n\t\t}\n\n\t\tconst viewClass = getViewClass(name);\n\t\tconst view = <NgView>new viewClass();\n\t\tconst ngView = this.setNgViewExtensions(view, name);\n\n\t\treturn ngView;\n\t}\n\n\tprivate ensureNgViewExtensions(view: View): NgView {\n\t\tif (view.hasOwnProperty('meta')) {\n\t\t\treturn view as NgView;\n\t\t} else {\n\t\t\tconst name = view.cssType;\n\t\t\tconst ngView = this.setNgViewExtensions(view, name);\n\n\t\t\treturn ngView;\n\t\t}\n\t}\n\n\tprivate setNgViewExtensions(view: View, name: string): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`Make into a NgView view: ${view} name: \"${name}\"`);\n\t\t}\n\n\t\tconst ngView = view as NgView;\n\t\tngView.nodeName = name;\n\t\tngView.meta = getViewMeta(name);\n\n\t\t// we're setting the node type of the view\n\t\t// to 'element' because of checks done in the\n\t\t// dom animation engine\n\t\tngView.nodeType = ELEMENT_NODE_TYPE;\n\n\t\treturn ngView;\n\t}\n\n\tpublic setProperty(view: NgView, attributeName: string, value: any, namespace?: string): void {\n\t\tif (!view || (namespace && !this.runsIn(namespace))) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (attributeName.indexOf('.') !== -1) {\n\t\t\t// Handle nested properties\n\t\t\tconst properties = attributeName.split('.');\n\t\t\tattributeName = properties[properties.length - 1];\n\n\t\t\tlet propMap = this.getProperties(view);\n\t\t\tlet i = 0;\n\t\t\twhile (i < properties.length - 1 && typeof view !== 'undefined') {\n\t\t\t\tlet prop = properties[i];\n\t\t\t\tif (propMap.has(prop)) {\n\t\t\t\t\tprop = propMap.get(prop);\n\t\t\t\t}\n\n\t\t\t\tview = view[prop];\n\t\t\t\tpropMap = this.getProperties(view);\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof view !== 'undefined') {\n\t\t\tthis.setPropertyInternal(view, attributeName, value);\n\t\t}\n\t}\n\n\tprivate runsIn(platform: string): boolean {\n\t\treturn (platform === 'ios' && this.isIos) || (platform === 'android' && this.isAndroid);\n\t}\n\n\tprivate setPropertyInternal(view: NgView, attributeName: string, value: any): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.viewUtilLog(`Setting attribute: ${attributeName}=${value} to ${view}`);\n\t\t}\n\n\t\tif (attributeName === 'class') {\n\t\t\tthis.setClasses(view, value);\n\t\t\treturn;\n\t\t}\n\n\t\tif (XML_ATTRIBUTES.indexOf(attributeName) !== -1) {\n\t\t\tview[attributeName] = value;\n\t\t\treturn;\n\t\t}\n\n\t\tconst propMap = this.getProperties(view);\n\t\tconst propertyName = propMap.get(attributeName);\n\n\t\t// Ensure the children of a collection currently have no parent set.\n\t\tif (Array.isArray(value)) {\n\t\t\tthis.removeParentReferencesFromItems(value);\n\t\t}\n\n\t\tif (propertyName) {\n\t\t\t// We have a lower-upper case mapped property.\n\t\t\tview[propertyName] = value;\n\t\t\treturn;\n\t\t}\n\n\t\t// Unknown attribute value -- just set it to our object as is.\n\t\tview[attributeName] = value;\n\t}\n\n\tprivate removeParentReferencesFromItems(items: any[]): void {\n\t\tfor (const item of items) {\n\t\t\tif (item.parent && item.parentNode) {\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.viewUtilLog(`Unassigning parent ${item.parentNode} on value: ${item}`);\n\t\t\t\t}\n\t\t\t\titem.parent = undefined;\n\t\t\t\titem.parentNode = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getProperties(instance: any): Map<string, string> {\n\t\tconst type = instance && instance.constructor;\n\t\tif (!type) {\n\t\t\treturn new Map<string, string>();\n\t\t}\n\n\t\tif (!propertyMaps.has(type)) {\n\t\t\tlet propMap = new Map<string, string>();\n\t\t\tfor (let propName in instance) {\n\t\t\t\t// tslint:disable:forin\n\t\t\t\tpropMap.set(propName.toLowerCase(), propName);\n\t\t\t}\n\t\t\tpropertyMaps.set(type, propMap);\n\t\t}\n\n\t\treturn propertyMaps.get(type);\n\t}\n\n\tprivate cssClasses(view: NgView) {\n\t\tif (!view.ngCssClasses) {\n\t\t\tview.ngCssClasses = new Map<string, boolean>();\n\t\t}\n\t\treturn view.ngCssClasses;\n\t}\n\n\tpublic addClass(view: NgView, className: string): void {\n\t\tthis.cssClasses(view).set(className, true);\n\t\tthis.syncClasses(view);\n\t}\n\n\tpublic removeClass(view: NgView, className: string): void {\n\t\tthis.cssClasses(view).delete(className);\n\t\tthis.syncClasses(view);\n\t}\n\n\tprivate setClasses(view: NgView, classesValue: string): void {\n\t\tlet classes = classesValue.split(whiteSpaceSplitter);\n\t\tthis.cssClasses(view).clear();\n\t\tclasses.forEach((className) => this.cssClasses(view).set(className, true));\n\t\tthis.syncClasses(view);\n\t}\n\n\tprivate syncClasses(view: NgView): void {\n\t\tlet classValue = (<any>Array).from(this.cssClasses(view).keys()).join(' ');\n\t\tview.className = classValue;\n\t}\n\n\tpublic setStyle(view: NgView, styleName: string, value: any) {\n\t\tview.style[styleName] = value;\n\t}\n\n\tpublic removeStyle(view: NgView, styleName: string) {\n\t\tview.style[styleName] = unsetValue;\n\t}\n}\n","import { Inject, Injectable, Optional, NgZone, Renderer2, RendererFactory2, RendererType2, RendererStyleFlags2, ViewEncapsulation } from '@angular/core';\n\nimport { View, getViewById, profile } from '@nativescript/core';\n\nimport { ViewUtil } from './view-util';\nimport { NgView, InvisibleNode } from './element-registry';\nimport { NativeScriptDebug } from './trace';\n\n@Injectable()\nexport class NativeScriptRenderer extends Renderer2 {\n\tdata: { [key: string]: any } = Object.create(null);\n\n\tconstructor(private rootView: NgView, private zone: NgZone, private viewUtil: ViewUtil) {\n\t\tsuper();\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('NativeScriptRenderer created');\n\t\t}\n\t}\n\n\t@profile\n\tappendChild(parent: NgView, newChild: NgView): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.appendChild child: ${newChild} parent: ${parent}`);\n\t\t}\n\t\tthis.viewUtil.insertChild(parent, newChild);\n\t}\n\n\t@profile\n\tinsertBefore(parent: NgView, newChild: NgView, refChild: NgView): void {\n\t\tlet { previous, next } = refChild instanceof View ? { previous: refChild.previousSibling, next: refChild } : { previous: null, next: null };\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.insertBefore child: ${newChild} ` + `parent: ${parent} previous: ${previous} next: ${next}`);\n\t\t}\n\t\tthis.viewUtil.insertChild(parent, newChild, previous, next);\n\t}\n\n\t@profile\n\tremoveChild(parent: any, oldChild: NgView): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.removeChild child: ${oldChild} parent: ${parent}`);\n\t\t}\n\t\tthis.viewUtil.removeChild(parent, oldChild);\n\t}\n\n\t@profile\n\tselectRootElement(selector: string): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.selectRootElement: ${selector}`);\n\t\t}\n\t\tif (selector && selector[0] === '#') {\n\t\t\tconst result = getViewById(this.rootView, selector.slice(1));\n\t\t\treturn (result || this.rootView) as NgView;\n\t\t}\n\t\treturn this.rootView;\n\t}\n\n\t@profile\n\tparentNode(node: NgView): any {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.parentNode for node: ${node} is ${node.parentNode}`);\n\t\t}\n\t\treturn node.parentNode;\n\t}\n\n\t@profile\n\tnextSibling(node: NgView): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.nextSibling of ${node} is ${node.nextSibling}`);\n\t\t}\n\n\t\treturn node.nextSibling;\n\t}\n\n\t@profile\n\tcreateComment(_value: any): InvisibleNode {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.createComment ${_value}`);\n\t\t}\n\t\treturn this.viewUtil.createComment();\n\t}\n\n\t@profile\n\tcreateElement(name: any, _namespace: string): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.createElement: ${name}`);\n\t\t}\n\t\treturn this.viewUtil.createView(name);\n\t}\n\n\t@profile\n\tcreateText(_value: string): InvisibleNode {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.createText ${_value}`);\n\t\t}\n\t\treturn this.viewUtil.createText();\n\t}\n\n\t@profile\n\tcreateViewRoot(hostElement: NgView): NgView {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.createViewRoot ${hostElement.nodeName}`);\n\t\t}\n\t\treturn hostElement;\n\t}\n\n\t@profile\n\tprojectNodes(parentElement: NgView, nodes: NgView[]): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('NativeScriptRenderer.projectNodes');\n\t\t}\n\t\tnodes.forEach((node) => this.viewUtil.insertChild(parentElement, node));\n\t}\n\n\t@profile\n\tdestroy() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('NativeScriptRenderer.destroy');\n\t\t}\n\t\t// Seems to be called on component dispose only (router outlet)\n\t\t// TODO: handle this when we resolve routing and navigation.\n\t}\n\n\t@profile\n\tsetAttribute(view: NgView, name: string, value: string, namespace?: string) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setAttribute ${view} : ${name} = ${value}, namespace: ${namespace}`);\n\t\t}\n\t\treturn this.viewUtil.setProperty(view, name, value, namespace);\n\t}\n\n\t@profile\n\tremoveAttribute(_el: NgView, _name: string): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.removeAttribute ${_el}: ${_name}`);\n\t\t}\n\t}\n\n\t@profile\n\tsetProperty(view: any, name: string, value: any) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setProperty ${view} : ${name} = ${value}`);\n\t\t}\n\t\treturn this.viewUtil.setProperty(view, name, value);\n\t}\n\n\t@profile\n\taddClass(view: NgView, name: string): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.addClass ${name}`);\n\t\t}\n\t\tthis.viewUtil.addClass(view, name);\n\t}\n\n\t@profile\n\tremoveClass(view: NgView, name: string): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.removeClass ${name}`);\n\t\t}\n\t\tthis.viewUtil.removeClass(view, name);\n\t}\n\n\t@profile\n\tsetStyle(view: NgView, styleName: string, value: any, _flags?: RendererStyleFlags2): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setStyle: ${styleName} = ${value}`);\n\t\t}\n\t\tthis.viewUtil.setStyle(view, styleName, value);\n\t}\n\n\t@profile\n\tremoveStyle(view: NgView, styleName: string, _flags?: RendererStyleFlags2): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog('NativeScriptRenderer.removeStyle: ${styleName}');\n\t\t}\n\t\tthis.viewUtil.removeStyle(view, styleName);\n\t}\n\n\t// Used only in debug mode to serialize property changes to comment nodes,\n\t// such as <template> placeholders.\n\t@profile\n\tsetBindingDebugInfo(renderElement: NgView, propertyName: string, propertyValue: string): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setBindingDebugInfo: ${renderElement}, ${propertyName} = ${propertyValue}`);\n\t\t}\n\t}\n\n\t@profile\n\tsetElementDebugInfo(renderElement: any, _info: any /*RenderDebugInfo*/): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setElementDebugInfo: ${renderElement}`);\n\t\t}\n\t}\n\n\t@profile\n\tinvokeElementMethod(_renderElement: NgView, methodName: string, args: Array<any>) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.invokeElementMethod ${methodName} ${args}`);\n\t\t}\n\t}\n\n\t@profile\n\tsetValue(_renderNode: any, _value: string) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.setValue renderNode: ${_renderNode}, value: ${_value}`);\n\t\t}\n\t}\n\n\t@profile\n\tlisten(renderElement: any, eventName: string, callback: (event: any) => boolean): () => void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRenderer.listen: ${eventName}`);\n\t\t}\n\t\t// Explicitly wrap in zone\n\t\tlet zonedCallback = (...args) => {\n\t\t\tthis.zone.run(() => {\n\t\t\t\tcallback.apply(undefined, args);\n\t\t\t});\n\t\t};\n\n\t\trenderElement.on(eventName, zonedCallback);\n\t\tif (eventName === View.loadedEvent && renderElement.isLoaded) {\n\t\t\tconst notifyData = { eventName: View.loadedEvent, object: renderElement };\n\t\t\tzonedCallback(notifyData);\n\t\t}\n\t\treturn () => renderElement.off(eventName, zonedCallback);\n\t}\n}\n","import { Inject, Injectable, RendererFactory2, Optional, NgZone, RendererType2 } from '@angular/core';\nimport { View, getViewById, Application, profile } from '@nativescript/core';\nimport { APP_ROOT_VIEW, getRootPage } from './platform-providers';\nimport { ViewUtil } from './view-util';\nimport { NgView, InvisibleNode } from './element-registry';\nimport { NativeScriptDebug } from './trace';\nimport { NativeScriptRenderer } from './renderer';\n\n// CONTENT_ATTR not exported from NativeScript_renderer - we need it for styles application.\nconst COMPONENT_REGEX = /%COMP%/g;\nconst ATTR_SANITIZER = /-/g;\nexport const COMPONENT_VARIABLE = '%COMP%';\nexport const HOST_ATTR = `_nghost-${COMPONENT_VARIABLE}`;\nexport const CONTENT_ATTR = `_ngcontent-${COMPONENT_VARIABLE}`;\n\nconst replaceNgAttribute = function (input: string, componentId: string): string {\n\treturn input.replace(COMPONENT_REGEX, componentId);\n};\n\nconst addScopedStyleToCss = profile(`\"renderer\".addScopedStyleToCss`, function addScopedStyleToCss(style: string): void {\n\tApplication.addCss(style, true);\n});\n\n@Injectable()\nexport class EmulatedRenderer extends NativeScriptRenderer {\n\tprivate contentAttr: string;\n\tprivate hostAttr: string;\n\n\tconstructor(component: RendererType2, rootView: NgView, zone: NgZone, viewUtil: ViewUtil) {\n\t\tsuper(rootView, zone, viewUtil);\n\n\t\tconst componentId = component.id.replace(ATTR_SANITIZER, '_');\n\t\tthis.contentAttr = replaceNgAttribute(CONTENT_ATTR, componentId);\n\t\tthis.hostAttr = replaceNgAttribute(HOST_ATTR, componentId);\n\t\tthis.addStyles(component.styles, componentId);\n\t}\n\n\tapplyToHost(view: NgView) {\n\t\tsuper.setAttribute(view, this.hostAttr, '');\n\t}\n\n\tappendChild(parent: any, newChild: NgView): void {\n\t\tsuper.appendChild(parent, newChild);\n\t}\n\n\tcreateElement(parent: any, name: string): NgView {\n\t\tconst view = super.createElement(parent, name);\n\n\t\t// Set an attribute to the view to scope component-specific css.\n\t\t// The property name is pre-generated by Angular.\n\t\tsuper.setAttribute(view, this.contentAttr, '');\n\n\t\treturn view;\n\t}\n\n\t@profile\n\tprivate addStyles(styles: (string | any[])[], componentId: string) {\n\t\tstyles\n\t\t\t.map((s) => s.toString())\n\t\t\t.map((s) => replaceNgAttribute(s, componentId))\n\t\t\t.forEach(addScopedStyleToCss);\n\t}\n}\n","import { Inject, Injectable, RendererFactory2, Optional, NgZone, RendererType2, ViewEncapsulation } from '@angular/core';\nimport { View, getViewById, Application, profile, Device } from '@nativescript/core';\nimport { APP_ROOT_VIEW, getRootPage } from './platform-providers';\nimport { ViewUtil } from './view-util';\nimport { NgView, InvisibleNode } from './element-registry';\nimport { NativeScriptDebug } from './trace';\nimport { NativeScriptRenderer } from './renderer';\nimport { EmulatedRenderer } from './renderer-emulated';\n\nconst addStyleToCss = profile('\"renderer\".addStyleToCss', function addStyleToCss(style: string): void {\n\tApplication.addCss(style);\n});\n\n@Injectable()\nexport class NativeScriptRendererFactory implements RendererFactory2 {\n\tcomponentRenderers = new Map<string, NativeScriptRenderer>();\n\tviewUtil: ViewUtil;\n\tdefaultRenderer: NativeScriptRenderer;\n\trootNgView: NgView;\n\n\tconstructor(@Optional() @Inject(APP_ROOT_VIEW) rootView: View, private zone: NgZone) {\n\t\tthis.viewUtil = new ViewUtil(Device);\n\t\tthis.setRootNgView(rootView);\n\t\tthis.defaultRenderer = new NativeScriptRenderer(this.rootNgView, zone, this.viewUtil);\n\t}\n\n\tprivate setRootNgView(rootView: any) {\n\t\tif (!rootView) {\n\t\t\trootView = getRootPage();\n\t\t}\n\n\t\trootView.nodeName = 'NONE';\n\t\tthis.rootNgView = rootView;\n\t}\n\n\tcreateRenderer(element: any, type: RendererType2): NativeScriptRenderer {\n\t\tif (!element || !type) {\n\t\t\treturn this.defaultRenderer;\n\t\t}\n\n\t\tlet renderer = this.componentRenderers.get(type.id);\n\t\tif (renderer) {\n\t\t\tif (renderer instanceof EmulatedRenderer) {\n\t\t\t\trenderer.applyToHost(element);\n\t\t\t}\n\n\t\t\treturn renderer;\n\t\t}\n\n\t\tif (type.encapsulation === ViewEncapsulation.None) {\n\t\t\ttype.styles.map((s) => s.toString()).forEach(addStyleToCss);\n\t\t\trenderer = this.defaultRenderer;\n\t\t} else {\n\t\t\trenderer = new EmulatedRenderer(type, this.rootNgView, this.zone, this.viewUtil);\n\t\t\t(<EmulatedRenderer>renderer).applyToHost(element);\n\t\t}\n\n\t\tthis.componentRenderers.set(type.id, renderer);\n\t\treturn renderer;\n\t}\n\n\tngOnDestroy(): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.rendererLog(`NativeScriptRendererFactory.ngOnDestroy()`);\n\t\t}\n\n\t\twhile (this.rootNgView && this.rootNgView.firstChild) {\n\t\t\tthis.viewUtil.removeChild(this.rootNgView, this.rootNgView.firstChild);\n\t\t}\n\t}\n}\n","import { ApplicationModule, ErrorHandler, NO_ERRORS_SCHEMA, NgModule, RendererFactory2, SystemJsNgModuleLoader, Optional, SkipSelf, ɵINJECTOR_SCOPE } from '@angular/core';\n\nimport { ViewportScroller, ɵNullViewportScroller as NullViewportScroller } from '@angular/common';\n\nimport { NativeScriptCommonModule } from './common';\nimport { NativeScriptRendererFactory } from './renderer-factory';\nimport { DetachedLoader } from './common/detached-loader';\nimport { throwIfAlreadyLoaded } from './common/utils';\nimport { FrameService } from './frame.service';\n\nexport function errorHandlerFactory() {\n\treturn new ErrorHandler();\n}\n\nexport { DetachedLoader } from './common/detached-loader';\n\n@NgModule({\n\tdeclarations: [DetachedLoader],\n\tproviders: [FrameService, NativeScriptRendererFactory, SystemJsNgModuleLoader, { provide: ɵINJECTOR_SCOPE, useValue: 'root' }, { provide: ErrorHandler, useFactory: errorHandlerFactory }, { provide: RendererFactory2, useExisting: NativeScriptRendererFactory }, { provide: ViewportScroller, useClass: NullViewportScroller }],\n\tentryComponents: [DetachedLoader],\n\timports: [ApplicationModule, NativeScriptCommonModule],\n\texports: [ApplicationModule, NativeScriptCommonModule, DetachedLoader],\n\tschemas: [NO_ERRORS_SCHEMA],\n})\nexport class NativeScriptModule {\n\tconstructor(@Optional() @SkipSelf() parentModule: NativeScriptModule) {\n\t\t// Prevents NativeScriptModule from getting imported multiple times\n\t\tthrowIfAlreadyLoaded(parentModule, 'NativeScriptModule');\n\t}\n}\n","import { KeyframeAnimation, KeyframeAnimationInfo, KeyframeDeclaration, KeyframeInfo, parseKeyframeDeclarations, animationTimingFunctionConverter } from '@nativescript/core';\n\nexport interface Keyframe {\n\t[key: string]: string | number;\n\toffset: number;\n}\n\nconst DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nexport function dashCaseToCamelCase(input: string): string {\n\treturn input.replace(DASH_CASE_REGEXP, (...m: any[]) => m[1].toUpperCase());\n}\n\nexport function createKeyframeAnimation(styles: Keyframe[], duration: number, delay: number, easing: string): KeyframeAnimation {\n\tconst info = createKeyframeAnimationInfo(styles, duration, delay, easing);\n\treturn KeyframeAnimation.keyframeAnimationFromInfo(info);\n}\n\nconst createKeyframeAnimationInfo = (styles: Keyframe[], duration: number, delay: number, easing: string): KeyframeAnimationInfo => ({\n\tisForwards: true,\n\tduration: duration || 0.01,\n\tdelay,\n\tcurve: getCurve(easing),\n\tkeyframes: styles.map(parseAnimationKeyframe),\n});\n\nconst getCurve = (value: string) => animationTimingFunctionConverter(value);\n\nconst parseAnimationKeyframe = (styles: Keyframe): KeyframeInfo => ({\n\tduration: getKeyframeDuration(styles),\n\tdeclarations: getDeclarations(styles),\n});\n\nconst getKeyframeDuration = (styles: Keyframe): number => styles.offset;\n\nfunction getDeclarations(styles: Keyframe): KeyframeDeclaration[] {\n\tconst unparsedDeclarations: KeyframeDeclaration[] = Object.keys(styles).map((property) => ({ property, value: styles[property] }));\n\n\treturn parseKeyframeDeclarations(unparsedDeclarations);\n}\n","import { AnimationPlayer } from '@angular/animations';\nimport { View, EventData, KeyframeAnimation } from '@nativescript/core';\n\nimport { Keyframe, createKeyframeAnimation } from './utils';\nimport { NgView } from '../element-registry';\nimport { NativeScriptDebug } from '../trace';\n\nexport class NativeScriptAnimationPlayer implements AnimationPlayer {\n\tpublic parentPlayer: AnimationPlayer = null;\n\n\tprivate _startSubscriptions: Function[] = [];\n\tprivate _doneSubscriptions: Function[] = [];\n\tprivate _finished = false;\n\tprivate _started = false;\n\tprivate animation: KeyframeAnimation;\n\n\tconstructor(private target: NgView, keyframes: Keyframe[], private duration: number, private delay: number, easing: string) {\n\t\tthis.initKeyframeAnimation(keyframes, duration, delay, easing);\n\t}\n\n\tget totalTime(): number {\n\t\treturn this.delay + this.duration;\n\t}\n\n\tinit(): void {}\n\n\thasStarted(): boolean {\n\t\treturn this._started;\n\t}\n\n\tonStart(fn: Function): void {\n\t\tthis._startSubscriptions.push(fn);\n\t}\n\tonDone(fn: Function): void {\n\t\tthis._doneSubscriptions.push(fn);\n\t}\n\tonDestroy(fn: Function): void {\n\t\tthis._doneSubscriptions.push(fn);\n\t}\n\n\tplay(): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.play`);\n\t\t}\n\n\t\tif (!this.animation) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._started) {\n\t\t\tthis._started = true;\n\t\t\tthis._startSubscriptions.forEach((fn) => fn());\n\t\t\tthis._startSubscriptions = [];\n\t\t}\n\n\t\t// When this issue https://github.com/NativeScript/NativeScript/issues/7984 is fixes in @nativescript/core\n\t\t// we can change this fix and apply the one that is recommended in that issue.\n\t\tif (this.target.isLoaded) {\n\t\t\tthis.playAnimation();\n\t\t} else {\n\t\t\tthis.target.on(View.loadedEvent, this.onTargetLoaded.bind(this));\n\t\t}\n\t}\n\n\tprivate onTargetLoaded(args: EventData) {\n\t\tthis.target.off(View.loadedEvent, this.onTargetLoaded);\n\t\tthis.playAnimation();\n\t}\n\n\tprivate playAnimation() {\n\t\tthis.animation\n\t\t\t.play(this.target)\n\t\t\t.then(() => this.onFinish())\n\t\t\t.catch((_e) => {});\n\t}\n\n\tpause(): void {}\n\n\tfinish(): void {\n\t\tthis.onFinish();\n\t}\n\n\treset(): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.reset`);\n\t\t}\n\n\t\tif (this.animation && this.animation.isPlaying) {\n\t\t\tthis.animation.cancel();\n\t\t}\n\t}\n\n\trestart(): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.restart`);\n\t\t}\n\n\t\tthis.reset();\n\t\tthis.play();\n\t}\n\n\tdestroy(): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.destroy`);\n\t\t}\n\t\tthis.onFinish();\n\t}\n\n\tsetPosition(_p: any): void {\n\t\tthrow new Error('AnimationPlayer.setPosition method is not supported!');\n\t}\n\n\tgetPosition(): number {\n\t\treturn 0;\n\t}\n\n\tprivate initKeyframeAnimation(keyframes: Keyframe[], duration: number, delay: number, easing: string) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.initKeyframeAnimation`);\n\t\t}\n\n\t\tthis.animation = createKeyframeAnimation(keyframes, duration, delay, easing);\n\t}\n\n\tprivate onFinish() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationPlayer.onFinish`);\n\t\t}\n\n\t\tif (this._finished) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._finished = true;\n\t\tthis._started = false;\n\t\tthis._doneSubscriptions.forEach((fn) => fn());\n\t\tthis._doneSubscriptions = [];\n\t}\n}\n","import { AnimationPlayer } from '@angular/animations';\nimport { AnimationDriver } from '@angular/animations/browser';\nimport { ProxyViewContainer, eachDescendant, CssAnimationProperty, CSSHelper } from '@nativescript/core';\n\nimport { NativeScriptAnimationPlayer } from './animation-player';\nimport { Keyframe, dashCaseToCamelCase } from './utils';\nimport { NgView, InvisibleNode } from '../element-registry';\nimport { NativeScriptDebug } from '../trace';\n\ninterface ViewMatchResult {\n\tfound: boolean;\n}\n\ninterface ViewMatchParams {\n\toriginalView: NgView;\n}\n\ninterface QueryParams {\n\tselector: Selector;\n\tmulti: boolean;\n}\n\ninterface QueryResult {\n\tmatches: NgView[];\n}\n\nclass Selector {\n\tprivate nsSelectors: Array<any>;\n\tprivate classSelectors: string[];\n\n\tconstructor(rawSelector: string) {\n\t\tthis.parse(rawSelector);\n\t}\n\n\tmatch(element: NgView): boolean {\n\t\treturn this.nsSelectorMatch(element) || this.classSelectorsMatch(element);\n\t}\n\n\tprivate parse(rawSelector: string) {\n\t\tconst selectors = rawSelector.split(',').map((s) => s.trim());\n\n\t\tthis.nsSelectors = selectors.map(CSSHelper.createSelector);\n\t\tthis.classSelectors = selectors.filter((s) => s.startsWith('.')).map((s) => s.substring(1));\n\t}\n\n\tprivate nsSelectorMatch(element: NgView) {\n\t\treturn this.nsSelectors.some((s) => s.match(element));\n\t}\n\n\tprivate classSelectorsMatch(element: NgView) {\n\t\treturn this.classSelectors.some((s) => this.hasClass(element, s));\n\t}\n\n\t// we're using that instead of match for classes\n\t// that are dynamically added by the animation engine\n\t// such as .ng-trigger, that's added for every :enter view\n\tprivate hasClass(element: NgView, cls: string) {\n\t\treturn element && element['$$classes'] && element['$$classes'][cls];\n\t}\n}\n\nexport class NativeScriptAnimationDriver implements AnimationDriver {\n\tprivate static validProperties = [...CssAnimationProperty._getPropertyNames(), 'transform'];\n\n\tvalidateStyleProperty(property: string): boolean {\n\t\tNativeScriptDebug.animationsLog(`CssAnimationProperty.validateStyleProperty: ${property}`);\n\t\treturn NativeScriptAnimationDriver.validProperties.indexOf(property) !== -1;\n\t}\n\n\tmatchesElement(element: NgView, rawSelector: string): boolean {\n\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationDriver.matchesElement ` + `element: ${element}, selector: ${rawSelector}`);\n\n\t\tconst selector = this.makeSelector(rawSelector);\n\t\treturn selector.match(element);\n\t}\n\n\tcontainsElement(elm1: NgView, elm2: NgView): boolean {\n\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationDriver.containsElement ` + `element1: ${elm1}, element2: ${elm2}`);\n\n\t\t// Checking if the parent is our fake body object\n\t\tif (elm1['isOverride']) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst params: ViewMatchParams = { originalView: elm2 };\n\t\tconst result: ViewMatchResult = this.visitDescendants(elm1, viewMatches, params);\n\n\t\treturn result.found;\n\t}\n\n\tquery(element: NgView, rawSelector: string, multi: boolean): NgView[] {\n\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationDriver.query ` + `element: ${element}, selector: ${rawSelector} ` + `multi: ${multi}`);\n\n\t\tconst selector = this.makeSelector(rawSelector);\n\t\tconst params: QueryParams = { selector, multi };\n\t\tconst result: QueryResult = this.visitDescendants(element, queryDescendants, params);\n\n\t\treturn result.matches || [];\n\t}\n\n\tcomputeStyle(element: NgView, prop: string): string {\n\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationDriver.computeStyle ` + `element: ${element}, prop: ${prop}`);\n\n\t\tconst camelCaseProp = dashCaseToCamelCase(prop);\n\t\treturn element.style[camelCaseProp];\n\t}\n\n\tanimate(element: NgView, keyframes: Keyframe[], duration: number, delay: number, easing: string): AnimationPlayer {\n\t\tNativeScriptDebug.animationsLog(`NativeScriptAnimationDriver.animate ` + `element: ${element}, keyframes: ${keyframes} ` + `duration: ${duration}, delay: ${delay} ` + `easing: ${easing}`);\n\n\t\treturn new NativeScriptAnimationPlayer(element, keyframes, duration, delay, easing);\n\t}\n\n\tprivate makeSelector(rawSelector: string): Selector {\n\t\treturn new Selector(rawSelector);\n\t}\n\n\tprivate visitDescendants(element: NgView, cb: (child: NgView, result: any, params: any) => boolean, cbParams: any): any {\n\t\tconst result = {};\n\t\t// fill the result obj with the result from the callback function\n\t\teachDescendant(element, (child: NgView) => cb(child, result, cbParams));\n\n\t\treturn result;\n\t}\n}\n\nfunction viewMatches(element: NgView, result: ViewMatchResult, params: ViewMatchParams): boolean {\n\tif (element === params.originalView) {\n\t\tresult.found = true;\n\t}\n\n\treturn !result.found;\n}\n\nfunction queryDescendants(element: NgView, result: QueryResult, params: QueryParams): boolean {\n\tif (!result.matches) {\n\t\tresult.matches = [];\n\t}\n\n\tconst { selector, multi } = params;\n\n\t// skip comment and text nodes\n\t// because they are not actual Views\n\t// and cannot be animated\n\tif (element instanceof InvisibleNode || !selector.match(element)) {\n\t\treturn true;\n\t}\n\n\tif (element instanceof ProxyViewContainer) {\n\t\telement.eachChild((child: NgView) => {\n\t\t\tresult.matches.push(child);\n\t\t\treturn true;\n\t\t});\n\t} else {\n\t\tresult.matches.push(element);\n\t}\n\n\treturn multi;\n}\n","import { NgModule, Injectable, Inject, NgZone, RendererFactory2, Optional, SkipSelf } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { AnimationBuilder } from '@angular/animations';\n\nimport { AnimationDriver, ɵAnimationStyleNormalizer as AnimationStyleNormalizer, ɵWebAnimationsStyleNormalizer as WebAnimationsStyleNormalizer, ɵAnimationEngine as AnimationEngine } from '@angular/animations/browser';\n\nimport { ɵAnimationRendererFactory as AnimationRendererFactory, ɵBrowserAnimationBuilder as BrowserAnimationBuilder } from '@angular/platform-browser/animations';\n\n// import { NativeScriptModule } from \"../nativescript.module\";\nimport { NativeScriptRendererFactory } from '../renderer-factory';\nimport { NativeScriptAnimationDriver } from './animation-driver';\nimport { throwIfAlreadyLoaded } from '../common/utils';\nimport { NativeScriptCommonModule } from '../common';\n\n@Injectable()\nexport class InjectableAnimationEngine extends AnimationEngine {\n\tconstructor(@Inject(DOCUMENT) doc: any, driver: AnimationDriver, normalizer: AnimationStyleNormalizer) {\n\t\tsuper(doc.body, driver, normalizer);\n\t}\n}\n\nexport function instantiateSupportedAnimationDriver() {\n\treturn new NativeScriptAnimationDriver();\n}\n\nexport function instantiateRendererFactory(renderer: NativeScriptRendererFactory, engine: AnimationEngine, zone: NgZone) {\n\treturn new AnimationRendererFactory(renderer, engine, zone);\n}\n\nexport function instantiateDefaultStyleNormalizer() {\n\treturn new WebAnimationsStyleNormalizer();\n}\n\n@NgModule({\n\timports: [NativeScriptCommonModule],\n\tproviders: [\n\t\t{\n\t\t\tprovide: AnimationDriver,\n\t\t\tuseFactory: instantiateSupportedAnimationDriver,\n\t\t},\n\t\t{ provide: AnimationBuilder, useClass: BrowserAnimationBuilder },\n\t\t{\n\t\t\tprovide: AnimationStyleNormalizer,\n\t\t\tuseFactory: instantiateDefaultStyleNormalizer,\n\t\t},\n\t\t{ provide: AnimationEngine, useClass: InjectableAnimationEngine },\n\t\t{\n\t\t\tprovide: RendererFactory2,\n\t\t\tuseFactory: instantiateRendererFactory,\n\t\t\tdeps: [NativeScriptRendererFactory, AnimationEngine, NgZone],\n\t\t},\n\t],\n})\nexport class NativeScriptAnimationsModule {\n\tconstructor(@Optional() @SkipSelf() parentModule: NativeScriptAnimationsModule) {\n\t\t// Prevents NativeScriptAnimationsModule from getting imported multiple times\n\t\tthrowIfAlreadyLoaded(parentModule, 'NativeScriptAnimationsModule');\n\t}\n}\n","import { NSFileSystem } from '../file-system/ns-file-system';\n\nimport { Observable, Observer } from 'rxjs';\nimport { path } from '@nativescript/core';\n\nexport type httpResponseFactory<T> = (url: string, body: any, status: number) => T;\nexport type httpErrorFactory = (url: string, body: any, status: number) => any;\n\nexport function isLocalRequest(url: string): boolean {\n\treturn url.indexOf('~') === 0 || url.indexOf('/') === 0;\n}\n\nexport function getAbsolutePath(url: string, nsFileSystem: NSFileSystem): string {\n\turl = url.replace('~', '').replace('/', '');\n\turl = path.join(nsFileSystem.currentApp().path, url);\n\treturn url;\n}\n\nexport function processLocalFileRequest<T>(url: string, nsFileSystem: NSFileSystem, successResponse: httpResponseFactory<T>, errorResponse: httpErrorFactory): Observable<T> {\n\turl = getAbsolutePath(url, nsFileSystem);\n\n\t// request from local app resources\n\treturn new Observable((observer: Observer<T>) => {\n\t\tif (nsFileSystem.fileExists(url)) {\n\t\t\tconst localFile = nsFileSystem.fileFromPath(url);\n\t\t\tlocalFile.readText().then(\n\t\t\t\t(data) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst json = JSON.parse(data);\n\t\t\t\t\t\tobserver.next(successResponse(url, json, 200));\n\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t// Even though the response status was 2xx, this is still an error.\n\t\t\t\t\t\t// The parse error contains the text of the body that failed to parse.\n\t\t\t\t\t\tconst errorResult = { error, text: data };\n\t\t\t\t\t\tobserver.error(errorResponse(url, errorResult, 200));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(err: Object) => {\n\t\t\t\t\tobserver.error(errorResponse(url, err, 400));\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tobserver.error(errorResponse(url, 'Not Found', 404));\n\t\t}\n\t});\n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpEvent, XhrFactory, HttpResponse, HttpErrorResponse, HttpXhrBackend } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { NSFileSystem } from '../file-system/ns-file-system';\nimport { isLocalRequest, processLocalFileRequest } from './http-utils';\n\n@Injectable()\nexport class NsHttpBackEnd extends HttpXhrBackend {\n\tconstructor(xhrFactory: XhrFactory, private nsFileSystem: NSFileSystem) {\n\t\tsuper(xhrFactory);\n\t}\n\n\thandle(req: HttpRequest<any>): Observable<HttpEvent<any>> {\n\t\tlet result: Observable<HttpEvent<any>>;\n\n\t\tif (isLocalRequest(req.url)) {\n\t\t\tresult = this.handleLocalFileRequest(req.url);\n\t\t} else {\n\t\t\tresult = super.handle(req);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate handleLocalFileRequest(url: string): Observable<HttpEvent<any>> {\n\t\treturn processLocalFileRequest(url, this.nsFileSystem, createSuccessResponse, createErrorResponse);\n\t}\n}\n\nfunction createSuccessResponse(url: string, body: any, status: number): HttpEvent<any> {\n\treturn new HttpResponse({\n\t\turl,\n\t\tbody,\n\t\tstatus,\n\t\tstatusText: 'OK',\n\t});\n}\n\nfunction createErrorResponse(url: string, body: any, status: number): HttpErrorResponse {\n\treturn new HttpErrorResponse({\n\t\turl,\n\t\terror: body,\n\t\tstatus,\n\t\tstatusText: 'ERROR',\n\t});\n}\n","import { NgModule } from '@angular/core';\n\nimport { HttpClientModule, HttpBackend } from '@angular/common/http';\n\nimport { NSFileSystem } from '../file-system/ns-file-system';\nimport { NsHttpBackEnd } from './ns-http-backend';\n\n@NgModule({\n\tproviders: [NSFileSystem, NsHttpBackEnd, { provide: HttpBackend, useExisting: NsHttpBackEnd }],\n\timports: [HttpClientModule],\n\texports: [HttpClientModule],\n})\nexport class NativeScriptHttpClientModule {}\n","import { ControlValueAccessor } from '@angular/forms';\nimport { View, unsetValue } from '@nativescript/core';\n\nimport { isBlank } from '../../lang-facade';\n\nexport class BaseValueAccessor<TView extends View> implements ControlValueAccessor {\n\tprivate pendingChangeNotification: any = 0;\n\tonChange = (_) => {};\n\tonTouched = () => {};\n\n\tconstructor(public view: TView) {}\n\n\tregisterOnChange(fn: (_: any) => void): void {\n\t\tthis.onChange = (arg) => {\n\t\t\tif (this.pendingChangeNotification) {\n\t\t\t\tclearTimeout(this.pendingChangeNotification);\n\t\t\t}\n\t\t\tthis.pendingChangeNotification = setTimeout(() => {\n\t\t\t\tthis.pendingChangeNotification = 0;\n\t\t\t\tfn(arg);\n\t\t\t}, 20);\n\t\t};\n\t}\n\n\tregisterOnTouched(fn: () => void): void {\n\t\tthis.onTouched = fn;\n\t}\n\n\tsetDisabledState(isDisabled: boolean): void {\n\t\tthis.view.isEnabled = !isDisabled;\n\t}\n\n\twriteValue(_: any) {}\n\n\tprotected normalizeValue(value: any): any {\n\t\treturn isBlank(value) ? unsetValue : value;\n\t}\n}\n","import { Directive, ElementRef, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { View } from '@nativescript/core';\nimport { BaseValueAccessor } from './base-value-accessor';\n\nconst TEXT_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => TextValueAccessor),\n\tmulti: true,\n};\n\nexport type TextView = { text: string } & View;\n\n/**\n * The accessor for writing a text and listening to changes that is used by the\n * {@link NgModel} directives.\n *\n *  ### Example\n *  ```\n *  <TextField [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector:\n\t\t'TextField[ngModel],TextField[formControlName],TextField[formControl],' +\n\t\t'textField[ngModel],textField[formControlName],textField[formControl],' +\n\t\t'textfield[ngModel],textfield[formControlName],textfield[formControl],' +\n\t\t'text-field[ngModel],text-field[formControlName],text-field[formControl],' +\n\t\t'TextView[ngModel],TextView[formControlName],TextView[formControl],' +\n\t\t'textView[ngModel],textView[formControlName],textView[formControl],' +\n\t\t'textview[ngModel],textview[formControlName],textview[formControl],' +\n\t\t'text-view[ngModel],text-view[formControlName],text-view[formControl],' +\n\t\t'SearchBar[ngModel],SearchBar[formControlName],SearchBar[formControl],' +\n\t\t'searchBar[ngModel],searchBar[formControlName],searchBar[formControl],' +\n\t\t'searchbar[ngModel],searchbar[formControlName],searchbar[formControl],' +\n\t\t'search-bar[ngModel], search-bar[formControlName],search-bar[formControl]',\n\tproviders: [TEXT_VALUE_ACCESSOR],\n\thost: {\n\t\t'(blur)': 'onTouched()',\n\t\t'(textChange)': 'onChange($event.value)',\n\t},\n})\nexport class TextValueAccessor extends BaseValueAccessor<TextView> {\n\t// tslint:disable-line:directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.view.text = normalized;\n\t}\n}\n","import { Directive, ElementRef, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BaseValueAccessor } from './base-value-accessor';\nimport { Switch } from '@nativescript/core';\n\nconst CHECKED_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => CheckedValueAccessor),\n\tmulti: true,\n};\n\n/**\n * The accessor for setting a checked property and listening to changes that is used by the\n * {@link NgModel} directives.\n *\n *  ### Example\n *  ```\n *  <Switch [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector: 'Switch[ngModel],Switch[formControlName],Switch[formControl],' + 'switch[ngModel],switch[formControlName],switch[formControl]',\n\tproviders: [CHECKED_VALUE_ACCESSOR],\n\thost: {\n\t\t'(checkedChange)': 'onChange($event.value)',\n\t},\n})\nexport class CheckedValueAccessor extends BaseValueAccessor<Switch> {\n\t// tslint:disable-line:directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.view.checked = normalized;\n\t}\n}\n","import { Directive, ElementRef, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BaseValueAccessor } from './base-value-accessor';\nimport { DatePicker } from '@nativescript/core';\n\nconst DATE_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => DateValueAccessor),\n\tmulti: true,\n};\n\n/**\n * The accessor for setting a date and listening to changes that is used by the\n * {@link NgModel} directives.\n *\n *  ### Example\n *  ```\n *  <DatePicker [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector: 'DatePicker[ngModel],DatePicker[formControlName],DatePicker[formControl],' + 'datepicker[ngModel],datepicker[formControlName],datepicker[formControl],' + 'datePicker[ngModel],datePicker[formControlName],datePicker[formControl],' + 'date-picker[ngModel],date-picker[formControlName],date-picker[formControl]',\n\tproviders: [DATE_VALUE_ACCESSOR],\n\thost: {\n\t\t'(dateChange)': 'onChange($event.value)',\n\t},\n})\nexport class DateValueAccessor extends BaseValueAccessor<DatePicker> {\n\t// tslint:disable-line:directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.view.date = normalized;\n\t}\n}\n","import { Directive, ElementRef, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BaseValueAccessor } from './base-value-accessor';\nimport { TimePicker } from '@nativescript/core';\n\nconst TIME_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => TimeValueAccessor),\n\tmulti: true,\n};\n\n/**\n * The accessor for setting a time and listening to changes that is used by the\n * {@link NgModel} directives.\n *\n *  ### Example\n *  ```\n *  <TimePicker [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector: 'TimePicker[ngModel],TimePicker[formControlName],TimePicker[formControl],' + 'timepicker[ngModel],timepicker[formControlName],timepicker[formControl],' + 'timePicker[ngModel],timePicker[formControlName],timePicker[formControl],' + 'time-picker[ngModel],time-picker[formControlName],time-picker[formControl]',\n\tproviders: [TIME_VALUE_ACCESSOR],\n\thost: {\n\t\t'(timeChange)': 'onChange($event.value)',\n\t},\n})\nexport class TimeValueAccessor extends BaseValueAccessor<TimePicker> {\n\t// tslint:disable-line:directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.view.time = normalized;\n\t}\n}\n","import { Directive, ElementRef, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BaseValueAccessor } from './base-value-accessor';\nimport { Slider } from '@nativescript/core';\n\nconst NUMBER_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => NumberValueAccessor),\n\tmulti: true,\n};\n\n/**\n * The accessor for setting a value and listening to changes that is used by the\n * {@link NgModel}\n *\n *  ### Example\n *  ```\n *  <Slider [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector: 'Slider[ngModel],Slider[formControlName],Slider[formControl],' + 'slider[ngModel],slider[formControlName],slider[formControl]',\n\tproviders: [NUMBER_VALUE_ACCESSOR],\n\thost: {\n\t\t'(valueChange)': 'onChange($event.value)',\n\t},\n})\nexport class NumberValueAccessor extends BaseValueAccessor<Slider> {\n\t// tslint:disable-line:directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.view.value = normalized;\n\t}\n}\n","import { Directive, ElementRef, forwardRef, AfterViewInit } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BaseValueAccessor } from './base-value-accessor';\nimport { View } from '@nativescript/core';\n\nconst SELECTED_INDEX_VALUE_ACCESSOR = {\n\tprovide: NG_VALUE_ACCESSOR,\n\tuseExisting: forwardRef(() => SelectedIndexValueAccessor),\n\tmulti: true,\n};\n\nexport type SelectableView = { selectedIndex: number } & View;\n\n/**\n * The accessor for setting a selectedIndex and listening to changes that is used by the\n * {@link NgModel} directives.\n *\n *  ### Example\n *  ```\n *  <SegmentedBar [(ngModel)]=\"model.test\">\n *  ```\n */\n@Directive({\n\tselector:\n\t\t'SegmentedBar[ngModel],SegmentedBar[formControlName],SegmentedBar[formControl],' +\n\t\t'segmentedBar[ngModel],segmentedBar[formControlName],segmentedBar[formControl],' +\n\t\t'segmentedbar[ngModel],segmentedbar[formControlName],segmentedbar[formControl],' +\n\t\t'segmented-bar[ngModel],segmented-bar[formControlName],segmented-bar[formControl],' +\n\t\t'ListPicker[ngModel],ListPicker[formControlName],ListPicker[formControl],' +\n\t\t'listPicker[ngModel],listPicker[formControlName],listPicker[formControl],' +\n\t\t'listpicker[ngModel],listpicker[formControlName],listpicker[formControl],' +\n\t\t'list-picker[ngModel],list-picker[formControlName],list-picker[formControl],' +\n\t\t'TabView[ngModel],TabView[formControlName],TabView[formControl],' +\n\t\t'tabView[ngModel],tabView[formControlName],tabView[formControl],' +\n\t\t'tabview[ngModel],tabview[formControlName],tabview[formControl],' +\n\t\t'tab-view[ngModel],tab-view[formControlName],tab-view[formControl]',\n\tproviders: [SELECTED_INDEX_VALUE_ACCESSOR],\n\thost: {\n\t\t'(selectedIndexChange)': 'onChange($event.value)',\n\t},\n})\nexport class SelectedIndexValueAccessor extends BaseValueAccessor<SelectableView> implements AfterViewInit {\n\t// tslint:disable-line:max-line-length directive-class-suffix\n\tconstructor(elementRef: ElementRef) {\n\t\tsuper(elementRef.nativeElement);\n\t}\n\n\tprivate value: number;\n\tprivate viewInitialized: boolean;\n\n\twriteValue(value: any): void {\n\t\tconst normalized = super.normalizeValue(value);\n\t\tthis.value = normalized;\n\n\t\tif (this.viewInitialized) {\n\t\t\tthis.view.selectedIndex = this.value;\n\t\t}\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.viewInitialized = true;\n\t\tthis.view.selectedIndex = this.value;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { TextValueAccessor, CheckedValueAccessor, DateValueAccessor, TimeValueAccessor, NumberValueAccessor, SelectedIndexValueAccessor } from './value-accessors';\n\nexport * from './value-accessors';\n\n@NgModule({\n\tdeclarations: [TextValueAccessor, CheckedValueAccessor, DateValueAccessor, TimeValueAccessor, SelectedIndexValueAccessor, NumberValueAccessor],\n\tproviders: [],\n\timports: [FormsModule],\n\texports: [FormsModule, TextValueAccessor, CheckedValueAccessor, DateValueAccessor, TimeValueAccessor, SelectedIndexValueAccessor, NumberValueAccessor],\n})\nexport class NativeScriptFormsModule {}\n","import { ComponentRef } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, ChildrenOutletContexts, PRIMARY_OUTLET } from '@angular/router';\n\n/**\n * There are cases where multiple activatedRoute nodes should be associated/handled by the same PageRouterOutlet.\n * We can gat additional ActivatedRoutes nodes when there is:\n *  - Lazy loading - there is an additional ActivatedRoute node for the RouteConfig with the `loadChildren` setup\n *  - Componentless routes - there is an additional ActivatedRoute node for the componentless RouteConfig\n *\n * Example:\n *   R  <-- root\n *   |\n * feature (lazy module) <-- RouteConfig: { path: \"lazy\", loadChildren: \"./feature/feature.module#FeatureModule\" }\n *   |\n * module (componentless route) <-- RouteConfig: { path: \"module\", children: [...] } // Note: No 'component'\n *   |\n *  home <-- RouteConfig: { path: \"module\", component: MyComponent } - this is what we get as activatedRoute param\n *\n *  In these cases we will mark the top-most node (feature). NSRouteReuseStrategy will detach the tree there and\n *  use this ActivateRoute as a kay for caching.\n */\nexport function findTopActivatedRouteNodeForOutlet(activatedRoute: ActivatedRouteSnapshot): ActivatedRouteSnapshot {\n\tlet outletActivatedRoute = activatedRoute;\n\n\twhile (outletActivatedRoute.parent && outletActivatedRoute.parent.routeConfig && !outletActivatedRoute.parent.routeConfig.component) {\n\t\toutletActivatedRoute = outletActivatedRoute.parent;\n\t}\n\n\treturn outletActivatedRoute;\n}\n\nexport const pageRouterActivatedSymbol = Symbol('page-router-activated');\nexport const loaderRefSymbol = Symbol('loader-ref');\n\nexport function destroyComponentRef(componentRef: ComponentRef<any>) {\n\tif (componentRef) {\n\t\tconst loaderRef = componentRef[loaderRefSymbol];\n\t\tif (loaderRef) {\n\t\t\tloaderRef.destroy();\n\t\t}\n\t\tcomponentRef.destroy();\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { RouteReuseStrategy, ActivatedRouteSnapshot, DetachedRouteHandle } from '@angular/router';\n\nimport { NativeScriptDebug } from '../trace';\nimport { NSLocationStrategy } from './ns-location-strategy';\nimport { destroyComponentRef, findTopActivatedRouteNodeForOutlet, pageRouterActivatedSymbol } from './page-router-outlet-utils';\n\ninterface CacheItem {\n\tkey: string;\n\tstate: DetachedRouteHandle;\n\tisModal: boolean;\n}\n\nconst getSnapshotKey = function (snapshot: ActivatedRouteSnapshot): string {\n\treturn snapshot.pathFromRoot.join('->');\n};\n\n/**\n * Detached state cache\n */\nclass DetachedStateCache {\n\tprivate cache = new Array<CacheItem>();\n\n\tpublic get length(): number {\n\t\treturn this.cache.length;\n\t}\n\n\tpublic push(cacheItem: CacheItem) {\n\t\tthis.cache.push(cacheItem);\n\t}\n\n\tpublic pop(): CacheItem {\n\t\treturn this.cache.pop();\n\t}\n\n\tpublic peek(): CacheItem {\n\t\treturn this.cache[this.cache.length - 1];\n\t}\n\n\tpublic clear() {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`DetachedStateCache.clear() ${this.cache.length} items will be destroyed`);\n\t\t}\n\n\t\twhile (this.cache.length > 0) {\n\t\t\tconst state = <any>this.cache.pop().state;\n\t\t\tif (!state.componentRef) {\n\t\t\t\tthrow new Error('No componentRed found in DetachedRouteHandle');\n\t\t\t}\n\n\t\t\tdestroyComponentRef(state.componentRef);\n\t\t}\n\t}\n\n\tpublic clearModalCache() {\n\t\tlet removedItemsCount = 0;\n\t\tconst hasModalPages = this.cache.some((cacheItem) => {\n\t\t\treturn cacheItem.isModal;\n\t\t});\n\n\t\tif (hasModalPages) {\n\t\t\tlet modalCacheCleared = false;\n\n\t\t\twhile (!modalCacheCleared) {\n\t\t\t\tlet cacheItem = this.peek();\n\t\t\t\tconst state = <any>cacheItem.state;\n\n\t\t\t\tif (!state.componentRef) {\n\t\t\t\t\tthrow new Error('No componentRef found in DetachedRouteHandle');\n\t\t\t\t}\n\n\t\t\t\tdestroyComponentRef(state.componentRef);\n\t\t\t\tif (cacheItem.isModal) {\n\t\t\t\t\tmodalCacheCleared = true;\n\t\t\t\t}\n\n\t\t\t\tthis.pop();\n\t\t\t\tremovedItemsCount++;\n\t\t\t}\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`DetachedStateCache.clearModalCache() ${removedItemsCount} items will be destroyed`);\n\t\t}\n\t}\n}\n\n/**\n * Detaches subtrees loaded inside PageRouterOutlet in forward navigation\n * and reattaches them on back.\n * Reuses routes as long as their route config is the same.\n */\n@Injectable()\nexport class NSRouteReuseStrategy implements RouteReuseStrategy {\n\tprivate cacheByOutlet: { [key: string]: DetachedStateCache } = {};\n\n\tconstructor(private location: NSLocationStrategy) {}\n\n\tshouldDetach(route: ActivatedRouteSnapshot): boolean {\n\t\troute = findTopActivatedRouteNodeForOutlet(route);\n\n\t\tconst outletKey = this.location.getRouteFullPath(route);\n\t\tconst outlet = this.location.findOutlet(outletKey, route);\n\t\tconst key = getSnapshotKey(route);\n\t\tconst isPageActivated = route[pageRouterActivatedSymbol];\n\t\tconst isBack = outlet ? outlet.isPageNavigationBack : false;\n\t\tlet shouldDetach = outlet && !isBack && isPageActivated;\n\n\t\tif (outlet) {\n\t\t\tif (outlet.parent && !outlet.parent.shouldDetach) {\n\t\t\t\tshouldDetach = false;\n\t\t\t}\n\n\t\t\toutlet.shouldDetach = shouldDetach;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`shouldDetach isBack: ${isBack} key: ${key} result: ${shouldDetach}`);\n\t\t}\n\n\t\treturn shouldDetach;\n\t}\n\n\tshouldAttach(route: ActivatedRouteSnapshot): boolean {\n\t\troute = findTopActivatedRouteNodeForOutlet(route);\n\n\t\tconst outletKey = this.location.getRouteFullPath(route);\n\t\tconst outlet = this.location.findOutlet(outletKey, route);\n\t\tconst cache = this.cacheByOutlet[outletKey];\n\t\tif (!cache) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst key = getSnapshotKey(route);\n\t\tconst isBack = outlet ? outlet.isPageNavigationBack : false;\n\t\tconst shouldAttach = isBack && cache.peek().key === key;\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`shouldAttach isBack: ${isBack} key: ${key} result: ${shouldAttach}`);\n\t\t}\n\n\t\tif (outlet) {\n\t\t\toutlet.shouldDetach = true;\n\t\t}\n\n\t\treturn shouldAttach;\n\t}\n\n\tstore(route: ActivatedRouteSnapshot, state: DetachedRouteHandle): void {\n\t\troute = findTopActivatedRouteNodeForOutlet(route);\n\n\t\tconst key = getSnapshotKey(route);\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`store key: ${key}, state: ${state}`);\n\t\t}\n\n\t\tconst outletKey = this.location.getRouteFullPath(route);\n\n\t\t// tslint:disable-next-line:max-line-length\n\t\tconst cache = (this.cacheByOutlet[outletKey] = this.cacheByOutlet[outletKey] || new DetachedStateCache());\n\n\t\tif (state) {\n\t\t\tlet isModal = false;\n\t\t\tif (this.location._modalNavigationDepth > 0) {\n\t\t\t\tisModal = true;\n\t\t\t}\n\n\t\t\tcache.push({ key, state, isModal });\n\t\t} else {\n\t\t\tconst topItem = cache.peek();\n\t\t\tif (topItem.key === key) {\n\t\t\t\tcache.pop();\n\n\t\t\t\tif (!cache.length) {\n\t\t\t\t\tdelete this.cacheByOutlet[outletKey];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Trying to pop from DetachedStateCache but keys don't match. \" + `expected: ${topItem.key} actual: ${key}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tretrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle | null {\n\t\troute = findTopActivatedRouteNodeForOutlet(route);\n\n\t\tconst outletKey = this.location.getRouteFullPath(route);\n\t\tconst outlet = this.location.findOutlet(outletKey, route);\n\t\tconst cache = this.cacheByOutlet[outletKey];\n\t\tif (!cache) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst key = getSnapshotKey(route);\n\t\tconst isBack = outlet ? outlet.isPageNavigationBack : false;\n\t\tconst cachedItem = cache.peek();\n\n\t\tlet state = null;\n\t\tif (isBack && cachedItem && cachedItem.key === key) {\n\t\t\tstate = cachedItem.state;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`retrieved isBack: ${isBack} key: ${key} state: ${state}`);\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tshouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n\t\tconst shouldReuse = future.routeConfig === curr.routeConfig;\n\n\t\tif (shouldReuse && curr && curr[pageRouterActivatedSymbol]) {\n\t\t\t// When reusing route - copy the pageRouterActivated to the new snapshot\n\t\t\t// It's needed in shouldDetach to determine if the route should be detached.\n\t\t\tfuture[pageRouterActivatedSymbol] = curr[pageRouterActivatedSymbol];\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routeReuseStrategyLog(`shouldReuseRoute result: ${shouldReuse}`);\n\t\t}\n\n\t\treturn shouldReuse;\n\t}\n\n\tclearCache(outletKey: string) {\n\t\tconst cache = this.cacheByOutlet[outletKey];\n\n\t\tif (cache) {\n\t\t\tcache.clear();\n\t\t}\n\t}\n\n\tclearModalCache(outletKey: string) {\n\t\tconst cache = this.cacheByOutlet[outletKey];\n\n\t\tif (cache) {\n\t\t\tcache.clearModalCache();\n\t\t}\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Router, UrlTree, NavigationExtras, ActivatedRoute } from '@angular/router';\nimport { NSLocationStrategy } from './ns-location-strategy';\nimport { NavigationOptions, Outlet } from './ns-location-utils';\nimport { FrameService } from '../frame.service';\nimport { NativeScriptDebug } from '../trace';\nimport { findTopActivatedRouteNodeForOutlet } from './page-router-outlet-utils';\n\nexport type ExtendedNavigationExtras = NavigationExtras & NavigationOptions;\n\nexport interface BackNavigationOptions {\n\toutlets?: Array<string>;\n\trelativeTo?: ActivatedRoute | null;\n}\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class RouterExtensions {\n\tconstructor(public router: Router, public locationStrategy: NSLocationStrategy, public frameService: FrameService) {}\n\n\tpublic navigate(commands: any[], extras?: ExtendedNavigationExtras): Promise<boolean> {\n\t\tif (extras) {\n\t\t\tthis.locationStrategy._setNavigationOptions(extras);\n\t\t}\n\t\treturn this.router.navigate(commands, extras);\n\t}\n\n\tpublic navigateByUrl(url: string | UrlTree, options?: NavigationOptions): Promise<boolean> {\n\t\tif (options) {\n\t\t\tthis.locationStrategy._setNavigationOptions(options);\n\t\t}\n\t\treturn this.router.navigateByUrl(url);\n\t}\n\n\tpublic back(backNavigationOptions?: BackNavigationOptions) {\n\t\tif (backNavigationOptions) {\n\t\t\tthis.backOutlets(backNavigationOptions);\n\t\t} else {\n\t\t\tthis.locationStrategy.back();\n\t\t}\n\t}\n\n\tpublic canGoBack(backNavigationOptions?: BackNavigationOptions) {\n\t\tlet canGoBack = true;\n\t\tif (backNavigationOptions) {\n\t\t\tconst { outletsToBack, outlets } = this.findOutletsToBack(backNavigationOptions);\n\n\t\t\tif (outletsToBack.length !== outlets.length) {\n\t\t\t\tNativeScriptDebug.routerError('No outlet found relative to activated route');\n\t\t\t} else {\n\t\t\t\toutletsToBack.forEach((outletToBack) => {\n\t\t\t\t\tif (!this.locationStrategy.canGoBack(outletToBack)) {\n\t\t\t\t\t\tcanGoBack = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tcanGoBack = this.locationStrategy.canGoBack();\n\t\t}\n\n\t\treturn canGoBack;\n\t}\n\n\tpublic backToPreviousPage() {\n\t\tthis.frameService.getFrame().goBack();\n\t}\n\n\tpublic canGoBackToPreviousPage(): boolean {\n\t\treturn this.frameService.getFrame().canGoBack();\n\t}\n\n\tprivate backOutlets(options: BackNavigationOptions) {\n\t\tconst { outletsToBack, outlets } = this.findOutletsToBack(options);\n\n\t\tif (outletsToBack.length !== outlets.length) {\n\t\t\tNativeScriptDebug.routerError('No outlet found relative to activated route');\n\t\t} else {\n\t\t\toutletsToBack.forEach((outletToBack) => {\n\t\t\t\tif (outletToBack.isPageNavigationBack) {\n\t\t\t\t\tNativeScriptDebug.routerError('Attempted to call startGoBack while going back:');\n\t\t\t\t} else {\n\t\t\t\t\tthis.locationStrategy.back(outletToBack);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// tslint:disable-next-line:max-line-length\n\tprivate findOutletsToBack(options?: BackNavigationOptions): { outletsToBack: Array<Outlet>; outlets: Array<string> } {\n\t\tconst outletsToBack: Array<Outlet> = [];\n\t\tconst rootRoute: ActivatedRoute = this.router.routerState.root;\n\t\tlet outlets = options.outlets;\n\t\tlet relativeRoute = options.relativeTo || rootRoute;\n\n\t\tconst relativeRouteOutlet = this.findOutletByRoute(relativeRoute);\n\t\tconst isNSEmptyOutlet = relativeRouteOutlet && relativeRouteOutlet.isNSEmptyOutlet;\n\n\t\t// Lazy named outlet has added 'primary' inner NSEmptyOutlet child.\n\t\t// Take parent route when `relativeTo` option points to the outer named outlet.\n\t\tif (isNSEmptyOutlet && relativeRoute.outlet !== 'primary') {\n\t\t\trelativeRoute = relativeRoute.parent || relativeRoute;\n\t\t}\n\n\t\tconst routesToMatch = outlets ? relativeRoute.children : [relativeRoute];\n\t\toutlets = outlets || [relativeRoute.outlet];\n\n\t\tfor (let index = 0; index < routesToMatch.length; index++) {\n\t\t\tconst currentRoute = routesToMatch[index];\n\t\t\tif (outlets.some((currentOutlet) => currentOutlet === currentRoute.outlet)) {\n\t\t\t\tconst outlet = this.findOutletByRoute(currentRoute);\n\n\t\t\t\tif (outlet) {\n\t\t\t\t\toutletsToBack.push(outlet);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { outletsToBack: outletsToBack, outlets: outlets };\n\t}\n\n\tprivate findOutletByRoute(currentRoute: ActivatedRoute): Outlet {\n\t\tlet outlet;\n\n\t\tconst currentRouteSnapshop = findTopActivatedRouteNodeForOutlet(currentRoute.snapshot);\n\t\tconst outletKey = this.locationStrategy.getRouteFullPath(currentRouteSnapshop);\n\t\toutlet = this.locationStrategy.findOutlet(outletKey, currentRouteSnapshop);\n\n\t\treturn outlet;\n\t}\n}\n","import { Directive, Input, ElementRef, NgZone } from '@angular/core';\nimport { NavigationExtras } from '@angular/router';\nimport { ActivatedRoute, Router, UrlTree } from '@angular/router';\nimport { NavigationTransition } from '@nativescript/core';\nimport { NativeScriptDebug } from '../trace';\nimport { RouterExtensions } from './router-extensions';\nimport { NavigationOptions } from './ns-location-utils';\n\n// Copied from \"@angular/router/src/config\"\nexport type QueryParamsHandling = 'merge' | 'preserve' | '';\n\n/**\n * The nsRouterLink directive lets you link to specific parts of your app.\n *\n * Consider the following route configuration:\n * ```\n * [{ path: \"/user\", component: UserCmp }]\n * ```\n *\n * When linking to this `User` route, you can write:\n *\n * ```\n * <a [nsRouterLink]=\"[\"/user\"]\">link to user component</a>\n * ```\n *\n * NSRouterLink expects the value to be an array of path segments, followed by the params\n * for that level of routing. For instance `[\"/team\", {teamId: 1}, \"user\", {userId: 2}]`\n * means that we want to generate a link to `/team;teamId=1/user;userId=2`.\n *\n * The first segment name can be prepended with `/`, `./`, or `../`.\n * If the segment begins with `/`, the router will look up the route from the root of the app.\n * If the segment begins with `./`, or doesn\"t begin with a slash, the router will\n * instead look in the current component\"s children for the route.\n * And if the segment begins with `../`, the router will go up one level.\n */\n@Directive({ selector: '[nsRouterLink]' })\nexport class NSRouterLink {\n\t// tslint:disable-line:directive-class-suffix\n\t@Input() target: string;\n\t@Input() queryParams: { [k: string]: any };\n\t@Input() fragment: string;\n\n\t@Input() queryParamsHandling: QueryParamsHandling;\n\t@Input() preserveQueryParams: boolean;\n\t@Input() preserveFragment: boolean;\n\t@Input() skipLocationChange: boolean;\n\t@Input() replaceUrl: boolean;\n\n\t@Input() clearHistory: boolean;\n\t@Input() pageTransition: boolean | string | NavigationTransition = true;\n\t@Input() pageTransitionDuration;\n\n\tprivate commands: any[] = [];\n\n\tconstructor(private ngZone: NgZone, private router: Router, private navigator: RouterExtensions, private route: ActivatedRoute, private el: ElementRef) {}\n\n\tngAfterViewInit() {\n\t\tthis.el.nativeElement.on('tap', () => {\n\t\t\tthis.ngZone.run(() => {\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.routerLog(`nsRouterLink.tapped: ${this.commands} ` + `clear: ${this.clearHistory} ` + `transition: ${JSON.stringify(this.pageTransition)} ` + `duration: ${this.pageTransitionDuration}`);\n\t\t\t\t}\n\n\t\t\t\tconst extras = this.getExtras();\n\t\t\t\t// this.navigator.navigateByUrl(this.urlTree, extras);\n\t\t\t\tthis.navigator.navigate(this.commands, {\n\t\t\t\t\t...extras,\n\t\t\t\t\trelativeTo: this.route,\n\t\t\t\t\tqueryParams: this.queryParams,\n\t\t\t\t\tfragment: this.fragment,\n\t\t\t\t\tqueryParamsHandling: this.queryParamsHandling,\n\t\t\t\t\tpreserveFragment: attrBoolValue(this.preserveFragment),\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\t@Input('nsRouterLink')\n\tset params(data: any[] | string) {\n\t\tif (Array.isArray(data)) {\n\t\t\tthis.commands = data;\n\t\t} else {\n\t\t\tthis.commands = [data];\n\t\t}\n\t}\n\n\tprivate getExtras(): NavigationExtras & NavigationOptions {\n\t\tconst transition = this.getTransition();\n\t\treturn {\n\t\t\tskipLocationChange: attrBoolValue(this.skipLocationChange),\n\t\t\treplaceUrl: attrBoolValue(this.replaceUrl),\n\n\t\t\tclearHistory: this.convertClearHistory(this.clearHistory),\n\t\t\tanimated: transition.animated,\n\t\t\ttransition: transition.transition,\n\t\t};\n\t}\n\n\tget urlTree(): UrlTree {\n\t\tconst urlTree = this.router.createUrlTree(this.commands, {\n\t\t\trelativeTo: this.route,\n\t\t\tqueryParams: this.queryParams,\n\t\t\tfragment: this.fragment,\n\t\t\tqueryParamsHandling: this.queryParamsHandling,\n\t\t\tpreserveFragment: attrBoolValue(this.preserveFragment),\n\t\t});\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog(`nsRouterLink urlTree created: ${urlTree}`);\n\t\t}\n\n\t\treturn urlTree;\n\t}\n\n\tprivate convertClearHistory(value: boolean | string): boolean {\n\t\treturn value === true || value === 'true';\n\t}\n\n\tprivate getTransition(): { animated: boolean; transition?: NavigationTransition } {\n\t\tlet transition: NavigationTransition;\n\t\tlet animated: boolean;\n\n\t\tif (typeof this.pageTransition === 'boolean') {\n\t\t\tanimated = this.pageTransition;\n\t\t} else if (typeof this.pageTransition === 'string') {\n\t\t\tif (this.pageTransition === 'none' || this.pageTransition === 'false') {\n\t\t\t\tanimated = false;\n\t\t\t} else {\n\t\t\t\tanimated = true;\n\t\t\t\ttransition = {\n\t\t\t\t\tname: <string>this.pageTransition,\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\tanimated = true;\n\t\t\ttransition = <NavigationTransition>this.pageTransition;\n\t\t}\n\n\t\tlet duration = +this.pageTransitionDuration;\n\t\tif (!isNaN(duration)) {\n\t\t\ttransition = transition || {};\n\t\t\ttransition.duration = duration;\n\t\t}\n\n\t\treturn { animated, transition };\n\t}\n}\n\nfunction attrBoolValue(s: any): boolean {\n\treturn s === '' || !!s;\n}\n","/* tslint:disable:forin */\n// Copied unexported functions from @angular/router/src/url_tree\nimport { UrlTree, UrlSegment, PRIMARY_OUTLET } from '@angular/router';\n// UrlSegmentGroup not exported, just use any.\ntype UrlSegmentGroup = any;\n\nexport function containsTree(container: UrlTree, containee: UrlTree, exact: boolean): boolean {\n\tif (exact) {\n\t\treturn equalSegmentGroups(container.root, containee.root);\n\t} else {\n\t\treturn containsSegmentGroup(container.root, containee.root);\n\t}\n}\n\nfunction equalSegmentGroups(container: UrlSegmentGroup, containee: UrlSegmentGroup): boolean {\n\tif (!equalPath(container.segments, containee.segments)) {\n\t\treturn false;\n\t}\n\tif (container.numberOfChildren !== containee.numberOfChildren) {\n\t\treturn false;\n\t}\n\tfor (let c in containee.children) {\n\t\tif (!container.children[c]) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!equalSegmentGroups(container.children[c], containee.children[c])) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction containsSegmentGroup(container: UrlSegmentGroup, containee: UrlSegmentGroup): boolean {\n\treturn containsSegmentGroupHelper(container, containee, containee.segments);\n}\n\nfunction containsSegmentGroupHelper(container: UrlSegmentGroup, containee: UrlSegmentGroup, containeePaths: UrlSegment[]): boolean {\n\tif (container.segments.length > containeePaths.length) {\n\t\tconst current = container.segments.slice(0, containeePaths.length);\n\t\tif (!equalPath(current, containeePaths)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (containee.hasChildren()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} else if (container.segments.length === containeePaths.length) {\n\t\tif (!equalPath(container.segments, containeePaths)) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let c in containee.children) {\n\t\t\tif (!container.children[c]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!containsSegmentGroup(container.children[c], containee.children[c])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t} else {\n\t\tconst current = containeePaths.slice(0, container.segments.length);\n\t\tconst next = containeePaths.slice(container.segments.length);\n\t\tif (!equalPath(container.segments, current)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!container.children[PRIMARY_OUTLET]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn containsSegmentGroupHelper(container.children[PRIMARY_OUTLET], containee, next);\n\t}\n}\n\nexport function equalPath(a: UrlSegment[], b: UrlSegment[]): boolean {\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\tfor (let i = 0; i < a.length; ++i) {\n\t\tif (a[i].path !== b[i].path) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n","import { AfterContentInit, ContentChildren, Directive, ElementRef, Input, OnChanges, OnDestroy, QueryList, Renderer2 } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { NavigationEnd, Router, UrlTree } from '@angular/router';\nimport { containsTree } from './private-imports/router-url-tree';\n\nimport { NSRouterLink } from './ns-router-link';\n\n/**\n * The NSRouterLinkActive directive lets you add a CSS class to an element when the link\"s route\n * becomes active.\n *\n * Consider the following example:\n *\n * ```\n * <a [nsRouterLink]=\"/user/bob\" [nsRouterLinkActive]=\"active-link\">Bob</a>\n * ```\n *\n * When the url is either \"/user\" or \"/user/bob\", the active-link class will\n * be added to the component. If the url changes, the class will be removed.\n *\n * You can set more than one class, as follows:\n *\n * ```\n * <a [nsRouterLink]=\"/user/bob\" [nsRouterLinkActive]=\"class1 class2\">Bob</a>\n * <a [nsRouterLink]=\"/user/bob\" [nsRouterLinkActive]=\"[\"class1\", \"class2\"]\">Bob</a>\n * ```\n *\n * You can configure NSRouterLinkActive by passing `exact: true`. This will add the\n * classes only when the url matches the link exactly.\n *\n * ```\n * <a [nsRouterLink]=\"/user/bob\" [nsRouterLinkActive]=\"active-link\"\n * [nsRouterLinkActiveOptions]=\"{exact: true}\">Bob</a>\n * ```\n *\n * Finally, you can apply the NSRouterLinkActive directive to an ancestor of a RouterLink.\n *\n * ```\n * <div [nsRouterLinkActive]=\"active-link\" [nsRouterLinkActiveOptions]=\"{exact: true}\">\n *   <a [nsRouterLink]=\"/user/jim\">Jim</a>\n *   <a [nsRouterLink]=\"/user/bob\">Bob</a>\n * </div>\n * ```\n *\n * This will set the active-link class on the div tag if the url is either \"/user/jim\" or\n * \"/user/bob\".\n *\n * @stable\n */\n@Directive({\n\tselector: '[nsRouterLinkActive]',\n\texportAs: 'routerLinkActive',\n})\nexport class NSRouterLinkActive implements OnChanges, OnDestroy, AfterContentInit {\n\t// tslint:disable-line:max-line-length directive-class-suffix\n\t@ContentChildren(NSRouterLink) links: QueryList<NSRouterLink>;\n\n\tprivate classes: string[] = [];\n\tprivate subscription: Subscription;\n\tprivate active: boolean = false;\n\n\t@Input() nsRouterLinkActiveOptions: { exact: boolean } = { exact: false };\n\n\tconstructor(private router: Router, private element: ElementRef, private renderer: Renderer2) {\n\t\tthis.subscription = router.events.subscribe((s) => {\n\t\t\tif (s instanceof NavigationEnd) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t});\n\t}\n\n\tget isActive(): boolean {\n\t\treturn this.active;\n\t}\n\n\tngAfterContentInit(): void {\n\t\tthis.links.changes.subscribe(() => this.update());\n\t\tthis.update();\n\t}\n\n\t@Input('nsRouterLinkActive')\n\tset nsRouterLinkActive(data: string[] | string) {\n\t\tif (Array.isArray(data)) {\n\t\t\tthis.classes = <any>data;\n\t\t} else {\n\t\t\tthis.classes = data.split(' ');\n\t\t}\n\t}\n\n\tngOnChanges(_: {}): any {\n\t\tthis.update();\n\t}\n\tngOnDestroy(): any {\n\t\tthis.subscription.unsubscribe();\n\t}\n\n\tprivate update(): void {\n\t\tif (!this.links) {\n\t\t\treturn;\n\t\t}\n\t\tconst hasActiveLinks = this.hasActiveLinks();\n\t\t// react only when status has changed to prevent unnecessary dom updates\n\t\tif (this.active !== hasActiveLinks) {\n\t\t\tconst currentUrlTree = this.router.parseUrl(this.router.url);\n\t\t\tconst isActiveLinks = this.reduceList(currentUrlTree, this.links);\n\t\t\tthis.classes.forEach((c) => {\n\t\t\t\tif (isActiveLinks) {\n\t\t\t\t\tthis.renderer.addClass(this.element.nativeElement, c);\n\t\t\t\t} else {\n\t\t\t\t\tthis.renderer.removeClass(this.element.nativeElement, c);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tPromise.resolve(hasActiveLinks).then((active) => (this.active = active));\n\t}\n\n\tprivate reduceList(currentUrlTree: UrlTree, q: QueryList<any>): boolean {\n\t\treturn q.reduce((res: boolean, link: NSRouterLink) => {\n\t\t\treturn res || containsTree(currentUrlTree, link.urlTree, this.nsRouterLinkActiveOptions.exact);\n\t\t}, false);\n\t}\n\n\tprivate isLinkActive(router: Router): (link: NSRouterLink) => boolean {\n\t\treturn (link: NSRouterLink) => router.isActive(link.urlTree, this.nsRouterLinkActiveOptions.exact);\n\t}\n\n\tprivate hasActiveLinks(): boolean {\n\t\treturn this.links.some(this.isLinkActive(this.router));\n\t}\n}\n","import { Attribute, ChangeDetectorRef, ComponentFactory, ComponentFactoryResolver, ComponentRef, Directive, Inject, InjectionToken, Injector, OnDestroy, EventEmitter, Output, Type, ViewContainerRef, ElementRef, InjectFlags, NgZone } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, ChildrenOutletContexts, PRIMARY_OUTLET } from '@angular/router';\n\nimport { Frame, Page, NavigatedData, profile, Device } from '@nativescript/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { PAGE_FACTORY, PageFactory } from '../platform-providers';\nimport { NativeScriptDebug } from '../trace';\nimport { DetachedLoader } from '../common/detached-loader';\nimport { ViewUtil } from '../view-util';\nimport { NSLocationStrategy } from './ns-location-strategy';\nimport { Outlet } from './ns-location-utils';\nimport { NSRouteReuseStrategy } from './ns-route-reuse-strategy';\nimport { findTopActivatedRouteNodeForOutlet, pageRouterActivatedSymbol, loaderRefSymbol, destroyComponentRef } from './page-router-outlet-utils';\n\nexport class PageRoute {\n\tactivatedRoute: BehaviorSubject<ActivatedRoute>;\n\n\tconstructor(startRoute: ActivatedRoute) {\n\t\tthis.activatedRoute = new BehaviorSubject(startRoute);\n\t}\n}\n\nexport class DestructibleInjector implements Injector {\n\tprivate refs = new Set<any>();\n\tconstructor(private destructableProviders: ProviderSet, private parent: Injector) {}\n\tget<T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags): T {\n\t\tconst ref = this.parent.get(token, notFoundValue, flags);\n\t\tif (this.destructableProviders.has(token)) {\n\t\t\tthis.refs.add(ref);\n\t\t}\n\t\treturn ref;\n\t}\n\tdestroy() {\n\t\tthis.refs.forEach((ref) => {\n\t\t\tif (ref.ngOnDestroy instanceof Function) {\n\t\t\t\tref.ngOnDestroy();\n\t\t\t}\n\t\t});\n\t\tthis.refs.clear();\n\t}\n}\n\ntype ProviderSet = Set<Type<any> | InjectionToken<any>>;\n\nconst routeToString = function (activatedRoute: ActivatedRoute | ActivatedRouteSnapshot): string {\n\treturn activatedRoute.pathFromRoot.join('->');\n};\n\n@Directive({ selector: 'page-router-outlet' }) // tslint:disable-line:directive-selector\nexport class PageRouterOutlet implements OnDestroy {\n\t// tslint:disable-line:directive-class-suffix\n\tprivate activated: ComponentRef<any> | null = null;\n\tprivate _activatedRoute: ActivatedRoute | null = null;\n\tprivate detachedLoaderFactory: ComponentFactory<DetachedLoader>;\n\n\tprivate outlet: Outlet;\n\tprivate name: string;\n\tprivate isEmptyOutlet: boolean;\n\tprivate viewUtil: ViewUtil;\n\tprivate frame: Frame;\n\n\t@Output('activate') activateEvents = new EventEmitter<any>(); // tslint:disable-line:no-output-rename\n\t@Output('deactivate') deactivateEvents = new EventEmitter<any>(); // tslint:disable-line:no-output-rename\n\n\t/** @deprecated from Angular since v4 */\n\tget locationInjector(): Injector {\n\t\treturn this.location.injector;\n\t}\n\t/** @deprecated from Angular since v4 */\n\tget locationFactoryResolver(): ComponentFactoryResolver {\n\t\treturn this.resolver;\n\t}\n\n\tget isActivated(): boolean {\n\t\treturn !!this.activated;\n\t}\n\n\tget component(): Object {\n\t\tif (!this.activated) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('Outlet is not activated');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.activated.instance;\n\t}\n\tget activatedRoute(): ActivatedRoute {\n\t\tif (!this.activated) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('Outlet is not activated');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._activatedRoute;\n\t}\n\n\tconstructor(private parentContexts: ChildrenOutletContexts, private location: ViewContainerRef, @Attribute('name') name: string, @Attribute('actionBarVisibility') actionBarVisibility: string, @Attribute('isEmptyOutlet') isEmptyOutlet: boolean, private locationStrategy: NSLocationStrategy, private componentFactoryResolver: ComponentFactoryResolver, private resolver: ComponentFactoryResolver, private changeDetector: ChangeDetectorRef, @Inject(PAGE_FACTORY) private pageFactory: PageFactory, private routeReuseStrategy: NSRouteReuseStrategy, private ngZone: NgZone, elRef: ElementRef) {\n\t\tthis.isEmptyOutlet = isEmptyOutlet;\n\t\tthis.frame = elRef.nativeElement;\n\t\tthis.setActionBarVisibility(actionBarVisibility);\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog(`PageRouterOutlet.constructor frame: ${this.frame}`);\n\t\t}\n\n\t\tthis.name = name || PRIMARY_OUTLET;\n\t\tparentContexts.onChildOutletCreated(this.name, <any>this);\n\n\t\tthis.viewUtil = new ViewUtil(Device);\n\t\tthis.detachedLoaderFactory = resolver.resolveComponentFactory(DetachedLoader);\n\t}\n\n\tsetActionBarVisibility(actionBarVisibility: string): void {\n\t\tswitch (actionBarVisibility) {\n\t\t\tcase 'always':\n\t\t\tcase 'never':\n\t\t\t\tthis.frame.actionBarVisibility = actionBarVisibility;\n\t\t\t\treturn;\n\n\t\t\tdefault:\n\t\t\t\tthis.frame.actionBarVisibility = 'auto';\n\t\t}\n\t}\n\n\tngOnDestroy(): void {\n\t\t// Clear accumulated modal view page cache when page-router-outlet\n\t\t// destroyed on modal view closing\n\t\tthis.parentContexts.onChildOutletDestroyed(this.name);\n\n\t\tif (this.outlet) {\n\t\t\tthis.outlet.outletKeys.forEach((key) => {\n\t\t\t\tthis.routeReuseStrategy.clearModalCache(key);\n\t\t\t});\n\t\t\tthis.locationStrategy.clearOutlet(this.frame);\n\t\t} else {\n\t\t\tNativeScriptDebug.routerLog('PageRouterOutlet.ngOnDestroy: no outlet available for page-router-outlet');\n\t\t}\n\n\t\tif (this.isActivated) {\n\t\t\tconst c = this.activated.instance;\n\t\t\tthis.activated.hostView.detach();\n\t\t\tdestroyComponentRef(this.activated);\n\n\t\t\tthis.deactivateEvents.emit(c);\n\t\t\tthis.activated = null;\n\t\t}\n\t}\n\n\tdeactivate(): void {\n\t\tif (!this.outlet || !this.outlet.isPageNavigationBack) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('Currently not in page back navigation - component should be detached instead of deactivated.');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('PageRouterOutlet.deactivate() while going back - should destroy');\n\t\t}\n\n\t\tif (!this.isActivated) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst c = this.activated.instance;\n\t\tdestroyComponentRef(this.activated);\n\n\t\tthis.activated = null;\n\t\tthis._activatedRoute = null;\n\n\t\tthis.deactivateEvents.emit(c);\n\t}\n\n\t/**\n\t * Called when the `RouteReuseStrategy` instructs to detach the subtree\n\t */\n\tdetach(): ComponentRef<any> {\n\t\tif (!this.isActivated) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('Outlet is not activated');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog(`PageRouterOutlet.detach() - ${routeToString(this._activatedRoute)}`);\n\t\t}\n\n\t\t// Detach from ChangeDetection\n\t\tthis.activated.hostView.detach();\n\n\t\tconst component = this.activated;\n\t\tthis.activated = null;\n\t\tthis._activatedRoute = null;\n\t\treturn component;\n\t}\n\n\t/**\n\t * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree\n\t */\n\tattach(ref: ComponentRef<any>, activatedRoute: ActivatedRoute) {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog(`PageRouterOutlet.attach() - ${routeToString(activatedRoute)}`);\n\t\t}\n\n\t\tthis.activated = ref;\n\n\t\t// reattach to ChangeDetection\n\t\tthis.activated.hostView.markForCheck();\n\t\tthis.activated.hostView.reattach();\n\t\tthis._activatedRoute = activatedRoute;\n\t\tthis.markActivatedRoute(activatedRoute);\n\n\t\tthis.locationStrategy._finishBackPageNavigation(this.frame);\n\t}\n\n\t/**\n\t * Called by the Router to instantiate a new component during the commit phase of a navigation.\n\t * This method in turn is responsible for calling the `routerOnActivate` hook of its child.\n\t */\n\t@profile\n\tactivateWith(activatedRoute: ActivatedRoute, resolver: ComponentFactoryResolver | null): void {\n\t\tthis.outlet = this.outlet || this.getOutlet(activatedRoute.snapshot);\n\t\tif (!this.outlet) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerError('No outlet found relative to activated route');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.outlet.isNSEmptyOutlet = this.isEmptyOutlet;\n\t\tthis.locationStrategy.updateOutletFrame(this.outlet, this.frame, this.isEmptyOutlet);\n\n\t\tif (this.outlet && this.outlet.isPageNavigationBack) {\n\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\tNativeScriptDebug.routerLog('Currently in page back navigation - component should be reattached instead of activated.');\n\t\t\t}\n\t\t\tthis.locationStrategy._finishBackPageNavigation(this.frame);\n\t\t}\n\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog(`PageRouterOutlet.activateWith() - ${routeToString(activatedRoute)}`);\n\t\t}\n\n\t\tthis._activatedRoute = activatedRoute;\n\n\t\tthis.markActivatedRoute(activatedRoute);\n\n\t\tresolver = resolver || this.resolver;\n\n\t\tthis.activateOnGoForward(activatedRoute, resolver);\n\t\tthis.activateEvents.emit(this.activated.instance);\n\t}\n\n\tprivate activateOnGoForward(activatedRoute: ActivatedRoute, loadedResolver: ComponentFactoryResolver): void {\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('PageRouterOutlet.activate() forward navigation - ' + 'create detached loader in the loader container');\n\t\t}\n\n\t\tconst factory = this.getComponentFactory(activatedRoute, loadedResolver);\n\t\tconst page = this.pageFactory({\n\t\t\tisNavigation: true,\n\t\t\tcomponentType: factory.componentType,\n\t\t});\n\n\t\tconst destructables = new Set([]);\n\t\tconst injector = Injector.create({\n\t\t\tproviders: [\n\t\t\t\t{ provide: Page, useValue: page },\n\t\t\t\t{ provide: Frame, useValue: this.frame },\n\t\t\t\t{ provide: PageRoute, useValue: new PageRoute(activatedRoute) },\n\t\t\t\t{ provide: ActivatedRoute, useValue: activatedRoute },\n\t\t\t\t{ provide: ChildrenOutletContexts, useValue: this.parentContexts.getOrCreateContext(this.name).children },\n\t\t\t],\n\t\t\tparent: this.location.injector,\n\t\t});\n\n\t\tconst childInjector = new DestructibleInjector(destructables, injector);\n\t\tconst loaderRef = this.location.createComponent(this.detachedLoaderFactory, this.location.length, childInjector, []);\n\t\tloaderRef.onDestroy(() => childInjector.destroy());\n\t\tthis.changeDetector.markForCheck();\n\n\t\tthis.activated = loaderRef.instance.loadWithFactory(factory);\n\t\tthis.loadComponentInPage(page, this.activated, { activatedRoute });\n\n\t\tthis.activated[loaderRefSymbol] = loaderRef;\n\t}\n\n\t@profile\n\tprivate loadComponentInPage(page: Page, componentRef: ComponentRef<any>, navigationContext): void {\n\t\t// Component loaded. Find its root native view.\n\t\tconst componentView = componentRef.location.nativeElement;\n\t\t// Remove it from original native parent.\n\t\tthis.viewUtil.removeChild(componentView.parent, componentView);\n\t\t// Add it to the new page\n\t\tthis.viewUtil.insertChild(page, componentView);\n\n\t\tconst navigatedFromCallback = (<any>global).Zone.current.wrap((args: NavigatedData) => {\n\t\t\tif (args.isBackNavigation) {\n\t\t\t\tthis.locationStrategy._beginBackPageNavigation(this.frame);\n\t\t\t\tthis.locationStrategy.back(null, this.frame);\n\t\t\t}\n\t\t});\n\t\t// TODO: experiment with using NgZone instead of global above\n\t\t// const navigatedFromCallback = (args: NavigatedData) => {\n\t\t// \tif (args.isBackNavigation) {\n\t\t//     this.ngZone.run(() => {\n\t\t//       this.locationStrategy._beginBackPageNavigation(this.frame);\n\t\t//       this.locationStrategy.back(null, this.frame);\n\t\t//     });\n\t\t// \t}\n\t\t// };\n\n\t\tpage.on(Page.navigatedFromEvent, navigatedFromCallback);\n\t\tcomponentRef.onDestroy(() => {\n\t\t\tif (page) {\n\t\t\t\tpage.off(Page.navigatedFromEvent, navigatedFromCallback);\n\t\t\t\tpage = null;\n\t\t\t}\n\t\t});\n\n\t\tconst navOptions = this.locationStrategy._beginPageNavigation(this.frame);\n\n\t\t// Clear refCache if navigation with clearHistory\n\t\tif (navOptions.clearHistory) {\n\t\t\tconst clearCallback = () =>\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.outlet) {\n\t\t\t\t\t\tthis.routeReuseStrategy.clearCache(this.outlet.outletKeys[0]);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tpage.once(Page.navigatedToEvent, clearCallback);\n\t\t}\n\n\t\tthis.frame.navigate({\n\t\t\tcreate() {\n\t\t\t\treturn page;\n\t\t\t},\n\t\t\tcontext: navigationContext,\n\t\t\tclearHistory: navOptions.clearHistory,\n\t\t\tanimated: navOptions.animated,\n\t\t\ttransition: navOptions.transition,\n\t\t});\n\t}\n\n\t// Find and mark the top activated route as an activated one.\n\t// In ns-location-strategy we are reusing components only if their corresponing routes\n\t// are marked as activated from this method.\n\tprivate markActivatedRoute(activatedRoute: ActivatedRoute) {\n\t\tconst queue = [];\n\t\tqueue.push(activatedRoute.snapshot);\n\t\tlet currentRoute = queue.shift();\n\n\t\twhile (currentRoute) {\n\t\t\tcurrentRoute.children.forEach((childRoute) => {\n\t\t\t\tqueue.push(childRoute);\n\t\t\t});\n\n\t\t\tconst topActivatedRoute = findTopActivatedRouteNodeForOutlet(currentRoute);\n\t\t\tlet outletKey = this.locationStrategy.getRouteFullPath(topActivatedRoute);\n\t\t\tlet outlet = this.locationStrategy.findOutlet(outletKey, topActivatedRoute);\n\n\t\t\tif (outlet && outlet.frames.length) {\n\t\t\t\ttopActivatedRoute[pageRouterActivatedSymbol] = true;\n\t\t\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\t\t\tNativeScriptDebug.routerLog('Activated route marked as page: ' + routeToString(topActivatedRoute));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrentRoute = queue.shift();\n\t\t}\n\t}\n\n\tprivate getComponentFactory(activatedRoute: ActivatedRoute, loadedResolver: ComponentFactoryResolver): ComponentFactory<any> {\n\t\tconst { component } = activatedRoute.routeConfig;\n\n\t\treturn loadedResolver ? loadedResolver.resolveComponentFactory(component) : this.componentFactoryResolver.resolveComponentFactory(component);\n\t}\n\n\tprivate getOutlet(activatedRouteSnapshot: ActivatedRouteSnapshot): Outlet {\n\t\tconst topActivatedRoute = findTopActivatedRouteNodeForOutlet(activatedRouteSnapshot);\n\t\tconst outletKey = this.locationStrategy.getRouteFullPath(topActivatedRoute);\n\t\tlet outlet = this.locationStrategy.findOutlet(outletKey, topActivatedRoute);\n\n\t\t// Named lazy loaded outlet.\n\t\tif (!outlet && this.isEmptyOutlet) {\n\t\t\tconst parentOutletKey = this.locationStrategy.getRouteFullPath(topActivatedRoute.parent);\n\t\t\toutlet = this.locationStrategy.findOutlet(parentOutletKey, topActivatedRoute.parent);\n\n\t\t\tif (outlet) {\n\t\t\t\toutlet.outletKeys.push(outletKey);\n\t\t\t}\n\t\t}\n\n\t\treturn outlet;\n\t}\n}\n","import { NSLocationStrategy } from './ns-location-strategy';\nimport { PlatformLocation, LocationChangeListener } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { NativeScriptDebug } from '../trace';\n\n@Injectable()\nexport class NativescriptPlatformLocation extends PlatformLocation {\n\tconstructor(private locationStrategy: NSLocationStrategy) {\n\t\tsuper();\n\t\tif (NativeScriptDebug.isLogEnabled()) {\n\t\t\tNativeScriptDebug.routerLog('NativescriptPlatformLocation.constructor()');\n\t\t}\n\t}\n\n\tgetState(): any {\n\t\treturn undefined;\n\t}\n\n\treadonly hostname: string;\n\treadonly href: string;\n\treadonly port: string;\n\treadonly protocol: string;\n\n\tgetBaseHrefFromDOM(): string {\n\t\treturn '/';\n\t}\n\n\tonPopState(fn: LocationChangeListener): void {\n\t\tthis.locationStrategy.onPopState(fn);\n\t}\n\n\tonHashChange(_fn: LocationChangeListener): void {}\n\n\tget search(): string {\n\t\treturn '';\n\t}\n\tget hash(): string {\n\t\treturn '';\n\t}\n\tget pathname(): string {\n\t\treturn this.locationStrategy.path();\n\t}\n\tset pathname(_newPath: string) {\n\t\tthrow new Error('NativescriptPlatformLocation set pathname - not implemented');\n\t}\n\n\tpushState(state: any, title: string, url: string): void {\n\t\tthis.locationStrategy.pushState(state, title, url, null);\n\t}\n\n\treplaceState(state: any, title: string, url: string): void {\n\t\tthis.locationStrategy.replaceState(state, title, url, null);\n\t}\n\n\tforward(): void {\n\t\tthrow new Error('NativescriptPlatformLocation.forward() - not implemented');\n\t}\n\n\tback(): void {\n\t\tthis.locationStrategy.back();\n\t}\n}\n","import { Component, ViewChild } from '@angular/core';\nimport { Page } from '@nativescript/core';\nimport { PageRouterOutlet } from './page-router-outlet';\n@Component({\n\t// tslint:disable-next-line:component-selector\n\tselector: 'ns-empty-outlet',\n\ttemplate: \"<page-router-outlet isEmptyOutlet='true'></page-router-outlet>\",\n})\nexport class NSEmptyOutletComponent {\n\t@ViewChild(PageRouterOutlet, { read: PageRouterOutlet, static: false }) pageRouterOutlet: PageRouterOutlet;\n\tconstructor(private page: Page) {\n\t\tif (this.page) {\n\t\t\tthis.page.actionBarHidden = true;\n\n\t\t\tthis.page.on('loaded', () => {\n\t\t\t\tif (this.pageRouterOutlet && this.page.frame) {\n\t\t\t\t\tthis.pageRouterOutlet.setActionBarVisibility(this.page.frame.actionBarVisibility);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Compiler, Injectable, Optional, SystemJsNgModuleLoader, SystemJsNgModuleLoaderConfig } from '@angular/core';\n\n@Injectable()\nexport class NSModuleFactoryLoader extends SystemJsNgModuleLoader {\n\tconstructor(compiler: Compiler, @Optional() config?: SystemJsNgModuleLoaderConfig) {\n\t\tsuper(compiler, config);\n\t\tconsole.log(`NSModuleFactoryLoader is deprecated! ` + `You no longer need to provide it as a module loader.`);\n\t}\n}\n","import { NgModule, ModuleWithProviders, NO_ERRORS_SCHEMA, Optional, SkipSelf } from '@angular/core';\nimport { RouterModule, Routes, ExtraOptions, RouteReuseStrategy } from '@angular/router';\nimport { LocationStrategy, PlatformLocation } from '@angular/common';\nimport { NSRouterLink } from './ns-router-link';\nimport { NSRouterLinkActive } from './ns-router-link-active';\nimport { PageRouterOutlet } from './page-router-outlet';\nimport { NSLocationStrategy } from './ns-location-strategy';\nimport { NativescriptPlatformLocation } from './ns-platform-location';\nimport { NSRouteReuseStrategy } from './ns-route-reuse-strategy';\nimport { RouterExtensions } from './router-extensions';\nimport { NativeScriptCommonModule } from '../common';\nimport { FrameService } from '../frame.service';\nimport { NSEmptyOutletComponent } from './ns-empty-outlet.component';\n\nexport { PageRoute } from './page-router-outlet';\nexport { RouterExtensions } from './router-extensions';\nexport { NSModuleFactoryLoader } from './ns-module-factory-loader';\nexport { Outlet, NavigationOptions, LocationState, defaultNavOptions } from './ns-location-utils';\nexport { NSRouterLink } from './ns-router-link';\nexport { NSRouterLinkActive } from './ns-router-link-active';\nexport { PageRouterOutlet } from './page-router-outlet';\nexport { NSLocationStrategy } from './ns-location-strategy';\nexport { NSEmptyOutletComponent } from './ns-empty-outlet.component';\n\nexport function provideLocationStrategy(locationStrategy: NSLocationStrategy, frameService: FrameService): NSLocationStrategy {\n\treturn locationStrategy ? locationStrategy : new NSLocationStrategy(frameService);\n}\n\n@NgModule({\n\tdeclarations: [NSRouterLink, NSRouterLinkActive, PageRouterOutlet, NSEmptyOutletComponent],\n\tentryComponents: [NSEmptyOutletComponent],\n\timports: [RouterModule, NativeScriptCommonModule],\n\texports: [RouterModule, NSRouterLink, NSRouterLinkActive, PageRouterOutlet, NSEmptyOutletComponent],\n\tschemas: [NO_ERRORS_SCHEMA],\n})\nexport class NativeScriptRouterModule {\n\tstatic forRoot(routes: Routes, config?: ExtraOptions): ModuleWithProviders<NativeScriptRouterModule> {\n\t\treturn {\n\t\t\tngModule: NativeScriptRouterModule,\n\t\t\tproviders: [\n\t\t\t\t...RouterModule.forRoot(routes, config).providers,\n\t\t\t\t{\n\t\t\t\t\tprovide: NSLocationStrategy,\n\t\t\t\t\tuseFactory: provideLocationStrategy,\n\t\t\t\t\tdeps: [[NSLocationStrategy, new Optional(), new SkipSelf()], FrameService],\n\t\t\t\t},\n\t\t\t\t{ provide: LocationStrategy, useExisting: NSLocationStrategy },\n\t\t\t\tNativescriptPlatformLocation,\n\t\t\t\t{ provide: PlatformLocation, useExisting: NativescriptPlatformLocation },\n\t\t\t\tRouterExtensions,\n\t\t\t\tNSRouteReuseStrategy,\n\t\t\t\t{ provide: RouteReuseStrategy, useExisting: NSRouteReuseStrategy },\n\t\t\t],\n\t\t};\n\t}\n\n\tstatic forChild(routes: Routes): ModuleWithProviders<NativeScriptRouterModule> {\n\t\treturn { ngModule: NativeScriptRouterModule, providers: RouterModule.forChild(routes).providers };\n\t}\n}\n"]}